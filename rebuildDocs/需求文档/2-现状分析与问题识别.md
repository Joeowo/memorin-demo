# 2-ç°çŠ¶åˆ†æä¸é—®é¢˜è¯†åˆ«.md

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
> **åˆ›å»ºæ—¶é—´**: 2025-01-08  
> **æœ€åæ›´æ–°**: 2025-01-08  
> **æ–‡æ¡£çŠ¶æ€**: âœ… å·²å®Œæˆ  

## ğŸ“‹ æ–‡æ¡£æ¦‚è¿°

æœ¬æ–‡æ¡£åŸºäºå¯¹æ ¸å¿ƒä»£ç æ–‡ä»¶çš„æ·±å…¥åˆ†æï¼Œå…¨é¢è¯†åˆ«å½“å‰Memorinæ™ºèƒ½çŸ¥è¯†å¤ä¹ ç³»ç»Ÿå­˜åœ¨çš„æŠ€æœ¯å€ºåŠ¡ã€æ¶æ„é—®é¢˜å’Œæ€§èƒ½ç“¶é¢ˆï¼Œä¸ºåç»­Vueé‡æ„å’Œå¾®æœåŠ¡æ”¹é€ æä¾›ç²¾ç¡®çš„é—®é¢˜å®šä½å’Œè§£å†³æ–¹æ¡ˆæŒ‡å¯¼ã€‚

---

## ğŸ” åˆ†ææ–¹æ³•è®º

### åˆ†æèŒƒå›´
- **æ ¸å¿ƒä¸šåŠ¡æ–‡ä»¶**: `js/app.js` (595è¡Œ)ã€`js/review.js` (2099è¡Œ)ã€`js/knowledge.js` (1900è¡Œ)ã€`js/storage.js` (1272è¡Œ)
- **åˆ†æç»´åº¦**: ä»£ç ç»“æ„ã€èŒè´£åˆ†ç¦»ã€è€¦åˆåº¦ã€å¯ç»´æŠ¤æ€§ã€æ€§èƒ½ä¼˜åŒ–ç©ºé—´
- **é‡ç‚¹å…³æ³¨**: å·¨å‹æ–‡ä»¶æ‹†åˆ†æœºä¼šã€å…¨å±€ä¾èµ–è§£è€¦ã€ä¸šåŠ¡é€»è¾‘æå–

### åˆ†æå·¥å…·
- **é™æ€ä»£ç åˆ†æ**: æ–‡ä»¶è¡Œæ•°ç»Ÿè®¡ã€æ–¹æ³•å¤æ‚åº¦è¯„ä¼°
- **æ¶æ„æ¨¡å¼è¯†åˆ«**: è®¾è®¡æ¨¡å¼ä½¿ç”¨ã€SOLIDåŸåˆ™éµå¾ªåº¦
- **æŠ€æœ¯å€ºåŠ¡é‡åŒ–**: é‡æ„å·¥ä½œé‡è¯„ä¼°ã€é£é™©ç­‰çº§åˆ’åˆ†

---

## ğŸš¨ æ ¸å¿ƒé—®é¢˜æ¦‚è§ˆ

### é—®é¢˜ç­‰çº§åˆ†ç±»
- ğŸ”´ **ä¸¥é‡é—®é¢˜**: é˜»ç¢æ‰©å±•æ€§å’Œç»´æŠ¤æ€§çš„æ ¹æœ¬æ€§æ¶æ„ç¼ºé™·
- ğŸŸ¡ **ä¸­ç­‰é—®é¢˜**: å½±å“å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡çš„ç»“æ„æ€§é—®é¢˜  
- ğŸŸ¢ **è½»å¾®é—®é¢˜**: å¯ä¼˜åŒ–ä½†ä¸å½±å“æ ¸å¿ƒåŠŸèƒ½çš„æ”¹è¿›ç‚¹

### æŠ€æœ¯å€ºåŠ¡æ€»è§ˆ
```
ğŸ“Š æŠ€æœ¯å€ºåŠ¡ç»Ÿè®¡
â”œâ”€â”€ å·¨å‹æ–‡ä»¶: 4ä¸ª (>500è¡Œ)
â”œâ”€â”€ å…¨å±€ä¾èµ–: 7ä¸ªä¸»è¦å¯¹è±¡
â”œâ”€â”€ æ··åˆèŒè´£: 15+ä¸ªè¿åå•ä¸€èŒè´£çš„ç±»
â”œâ”€â”€ DOMè€¦åˆ: 200+ä¸ªç›´æ¥DOMæ“ä½œ
â””â”€â”€ æ•°æ®ä¸€è‡´æ€§é—®é¢˜: 3ä¸ªä¸»è¦æ•°æ®ä¿®å¤é€»è¾‘
```

---

## ğŸ”´ ä¸¥é‡æ¶æ„é—®é¢˜

### 1. å·¨å‹å•ä½“æ–‡ä»¶é—®é¢˜

#### é—®é¢˜æè¿°
```javascript
// æ–‡ä»¶å¤§å°åˆ†å¸ƒ
review.js:    2099è¡Œ - å¤ä¹ é€»è¾‘ã€SM-2ç®—æ³•ã€UIæ§åˆ¶ã€äº‹ä»¶å¤„ç†
knowledge.js: 1900è¡Œ - çŸ¥è¯†ç®¡ç†ã€è¡¨å•å¤„ç†ã€æ¨¡æ€æ¡†ã€ä¸‰çº§ç»“æ„
storage.js:   1272è¡Œ - æ•°æ®CRUDã€ä¸€è‡´æ€§æ£€æŸ¥ã€è¿ç§»ã€æ¨æ–­ç®—æ³•
app.js:        595è¡Œ - åº”ç”¨æ§åˆ¶ã€è·¯ç”±ã€å…¨å±€äº‹ä»¶ã€çŠ¶æ€ç®¡ç†
```

#### å½±å“åˆ†æ
- **ç»´æŠ¤å›°éš¾**: å•ä¸ªæ–‡ä»¶åŒ…å«å¤šç§èŒè´£ï¼Œä¿®æ”¹é£é™©é«˜
- **åä½œéšœç¢**: å¤šäººå¼€å‘æ—¶æ–‡ä»¶å†²çªæ¦‚ç‡æé«˜
- **æµ‹è¯•å¤æ‚**: å•å…ƒæµ‹è¯•éš¾ä»¥éš”ç¦»ï¼Œé›†æˆæµ‹è¯•æˆæœ¬é«˜
- **æ€§èƒ½é—®é¢˜**: åˆå§‹åŠ è½½æ—¶é—´é•¿ï¼Œæ— æ³•æŒ‰éœ€åŠ è½½

#### é‡æ„æ–¹å‘
```typescript
// Vueç»„ä»¶åŒ–æ‹†åˆ†å»ºè®®
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Review/
â”‚   â”‚   â”œâ”€â”€ ReviewCard.vue        // å¤ä¹ å¡ç‰‡ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ReviewModes.vue       // å¤ä¹ æ¨¡å¼é€‰æ‹©
â”‚   â”‚   â”œâ”€â”€ ReviewProgress.vue    // è¿›åº¦æ¡ç»„ä»¶
â”‚   â”‚   â””â”€â”€ ReviewSettings.vue    // å¤ä¹ é…ç½®
â”‚   â”œâ”€â”€ Knowledge/
â”‚   â”‚   â”œâ”€â”€ KnowledgeBase.vue     // çŸ¥è¯†åº“ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ KnowledgeArea.vue     // çŸ¥è¯†åŒºç®¡ç†
â”‚   â”‚   â”œâ”€â”€ KnowledgePoint.vue    // çŸ¥è¯†ç‚¹ç®¡ç†
â”‚   â”‚   â””â”€â”€ KnowledgeForm.vue     // çŸ¥è¯†ç‚¹è¡¨å•
â”‚   â””â”€â”€ Common/
â”‚       â”œâ”€â”€ Modal.vue             // é€šç”¨æ¨¡æ€æ¡†
â”‚       â”œâ”€â”€ ProgressBar.vue       // é€šç”¨è¿›åº¦æ¡
â”‚       â””â”€â”€ LoadingSpinner.vue    // åŠ è½½åŠ¨ç”»
â”œâ”€â”€ stores/
â”‚   â”œâ”€â”€ reviewStore.ts            // å¤ä¹ çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ knowledgeStore.ts         // çŸ¥è¯†ç®¡ç†çŠ¶æ€
â”‚   â””â”€â”€ storageStore.ts           // æ•°æ®å­˜å‚¨çŠ¶æ€
â””â”€â”€ services/
    â”œâ”€â”€ reviewService.ts          // å¤ä¹ æœåŠ¡
    â”œâ”€â”€ sm2Algorithm.ts          // SM-2ç®—æ³•
    â”œâ”€â”€ knowledgeService.ts      // çŸ¥è¯†ç®¡ç†æœåŠ¡
    â””â”€â”€ storageService.ts        // æ•°æ®å­˜å‚¨æœåŠ¡
```

### 2. å…¨å±€å¯¹è±¡è€¦åˆé—®é¢˜

#### é—®é¢˜ä»£ç ç¤ºä¾‹
```javascript
// app.js - ç´§è€¦åˆçš„å…¨å±€ä¾èµ–
if (window.knowledgeManager) {
    window.knowledgeManager.loadKnowledgeBase();
}
if (window.reviewManager) {
    window.reviewManager.initReview();
}

// review.js - ç›´æ¥è®¿é—®å…¶ä»–æ¨¡å—
const knowledgeBase = window.storageManager.getKnowledgeBaseById(baseId);
window.app.showNotification('å¤ä¹ å®Œæˆ', 'success');

// knowledge.js - å…¨å±€çŠ¶æ€åŒæ­¥
window.storageManager.setCurrentKnowledgeBase(baseId);
if (window.app && window.app.loadDashboard) {
    window.app.loadDashboard();
}
```

#### é—®é¢˜åˆ†æ
- **æµ‹è¯•å›°éš¾**: æ— æ³•mockä¾èµ–ï¼Œå•å…ƒæµ‹è¯•å‡ ä¹ä¸å¯èƒ½
- **å¾ªç¯ä¾èµ–**: æ¨¡å—é—´ç›¸äº’å¼•ç”¨ï¼Œå¯¼è‡´åŠ è½½é¡ºåºæ•æ„Ÿ
- **ç±»å‹å®‰å…¨**: æ— TypeScriptç±»å‹æ£€æŸ¥ï¼Œè¿è¡Œæ—¶é”™è¯¯å¤š
- **é‡æ„é˜»ç¢**: ä»»ä½•æ¨¡å—ä¿®æ”¹éƒ½å¯èƒ½å½±å“å…¶ä»–æ¨¡å—

#### Vueé‡æ„è§£å†³æ–¹æ¡ˆ
```typescript
// ä¾èµ–æ³¨å…¥ + PiniaçŠ¶æ€ç®¡ç†
// stores/reviewStore.ts
export const useReviewStore = defineStore('review', () => {
  const knowledgeStore = useKnowledgeStore()
  const storageStore = useStorageStore()
  
  const currentReviewList = ref([])
  const currentIndex = ref(0)
  
  const startReview = async (mode: string) => {
    const knowledgeList = await knowledgeStore.getReviewList(mode)
    currentReviewList.value = knowledgeList
    currentIndex.value = 0
  }
  
  return { currentReviewList, currentIndex, startReview }
})

// components/Review/ReviewCard.vue
<script setup lang="ts">
import { useReviewStore } from '@/stores/reviewStore'
import { useNotificationStore } from '@/stores/notificationStore'

const reviewStore = useReviewStore()
const notificationStore = useNotificationStore()

const submitRating = (rating: number) => {
  reviewStore.submitRating(rating)
  notificationStore.show('è¯„åˆ†å·²æäº¤', 'success')
}
</script>
```

### 3. èŒè´£æ··ä¹±é—®é¢˜

#### å…·ä½“è¡¨ç°

**ReviewManagerç±»èŒè´£è¿‡è½½**:
```javascript
class ReviewManager {
    // ğŸ”´ ä¸šåŠ¡é€»è¾‘
    calculateNextReview(easeFactor, interval, quality) { }
    updateKnowledgeReviewData(knowledgeId, rating, isCorrect) { }
    
    // ğŸ”´ UIæ§åˆ¶
    showReviewCard() { }
    hideAnswer() { }
    updateProgress() { }
    
    // ğŸ”´ äº‹ä»¶å¤„ç†
    bindEvents() { }
    bindUserAnswerEvents() { }
    bindChoiceEvents() { }
    
    // ğŸ”´ æ•°æ®ç®¡ç†
    loadCurrentKnowledge() { }
    getReviewList(mode) { }
    loadMistakes() { }
    
    // ğŸ”´ çŠ¶æ€ç®¡ç†
    resetReviewState() { }
    getCurrentSessionInfo() { }
}
```

**KnowledgeManagerç±»èŒè´£æ··åˆ**:
```javascript
class KnowledgeManager {
    // ğŸ”´ æ•°æ®æ¨¡å‹ç®¡ç†
    getKnowledgeBaseStats(knowledgeBaseId) { }
    validateKnowledgePointForm() { }
    
    // ğŸ”´ UIæ¸²æŸ“
    renderKnowledgeBases() { }
    renderKnowledgeAreas() { }
    showCreateKnowledgeBaseModal() { }
    
    // ğŸ”´ è¡¨å•å¤„ç†
    handleSaveKnowledgePoint() { }
    collectKnowledgePointData() { }
    fillKnowledgePointForm(knowledge) { }
    
    // ğŸ”´ ä¸šåŠ¡æµç¨‹
    startAreaReview(areaId) { }
    handleImport() { }
    handleExport() { }
}
```

#### Vueå•ä¸€èŒè´£é‡æ„
```typescript
// ä¸šåŠ¡é€»è¾‘å±‚ - çº¯å‡½æ•°
// services/sm2Algorithm.ts
export class SM2Algorithm {
  static calculateNextReview(easeFactor: number, interval: number, quality: number) {
    // çº¯ç®—æ³•é€»è¾‘ï¼Œæ— å‰¯ä½œç”¨
  }
}

// services/reviewService.ts  
export class ReviewService {
  async getReviewList(mode: string): Promise<KnowledgePoint[]> {
    // çº¯æ•°æ®å¤„ç†é€»è¾‘
  }
  
  updateReviewData(knowledgeId: string, rating: number): void {
    // çº¯ä¸šåŠ¡é€»è¾‘
  }
}

// ç»„ä»¶å±‚ - UIé€»è¾‘
// components/Review/ReviewCard.vue
<script setup lang="ts">
interface Props {
  knowledge: KnowledgePoint
  showAnswer: boolean
}

interface Emits {
  (e: 'submit-rating', rating: number): void
  (e: 'next-question'): void
}

const props = defineProps<Props>()
const emit = defineEmits<Emits>()

// åªå…³æ³¨UIçŠ¶æ€å’Œç”¨æˆ·äº¤äº’
const isAnswerVisible = ref(false)
const userAnswer = ref('')

const toggleAnswer = () => {
  isAnswerVisible.value = !isAnswerVisible.value
}

const submitRating = (rating: number) => {
  emit('submit-rating', rating)
}
</script>

// çŠ¶æ€ç®¡ç†å±‚ - åº”ç”¨çŠ¶æ€
// stores/reviewStore.ts
export const useReviewStore = defineStore('review', () => {
  const reviewService = new ReviewService()
  
  const currentKnowledge = ref<KnowledgePoint | null>(null)
  const reviewList = ref<KnowledgePoint[]>([])
  const currentIndex = ref(0)
  
  const submitRating = async (rating: number) => {
    if (!currentKnowledge.value) return
    
    reviewService.updateReviewData(currentKnowledge.value.id, rating)
    await nextQuestion()
  }
  
  return { currentKnowledge, reviewList, submitRating }
})
```

---

## ğŸŸ¡ ä¸­ç­‰æ¶æ„é—®é¢˜

### 1. DOMæ“ä½œè€¦åˆé—®é¢˜

#### é—®é¢˜ç¤ºä¾‹
```javascript
// review.js - å¤§é‡ç›´æ¥DOMæ“ä½œ
showReviewCard() {
    const reviewCard = document.getElementById('review-card');
    const reviewModes = document.getElementById('review-modes');
    
    if (reviewCard) reviewCard.style.display = 'block';
    if (reviewModes) reviewModes.style.display = 'none';
    
    document.getElementById('user-answer-input').value = '';
    document.getElementById('review-note-input').value = '';
    // ... æ›´å¤šDOMæ“ä½œ
}

// knowledge.js - å¤æ‚çš„DOMæ„å»º
renderKnowledgeBases() {
    const container = document.getElementById('knowledge-base-grid');
    container.innerHTML = knowledgeBases.map(base => {
        return `<div class="knowledge-base-card" onclick="...">
            <div class="base-header">...</div>
            <div class="base-stats">...</div>
        </div>`;
    }).join('');
}
```

#### Vueå£°æ˜å¼é‡æ„
```vue
<!-- components/Review/ReviewCard.vue -->
<template>
  <div v-show="visible" class="review-card">
    <div class="question-content">
      {{ currentKnowledge?.question }}
    </div>
    
    <textarea 
      v-model="userAnswer"
      placeholder="è¯·è¾“å…¥ä½ çš„ç­”æ¡ˆ..."
      @keydown.ctrl.enter="toggleAnswer"
    />
    
    <div v-show="showAnswer" class="answer-section">
      {{ currentKnowledge?.answer }}
    </div>
    
    <div class="rating-buttons">
      <button 
        v-for="rating in ratings" 
        :key="rating.value"
        @click="$emit('submit-rating', rating.value)"
        :class="['rating-btn', rating.class]"
      >
        {{ rating.label }}
      </button>
    </div>
  </div>
</template>

<script setup lang="ts">
interface Props {
  visible: boolean
  currentKnowledge: KnowledgePoint | null
  showAnswer: boolean
}

const props = defineProps<Props>()
const userAnswer = ref('')

const ratings = [
  { value: 1, label: 'é”™è¯¯', class: 'btn-error' },
  { value: 2, label: 'æ¨¡ç³Š', class: 'btn-warning' },
  { value: 3, label: 'æ­£ç¡®', class: 'btn-success' }
]
</script>
```

### 2. æ•°æ®ä¸€è‡´æ€§é—®é¢˜

#### é—®é¢˜åˆ†æ
```javascript
// storage.js - è¿è¡Œæ—¶æ•°æ®ä¿®å¤é€»è¾‘
getKnowledgeByBaseId(baseId) {
    // éœ€è¦è¿è¡Œæ—¶ä¿®å¤æ•°æ®ä¸€è‡´æ€§
    data.knowledge.forEach((k, index) => {
        if (!k.knowledgeBaseId) {
            // è‡ªåŠ¨æ¨æ–­çŸ¥è¯†åº“ID
            const inferredBaseId = this.inferKnowledgeBaseId(k);
            k.knowledgeBaseId = inferredBaseId;
            wasFixed = true;
            fixedCount++;
        }
    });
    
    // å¦‚æœæœ‰æ•°æ®ä¿®å¤ï¼Œä¿å­˜åˆ°å­˜å‚¨
    if (fixedCount > 0) {
        this.setData(data);
    }
}

// å¤æ‚çš„æ¨æ–­ç®—æ³•
inferKnowledgeBaseId(knowledge) {
    // ç­–ç•¥1: åŸºäºIDå‰ç¼€åŒ¹é…
    if (knowledge.id.startsWith('mil_')) return 'military_theory_base';
    if (knowledge.id.startsWith('se_')) return 'software_engineering_base';
    
    // ç­–ç•¥2: åŸºäºåˆ†ç±»æ¨¡ç³ŠåŒ¹é…
    // ç­–ç•¥3: åŸºäºæ ‡ç­¾åŒ¹é…
    // ... æ›´å¤šå¤æ‚é€»è¾‘
}
```

#### å¾®æœåŠ¡æ•°æ®ä¸€è‡´æ€§è§£å†³æ–¹æ¡ˆ
```typescript
// åç«¯æ•°æ®æ¨¡å‹ - å¼ºç±»å‹çº¦æŸ
// models/KnowledgePoint.ts
export interface KnowledgePoint {
  id: string                    // å¿…å¡«ï¼ŒUUID
  knowledgeBaseId: string      // å¿…å¡«ï¼Œå¤–é”®çº¦æŸ
  areaId: string               // å¿…å¡«ï¼Œå¤–é”®çº¦æŸ
  question: string             // å¿…å¡«
  answer: string               // å¿…å¡«
  createdAt: Date             // è‡ªåŠ¨ç”Ÿæˆ
  updatedAt: Date             // è‡ªåŠ¨æ›´æ–°
}

// æ•°æ®åº“çº¦æŸ
CREATE TABLE knowledge_points (
  id VARCHAR(36) PRIMARY KEY,
  knowledge_base_id VARCHAR(36) NOT NULL,
  area_id VARCHAR(36) NOT NULL,
  question TEXT NOT NULL,
  answer TEXT NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  
  FOREIGN KEY (knowledge_base_id) REFERENCES knowledge_bases(id) ON DELETE CASCADE,
  FOREIGN KEY (area_id) REFERENCES knowledge_areas(id) ON DELETE CASCADE,
  
  INDEX idx_knowledge_base (knowledge_base_id),
  INDEX idx_area (area_id)
);

// æœåŠ¡å±‚æ•°æ®éªŒè¯
// services/KnowledgeService.ts
export class KnowledgeService {
  async createKnowledgePoint(data: CreateKnowledgePointDto): Promise<KnowledgePoint> {
    // éªŒè¯çŸ¥è¯†åº“å­˜åœ¨
    const knowledgeBase = await this.knowledgeBaseService.findById(data.knowledgeBaseId)
    if (!knowledgeBase) {
      throw new NotFoundException('çŸ¥è¯†åº“ä¸å­˜åœ¨')
    }
    
    // éªŒè¯çŸ¥è¯†åŒºå­˜åœ¨ä¸”å±äºè¯¥çŸ¥è¯†åº“
    const area = await this.knowledgeAreaService.findById(data.areaId)
    if (!area || area.knowledgeBaseId !== data.knowledgeBaseId) {
      throw new BadRequestException('çŸ¥è¯†åŒºä¸å±äºæŒ‡å®šçŸ¥è¯†åº“')
    }
    
    return await this.repository.create(data)
  }
}
```

### 3. äº‹ä»¶å¤„ç†å¤æ‚æ€§

#### é—®é¢˜è¡¨ç°
```javascript
// review.js - å¤æ‚çš„äº‹ä»¶ç»‘å®šé€»è¾‘
bindUserAnswerEvents() {
    const userAnswerInput = document.getElementById('user-answer-input');
    
    // åˆ›å»ºäº‹ä»¶å¤„ç†å‡½æ•°ï¼ˆä¿å­˜å¼•ç”¨ä»¥ä¾¿ç§»é™¤ï¼‰
    if (!this.userAnswerKeydownHandler) {
        this.userAnswerKeydownHandler = (e) => {
            if (e.ctrlKey && e.key === 'Enter') {
                e.preventDefault();
                this.toggleAnswer();
            }
            
            if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
                e.stopPropagation();
            }
        };
    }
    
    // ç§»é™¤æ—§çš„äº‹ä»¶ç›‘å¬å™¨ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
    userAnswerInput.removeEventListener('keydown', this.userAnswerKeydownHandler);
    
    // æ·»åŠ æ–°çš„äº‹ä»¶ç›‘å¬å™¨
    userAnswerInput.addEventListener('keydown', this.userAnswerKeydownHandler);
}
```

#### Vueäº‹ä»¶å¤„ç†é‡æ„
```vue
<!-- components/Review/AnswerInput.vue -->
<template>
  <div class="answer-input-container">
    <textarea
      v-model="userAnswer"
      @keydown.ctrl.enter.prevent="$emit('toggle-answer')"
      @keydown.left.stop
      @keydown.right.stop
      @focus="$emit('focus')"
      @blur="$emit('blur')"
      @input="autoResize"
      ref="textareaRef"
      placeholder="è¯·è¾“å…¥ä½ çš„ç­”æ¡ˆ..."
      class="user-answer-input"
    />
  </div>
</template>

<script setup lang="ts">
interface Emits {
  (e: 'toggle-answer'): void
  (e: 'focus'): void
  (e: 'blur'): void
  (e: 'update:modelValue', value: string): void
}

const emit = defineEmits<Emits>()
const userAnswer = defineModel<string>({ required: true })
const textareaRef = ref<HTMLTextAreaElement>()

const autoResize = () => {
  if (textareaRef.value) {
    textareaRef.value.style.height = 'auto'
    textareaRef.value.style.height = Math.max(120, textareaRef.value.scrollHeight) + 'px'
  }
}

// ä½¿ç”¨Composition APIçš„ç”Ÿå‘½å‘¨æœŸ
onMounted(() => {
  autoResize()
})
</script>
```

---

## ğŸŸ¢ æ€§èƒ½ä¼˜åŒ–æœºä¼š

### 1. åˆå§‹åŠ è½½ä¼˜åŒ–

#### å½“å‰é—®é¢˜
```javascript
// æ‰€æœ‰JSæ–‡ä»¶åŒæ­¥åŠ è½½
<script src="js/app.js"></script>
<script src="js/storage.js"></script>
<script src="js/knowledge.js"></script>  // 1900è¡Œ
<script src="js/review.js"></script>     // 2099è¡Œ
<script src="js/statistics.js"></script>
```

#### Vite + Vueä¼˜åŒ–æ–¹æ¡ˆ
```typescript
// vite.config.ts - ä»£ç åˆ†å‰²é…ç½®
export default defineConfig({
  build: {
    rollupOptions: {
      output: {
        manualChunks: {
          'vendor': ['vue', 'pinia'],
          'review': ['./src/components/Review/index.ts'],
          'knowledge': ['./src/components/Knowledge/index.ts'],
          'statistics': ['./src/components/Statistics/index.ts']
        }
      }
    }
  }
})

// router/index.ts - è·¯ç”±æ‡’åŠ è½½
const routes = [
  {
    path: '/review',
    component: () => import('@/views/ReviewView.vue')  // æ‡’åŠ è½½
  },
  {
    path: '/knowledge', 
    component: () => import('@/views/KnowledgeView.vue')
  }
]
```

### 2. æ•°æ®å¤„ç†ä¼˜åŒ–

#### å½“å‰æ€§èƒ½é—®é¢˜
```javascript
// æ¯æ¬¡éƒ½é‡æ–°è®¡ç®—æ‰€æœ‰æ•°æ®
renderKnowledgePoints() {
    const allKnowledge = window.storageManager.getKnowledgeByAreaId(this.currentArea.id);
    
    // æ¯æ¬¡æ¸²æŸ“éƒ½é‡æ–°è¿‡æ»¤å’Œæ’åº
    this.filteredPoints = allKnowledge.filter(point => {
        // å¤æ‚çš„è¿‡æ»¤é€»è¾‘
    }).sort((a, b) => {
        // å¤æ‚çš„æ’åºé€»è¾‘  
    });
}
```

#### Vueå“åº”å¼ä¼˜åŒ–
```typescript
// composables/useKnowledgeFilter.ts
export function useKnowledgeFilter(knowledgeList: Ref<KnowledgePoint[]>) {
  const searchQuery = ref('')
  const selectedTags = ref<string[]>([])
  const sortBy = ref<'createdAt' | 'updatedAt' | 'difficulty'>('createdAt')
  
  // ä½¿ç”¨computedç¼“å­˜è®¡ç®—ç»“æœ
  const filteredKnowledge = computed(() => {
    let result = knowledgeList.value
    
    // æœç´¢è¿‡æ»¤
    if (searchQuery.value) {
      result = result.filter(item => 
        item.question.toLowerCase().includes(searchQuery.value.toLowerCase())
      )
    }
    
    // æ ‡ç­¾è¿‡æ»¤
    if (selectedTags.value.length > 0) {
      result = result.filter(item =>
        selectedTags.value.some(tag => item.tags.includes(tag))
      )
    }
    
    // æ’åº
    result = result.sort((a, b) => {
      return new Date(b[sortBy.value]).getTime() - new Date(a[sortBy.value]).getTime()
    })
    
    return result
  })
  
  return {
    searchQuery,
    selectedTags, 
    sortBy,
    filteredKnowledge
  }
}
```

---

## ğŸ“Š é‡æ„å·¥ä½œé‡è¯„ä¼°

### ä¼˜å…ˆçº§çŸ©é˜µ

| é—®é¢˜ç±»åˆ« | å½±å“ç¨‹åº¦ | ä¿®å¤éš¾åº¦ | ä¼˜å…ˆçº§ | é¢„ä¼°å·¥ä½œé‡ |
|---------|---------|---------|--------|-----------|
| å·¨å‹æ–‡ä»¶æ‹†åˆ† | ğŸ”´ æé«˜ | ğŸŸ¡ ä¸­ç­‰ | **P0** | 15äººå¤© |
| å…¨å±€ä¾èµ–è§£è€¦ | ğŸ”´ æé«˜ | ğŸ”´ å›°éš¾ | **P0** | 20äººå¤© |
| èŒè´£åˆ†ç¦»é‡æ„ | ğŸŸ¡ é«˜ | ğŸŸ¡ ä¸­ç­‰ | **P1** | 12äººå¤© |
| DOMæ“ä½œé‡æ„ | ğŸŸ¡ é«˜ | ğŸŸ¢ ç®€å• | **P1** | 8äººå¤© |
| æ•°æ®ä¸€è‡´æ€§ä¿®å¤ | ğŸ”´ æé«˜ | ğŸ”´ å›°éš¾ | **P0** | 10äººå¤© |
| äº‹ä»¶å¤„ç†ä¼˜åŒ– | ğŸŸ¢ ä¸­ç­‰ | ğŸŸ¢ ç®€å• | **P2** | 5äººå¤© |
| æ€§èƒ½ä¼˜åŒ– | ğŸŸ¡ é«˜ | ğŸŸ¢ ç®€å• | **P1** | 6äººå¤© |

### é‡æ„è·¯å¾„è§„åˆ’

```mermaid
graph TD
    A[å½“å‰å•ä½“æ¶æ„] --> B[Phase 1: æ ¸å¿ƒæ‹†åˆ†]
    B --> C[Phase 2: çŠ¶æ€ç®¡ç†]
    C --> D[Phase 3: å¾®æœåŠ¡æ¥å…¥]
    D --> E[Phase 4: æ€§èƒ½ä¼˜åŒ–]
    
    B --> B1[æ–‡ä»¶æ‹†åˆ†<br/>15äººå¤©]
    B --> B2[ä¾èµ–æ³¨å…¥<br/>20äººå¤©]
    
    C --> C1[PiniaçŠ¶æ€ç®¡ç†<br/>12äººå¤©]
    C --> C2[ç»„ä»¶åŒ–æ”¹é€ <br/>8äººå¤©]
    
    D --> D1[APIå±‚è®¾è®¡<br/>10äººå¤©]
    D --> D2[æ•°æ®è¿ç§»<br/>8äººå¤©]
    
    E --> E1[ä»£ç åˆ†å‰²<br/>3äººå¤©]
    E --> E2[ç¼“å­˜ä¼˜åŒ–<br/>3äººå¤©]
```

---

## ğŸ¯ é‡æ„æˆåŠŸæ ‡å‡†

### ä»£ç è´¨é‡æŒ‡æ ‡
- **æ–‡ä»¶å¤§å°**: å•ä¸ªæ–‡ä»¶ä¸è¶…è¿‡500è¡Œ
- **æ–¹æ³•å¤æ‚åº¦**: å•ä¸ªæ–¹æ³•ä¸è¶…è¿‡50è¡Œ
- **è€¦åˆåº¦**: æ¨¡å—é—´ä¾èµ–å…³ç³»æ¸…æ™°ï¼Œæ— å¾ªç¯ä¾èµ–
- **æµ‹è¯•è¦†ç›–ç‡**: æ ¸å¿ƒä¸šåŠ¡é€»è¾‘è¾¾åˆ°90%ä»¥ä¸Š
- **UIç»„ä»¶ä¸€è‡´æ€§**: 70%è‡ªå®šä¹‰ç»„ä»¶ä¿æŒæ¯›ç»ç’ƒä¸»é¢˜ï¼Œ30%ç»„ä»¶åº“å®Œç¾èåˆ

### æ€§èƒ½æå‡ç›®æ ‡
- **åˆå§‹åŠ è½½æ—¶é—´**: å‡å°‘60%ï¼ˆä»3såˆ°1.2sï¼‰
- **è·¯ç”±åˆ‡æ¢**: å‡å°‘80%ï¼ˆä»500msåˆ°100msï¼‰
- **æ•°æ®å¤„ç†**: å‡å°‘70%ï¼ˆå¤§åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ–ï¼‰
- **å†…å­˜ä½¿ç”¨**: å‡å°‘40%ï¼ˆç»„ä»¶æŒ‰éœ€åŠ è½½ï¼‰

### å¼€å‘ä½“éªŒæ”¹å–„
- **çƒ­é‡è½½**: æ”¯æŒç»„ä»¶çº§çƒ­æ›´æ–°
- **ç±»å‹å®‰å…¨**: 100% TypeScriptè¦†ç›–
- **å¼€å‘è°ƒè¯•**: Vue DevToolså®Œæ•´æ”¯æŒ
- **æ„å»ºé€Ÿåº¦**: Viteæé€Ÿæ„å»ºï¼ˆ<5sï¼‰
- **ç»„ä»¶å¤ç”¨**: è‡ªå®šä¹‰ç»„ä»¶åº“å¤ç”¨ç‡è¾¾åˆ°80%ä»¥ä¸Š

---

## ğŸ“‹ ä¸‹ä¸€æ­¥è¡ŒåŠ¨è®¡åˆ’

### ç«‹å³è¡ŒåŠ¨é¡¹ï¼ˆP0ï¼‰
1. **åˆ›å»ºVueé¡¹ç›®æ¶æ„** - æ­å»ºVite + Vue3 + TypeScriptåŸºç¡€æ¡†æ¶
2. **è®¾è®¡çŠ¶æ€ç®¡ç†** - å®šä¹‰Pinia storeç»“æ„å’Œæ•°æ®æµ
3. **åˆ¶å®šæ‹†åˆ†ç­–ç•¥** - ç¡®å®šå·¨å‹æ–‡ä»¶çš„å…·ä½“æ‹†åˆ†æ–¹æ¡ˆ

### çŸ­æœŸè§„åˆ’ï¼ˆ1-2å‘¨ï¼‰
1. **æ ¸å¿ƒç»„ä»¶é‡æ„** - ä¼˜å…ˆé‡æ„ReviewCardå’ŒKnowledgeFormç»„ä»¶
2. **APIæ¥å£è®¾è®¡** - å®šä¹‰å‰åç«¯æ•°æ®äº¤äº’å¥‘çº¦
3. **æ•°æ®è¿ç§»æ–¹æ¡ˆ** - åˆ¶å®šLocalStorageåˆ°æ•°æ®åº“çš„è¿ç§»ç­–ç•¥

### ä¸­æœŸç›®æ ‡ï¼ˆ3-4å‘¨ï¼‰
1. **å¾®æœåŠ¡é›†æˆ** - å®Œæˆæ ¸å¿ƒæœåŠ¡çš„å‰ç«¯æ¥å…¥
2. **æ€§èƒ½ä¼˜åŒ–** - å®æ–½ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½
3. **æµ‹è¯•å®Œå–„** - å»ºç«‹è‡ªåŠ¨åŒ–æµ‹è¯•ä½“ç³»

---

**æ–‡æ¡£çŠ¶æ€**: âœ… **å·²å®Œæˆ**  
**ä¸‹ä¸€æ­¥**: [Task-3: æŠ€æœ¯æ ˆé€‰å‹ä¸æ¶æ„è®¾è®¡](./3-æŠ€æœ¯æ ˆé€‰å‹ä¸æ¶æ„è®¾è®¡.md) 