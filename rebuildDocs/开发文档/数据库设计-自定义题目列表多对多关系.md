# è‡ªå®šä¹‰é¢˜ç›®åˆ—è¡¨æ•°æ®åº“è®¾è®¡ - å¤šå¯¹å¤šå…³ç³»æ¶æ„

> **è®¾è®¡ç›®æ ‡**: æ”¯æŒçµæ´»çš„çŸ¥è¯†ç‚¹ç»„ç»‡å’Œè‡ªå®šä¹‰é¢˜ç›®åˆ—è¡¨é…ç½®  
> **æ ¸å¿ƒç‰¹æ€§**: å¤šå¯¹å¤šå…³ç³»ï¼Œè·¨çŸ¥è¯†åº“/çŸ¥è¯†åŒºç»„åˆ  
> **è®¾è®¡æ—¶é—´**: 2025-01-08  

## ğŸ¯ è®¾è®¡éœ€æ±‚åˆ†æ

### æ ¸å¿ƒéœ€æ±‚
1. **è·¨åŸŸç»„åˆ**: é¢˜ç›®åˆ—è¡¨å¯åŒ…å«æ¥è‡ªä¸åŒçŸ¥è¯†åº“ã€ä¸åŒçŸ¥è¯†åŒºçš„çŸ¥è¯†ç‚¹
2. **å¤šé‡å½’å±**: åŒä¸€çŸ¥è¯†ç‚¹å¯ä»¥éš¶å±äºå¤šä¸ªçŸ¥è¯†åŒºå’Œå¤šä¸ªçŸ¥è¯†åº“
3. **çµæ´»é…ç½®**: ç”¨æˆ·å¯ä»¥è‡ªç”±ç»„åˆä»»æ„çŸ¥è¯†ç‚¹åˆ›å»ºè‡ªå®šä¹‰é¢˜ç›®åˆ—è¡¨
4. **æƒé™ç®¡ç†**: æ”¯æŒç”¨æˆ·çº§åˆ«çš„é¢˜ç›®åˆ—è¡¨ç®¡ç†

### ç°æœ‰æ¨¡å‹é—®é¢˜
```sql
-- å½“å‰æ¨¡å‹çš„å±€é™æ€§
CREATE TABLE knowledge_points (
    id BIGINT PRIMARY KEY,
    knowledge_base_id BIGINT,  -- ğŸš« å•ä¸€å½’å±ï¼Œä¸æ”¯æŒå¤šå¯¹å¤š
    area_id BIGINT,            -- ğŸš« å•ä¸€å½’å±ï¼Œä¸æ”¯æŒå¤šå¯¹å¤š
    question TEXT,
    answer TEXT
);
```

## ğŸ—ï¸ æ–°æ•°æ®æ¨¡å‹è®¾è®¡

### æ ¸å¿ƒå®ä½“åˆ†ç¦»

#### 1. çŸ¥è¯†ç‚¹æ ¸å¿ƒè¡¨
```sql
-- çŸ¥è¯†ç‚¹æ ¸å¿ƒä¿¡æ¯è¡¨ï¼ˆä¸ç›´æ¥å…³è”çŸ¥è¯†åº“å’ŒçŸ¥è¯†åŒºï¼‰
CREATE TABLE knowledge_points (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    user_id BIGINT NOT NULL COMMENT 'åˆ›å»ºè€…ç”¨æˆ·ID',
    type ENUM('fill', 'choice') NOT NULL DEFAULT 'fill' COMMENT 'é¢˜ç›®ç±»å‹',
    question TEXT NOT NULL COMMENT 'é—®é¢˜å†…å®¹',
    answer TEXT NOT NULL COMMENT 'ç­”æ¡ˆå†…å®¹',
    explanation TEXT COMMENT 'è§£é‡Šè¯´æ˜',
    difficulty TINYINT NOT NULL DEFAULT 3 COMMENT 'éš¾åº¦ç­‰çº§ 1-5',
    
    -- é€‰æ‹©é¢˜ç‰¹æœ‰å­—æ®µ
    choice_type ENUM('single', 'multiple') COMMENT 'é€‰æ‹©é¢˜ç±»å‹',
    options JSON COMMENT 'é€‰æ‹©é¢˜é€‰é¡¹',
    correct_answer VARCHAR(50) COMMENT 'æ­£ç¡®ç­”æ¡ˆ',
    
    -- æ‰©å±•å­—æ®µ
    tags JSON COMMENT 'æ ‡ç­¾æ•°ç»„',
    score DECIMAL(5,2) DEFAULT 0 COMMENT 'åˆ†å€¼',
    source VARCHAR(100) COMMENT 'æ¥æºæ ‡è¯†',
    
    -- æ—¶é—´å­—æ®µ
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    -- ç´¢å¼•
    INDEX idx_user_type (user_id, type),
    INDEX idx_difficulty (difficulty),
    INDEX idx_created_at (created_at),
    FULLTEXT INDEX ft_question_answer (question, answer)
) COMMENT='çŸ¥è¯†ç‚¹æ ¸å¿ƒè¡¨';
```

#### 2. çŸ¥è¯†åº“è¡¨
```sql
-- çŸ¥è¯†åº“è¡¨
CREATE TABLE knowledge_bases (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    user_id BIGINT NOT NULL COMMENT 'æ‰€å±ç”¨æˆ·ID',
    name VARCHAR(100) NOT NULL COMMENT 'çŸ¥è¯†åº“åç§°',
    description TEXT COMMENT 'çŸ¥è¯†åº“æè¿°',
    icon VARCHAR(50) DEFAULT 'ğŸ“š' COMMENT 'å›¾æ ‡',
    color VARCHAR(20) DEFAULT '#667eea' COMMENT 'ä¸»é¢˜è‰²',
    category VARCHAR(50) COMMENT 'åˆ†ç±»',
    is_public BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦å…¬å¼€',
    sort_order INT DEFAULT 0 COMMENT 'æ’åºåºå·',
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    INDEX idx_user_category (user_id, category),
    INDEX idx_public (is_public),
    INDEX idx_sort (sort_order)
) COMMENT='çŸ¥è¯†åº“è¡¨';
```

#### 3. çŸ¥è¯†åŒºè¡¨
```sql
-- çŸ¥è¯†åŒºè¡¨
CREATE TABLE knowledge_areas (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    user_id BIGINT NOT NULL COMMENT 'æ‰€å±ç”¨æˆ·ID',
    name VARCHAR(100) NOT NULL COMMENT 'çŸ¥è¯†åŒºåç§°',
    description TEXT COMMENT 'çŸ¥è¯†åŒºæè¿°',
    color VARCHAR(20) DEFAULT '#667eea' COMMENT 'ä¸»é¢˜è‰²',
    category VARCHAR(50) COMMENT 'åˆ†ç±»',
    parent_area_id BIGINT COMMENT 'çˆ¶çŸ¥è¯†åŒºIDï¼ˆæ”¯æŒå±‚æ¬¡ç»“æ„ï¼‰',
    sort_order INT DEFAULT 0 COMMENT 'æ’åºåºå·',
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    INDEX idx_user_category (user_id, category),
    INDEX idx_parent (parent_area_id),
    INDEX idx_sort (sort_order),
    FOREIGN KEY (parent_area_id) REFERENCES knowledge_areas(id) ON DELETE SET NULL
) COMMENT='çŸ¥è¯†åŒºè¡¨';
```

### å…³è”å…³ç³»è¡¨

#### 4. çŸ¥è¯†ç‚¹-çŸ¥è¯†åº“å…³è”è¡¨
```sql
-- çŸ¥è¯†ç‚¹ä¸çŸ¥è¯†åº“çš„å¤šå¯¹å¤šå…³è”è¡¨
CREATE TABLE knowledge_point_base_relations (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    knowledge_point_id BIGINT NOT NULL COMMENT 'çŸ¥è¯†ç‚¹ID',
    knowledge_base_id BIGINT NOT NULL COMMENT 'çŸ¥è¯†åº“ID',
    user_id BIGINT NOT NULL COMMENT 'æ“ä½œç”¨æˆ·ID',
    
    -- å…³è”å±æ€§
    category VARCHAR(50) COMMENT 'åœ¨è¯¥çŸ¥è¯†åº“ä¸­çš„åˆ†ç±»',
    sort_order INT DEFAULT 0 COMMENT 'åœ¨çŸ¥è¯†åº“ä¸­çš„æ’åº',
    is_primary BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦ä¸ºä¸»è¦å½’å±',
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    created_by BIGINT COMMENT 'å…³è”åˆ›å»ºè€…',
    
    -- å”¯ä¸€çº¦æŸå’Œç´¢å¼•
    UNIQUE KEY uk_point_base (knowledge_point_id, knowledge_base_id),
    INDEX idx_base_points (knowledge_base_id),
    INDEX idx_point_bases (knowledge_point_id),
    INDEX idx_user_relations (user_id),
    INDEX idx_primary (is_primary),
    
    FOREIGN KEY (knowledge_point_id) REFERENCES knowledge_points(id) ON DELETE CASCADE,
    FOREIGN KEY (knowledge_base_id) REFERENCES knowledge_bases(id) ON DELETE CASCADE
) COMMENT='çŸ¥è¯†ç‚¹-çŸ¥è¯†åº“å…³è”è¡¨';
```

#### 5. çŸ¥è¯†ç‚¹-çŸ¥è¯†åŒºå…³è”è¡¨
```sql
-- çŸ¥è¯†ç‚¹ä¸çŸ¥è¯†åŒºçš„å¤šå¯¹å¤šå…³è”è¡¨
CREATE TABLE knowledge_point_area_relations (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    knowledge_point_id BIGINT NOT NULL COMMENT 'çŸ¥è¯†ç‚¹ID',
    knowledge_area_id BIGINT NOT NULL COMMENT 'çŸ¥è¯†åŒºID',
    user_id BIGINT NOT NULL COMMENT 'æ“ä½œç”¨æˆ·ID',
    
    -- å…³è”å±æ€§
    relevance_score DECIMAL(3,2) DEFAULT 1.0 COMMENT 'ç›¸å…³åº¦è¯„åˆ† 0.0-1.0',
    sort_order INT DEFAULT 0 COMMENT 'åœ¨çŸ¥è¯†åŒºä¸­çš„æ’åº',
    is_primary BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦ä¸ºä¸»è¦å½’å±',
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    created_by BIGINT COMMENT 'å…³è”åˆ›å»ºè€…',
    
    -- å”¯ä¸€çº¦æŸå’Œç´¢å¼•
    UNIQUE KEY uk_point_area (knowledge_point_id, knowledge_area_id),
    INDEX idx_area_points (knowledge_area_id),
    INDEX idx_point_areas (knowledge_point_id),
    INDEX idx_user_relations (user_id),
    INDEX idx_relevance (relevance_score),
    INDEX idx_primary (is_primary),
    
    FOREIGN KEY (knowledge_point_id) REFERENCES knowledge_points(id) ON DELETE CASCADE,
    FOREIGN KEY (knowledge_area_id) REFERENCES knowledge_areas(id) ON DELETE CASCADE
) COMMENT='çŸ¥è¯†ç‚¹-çŸ¥è¯†åŒºå…³è”è¡¨';
```

### è‡ªå®šä¹‰é¢˜ç›®åˆ—è¡¨

#### 6. è‡ªå®šä¹‰é¢˜ç›®åˆ—è¡¨è¡¨
```sql
-- è‡ªå®šä¹‰é¢˜ç›®åˆ—è¡¨è¡¨
CREATE TABLE custom_question_lists (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    user_id BIGINT NOT NULL COMMENT 'åˆ›å»ºç”¨æˆ·ID',
    name VARCHAR(100) NOT NULL COMMENT 'é¢˜ç›®åˆ—è¡¨åç§°',
    description TEXT COMMENT 'æè¿°è¯´æ˜',
    
    -- é…ç½®ä¿¡æ¯
    total_count INT DEFAULT 0 COMMENT 'é¢˜ç›®æ€»æ•°',
    estimated_time INT COMMENT 'é¢„ä¼°å®Œæˆæ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰',
    difficulty_level DECIMAL(3,1) COMMENT 'å¹³å‡éš¾åº¦ç­‰çº§',
    
    -- ç”Ÿæˆé…ç½®ï¼ˆå­˜å‚¨ question-list-generator çš„é…ç½®ï¼‰
    generation_config JSON COMMENT 'ç”Ÿæˆé…ç½®JSON',
    source_summary JSON COMMENT 'æ•°æ®æºæ‘˜è¦ä¿¡æ¯',
    
    -- çŠ¶æ€å’Œæƒé™
    status ENUM('draft', 'active', 'archived') DEFAULT 'active' COMMENT 'çŠ¶æ€',
    is_public BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦å…¬å¼€',
    is_template BOOLEAN DEFAULT FALSE COMMENT 'æ˜¯å¦ä¸ºæ¨¡æ¿',
    
    -- ä½¿ç”¨ç»Ÿè®¡
    usage_count INT DEFAULT 0 COMMENT 'ä½¿ç”¨æ¬¡æ•°',
    last_used_at TIMESTAMP NULL COMMENT 'æœ€åä½¿ç”¨æ—¶é—´',
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    INDEX idx_user_status (user_id, status),
    INDEX idx_public_template (is_public, is_template),
    INDEX idx_usage (usage_count, last_used_at),
    INDEX idx_difficulty (difficulty_level)
) COMMENT='è‡ªå®šä¹‰é¢˜ç›®åˆ—è¡¨è¡¨';
```

#### 7. é¢˜ç›®åˆ—è¡¨-çŸ¥è¯†ç‚¹å…³è”è¡¨
```sql
-- é¢˜ç›®åˆ—è¡¨ä¸çŸ¥è¯†ç‚¹çš„å…³è”è¡¨
CREATE TABLE question_list_point_relations (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    question_list_id BIGINT NOT NULL COMMENT 'é¢˜ç›®åˆ—è¡¨ID',
    knowledge_point_id BIGINT NOT NULL COMMENT 'çŸ¥è¯†ç‚¹ID',
    
    -- åœ¨åˆ—è¡¨ä¸­çš„å±æ€§
    sequence_order INT NOT NULL COMMENT 'åœ¨åˆ—è¡¨ä¸­çš„é¡ºåº',
    weight DECIMAL(3,2) DEFAULT 1.0 COMMENT 'æƒé‡ç³»æ•°',
    source_type VARCHAR(50) COMMENT 'æ¥æºç±»å‹ï¼šknowledge-base, knowledge-area, customç­‰',
    source_id BIGINT COMMENT 'æ¥æºID',
    
    -- é€‰æ‹©åŸå› å’Œæ ‡ç­¾
    selection_reason VARCHAR(200) COMMENT 'é€‰æ‹©åŸå› ',
    custom_tags JSON COMMENT 'è‡ªå®šä¹‰æ ‡ç­¾',
    
    -- å…ƒæ•°æ®ï¼ˆä» question-list-generator çš„ _meta å­—æ®µï¼‰
    generation_meta JSON COMMENT 'ç”Ÿæˆæ—¶çš„å…ƒæ•°æ®',
    
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    -- å”¯ä¸€çº¦æŸå’Œç´¢å¼•
    UNIQUE KEY uk_list_point (question_list_id, knowledge_point_id),
    INDEX idx_list_sequence (question_list_id, sequence_order),
    INDEX idx_point_lists (knowledge_point_id),
    INDEX idx_source (source_type, source_id),
    INDEX idx_weight (weight),
    
    FOREIGN KEY (question_list_id) REFERENCES custom_question_lists(id) ON DELETE CASCADE,
    FOREIGN KEY (knowledge_point_id) REFERENCES knowledge_points(id) ON DELETE CASCADE
) COMMENT='é¢˜ç›®åˆ—è¡¨-çŸ¥è¯†ç‚¹å…³è”è¡¨';
```

## ğŸ“Š é«˜çº§æŸ¥è¯¢ç¤ºä¾‹

### 1. æŸ¥è¯¢æŸä¸ªçŸ¥è¯†ç‚¹çš„æ‰€æœ‰å½’å±
```sql
-- æŸ¥è¯¢çŸ¥è¯†ç‚¹çš„å®Œæ•´å½’å±ä¿¡æ¯
SELECT 
    kp.id, kp.question,
    GROUP_CONCAT(DISTINCT kb.name) as knowledge_bases,
    GROUP_CONCAT(DISTINCT ka.name) as knowledge_areas
FROM knowledge_points kp
LEFT JOIN knowledge_point_base_relations kpbr ON kp.id = kpbr.knowledge_point_id
LEFT JOIN knowledge_bases kb ON kpbr.knowledge_base_id = kb.id
LEFT JOIN knowledge_point_area_relations kpar ON kp.id = kpar.knowledge_point_id  
LEFT JOIN knowledge_areas ka ON kpar.knowledge_area_id = ka.id
WHERE kp.id = ?
GROUP BY kp.id;
```

### 2. è·¨çŸ¥è¯†åº“æŸ¥è¯¢çŸ¥è¯†ç‚¹
```sql
-- æŸ¥è¯¢åŒæ—¶å±äºå¤šä¸ªçŸ¥è¯†åº“çš„çŸ¥è¯†ç‚¹
SELECT kp.*, COUNT(DISTINCT kpbr.knowledge_base_id) as base_count
FROM knowledge_points kp
JOIN knowledge_point_base_relations kpbr ON kp.id = kpbr.knowledge_point_id
WHERE kpbr.knowledge_base_id IN (1, 2, 3)
GROUP BY kp.id
HAVING base_count > 1;
```

### 3. è‡ªå®šä¹‰é¢˜ç›®åˆ—è¡¨çš„å¤æ‚æŸ¥è¯¢
```sql
-- æŸ¥è¯¢é¢˜ç›®åˆ—è¡¨çš„è¯¦ç»†ä¿¡æ¯å’ŒçŸ¥è¯†ç‚¹åˆ†å¸ƒ
SELECT 
    cql.name as list_name,
    cql.total_count,
    COUNT(DISTINCT qlpr.knowledge_point_id) as actual_count,
    COUNT(DISTINCT kpbr.knowledge_base_id) as base_count,
    COUNT(DISTINCT kpar.knowledge_area_id) as area_count,
    AVG(kp.difficulty) as avg_difficulty
FROM custom_question_lists cql
JOIN question_list_point_relations qlpr ON cql.id = qlpr.question_list_id
JOIN knowledge_points kp ON qlpr.knowledge_point_id = kp.id
LEFT JOIN knowledge_point_base_relations kpbr ON kp.id = kpbr.knowledge_point_id
LEFT JOIN knowledge_point_area_relations kpar ON kp.id = kpar.knowledge_point_id
WHERE cql.id = ?
GROUP BY cql.id;
```

## ğŸ”§ æ•°æ®è¿ç§»ç­–ç•¥

### ä»ç°æœ‰æ¨¡å‹è¿ç§»
```sql
-- è¿ç§»ç°æœ‰çŸ¥è¯†ç‚¹æ•°æ®
INSERT INTO knowledge_point_base_relations (knowledge_point_id, knowledge_base_id, user_id, is_primary)
SELECT id, knowledge_base_id, user_id, TRUE
FROM old_knowledge_points 
WHERE knowledge_base_id IS NOT NULL;

INSERT INTO knowledge_point_area_relations (knowledge_point_id, knowledge_area_id, user_id, is_primary)
SELECT id, area_id, user_id, TRUE  
FROM old_knowledge_points
WHERE area_id IS NOT NULL;
```

### æ‰¹é‡æ“ä½œå‡½æ•°
```sql
-- åˆ›å»ºå­˜å‚¨è¿‡ç¨‹ï¼šæ·»åŠ çŸ¥è¯†ç‚¹åˆ°å¤šä¸ªçŸ¥è¯†åº“
DELIMITER $$
CREATE PROCEDURE AddPointToMultipleBases(
    IN p_point_id BIGINT,
    IN p_base_ids JSON,
    IN p_user_id BIGINT
)
BEGIN
    DECLARE i INT DEFAULT 0;
    DECLARE base_count INT;
    DECLARE current_base_id BIGINT;
    
    SET base_count = JSON_LENGTH(p_base_ids);
    
    WHILE i < base_count DO
        SET current_base_id = JSON_EXTRACT(p_base_ids, CONCAT('$[', i, ']'));
        
        INSERT IGNORE INTO knowledge_point_base_relations 
        (knowledge_point_id, knowledge_base_id, user_id, is_primary)
        VALUES (p_point_id, current_base_id, p_user_id, i = 0);
        
        SET i = i + 1;
    END WHILE;
END$$
DELIMITER ;
```

## ğŸ¯ åº”ç”¨å±‚é€‚é…

### 1. Question List Generator é€‚é…
```typescript
// é€‚é…æ–°çš„å¤šå¯¹å¤šå…³ç³»æŸ¥è¯¢
interface QuestionSource {
  type: 'multiple-bases' | 'multiple-areas' | 'cross-domain' | 'custom-list';
  params: {
    knowledgeBaseIds?: number[];
    knowledgeAreaIds?: number[];
    customListId?: number;
    includeShared?: boolean;
  };
}

// æ–°çš„æŸ¥è¯¢ç­–ç•¥
class MultiDomainQuestionStrategy {
  async getQuestions(params: QuestionSource['params']): Promise<KnowledgePoint[]> {
    if (params.knowledgeBaseIds?.length > 0) {
      return this.getFromMultipleBases(params.knowledgeBaseIds);
    }
    if (params.customListId) {
      return this.getFromCustomList(params.customListId);
    }
    // ...å…¶ä»–ç­–ç•¥
  }
  
  private async getFromMultipleBases(baseIds: number[]): Promise<KnowledgePoint[]> {
    // æŸ¥è¯¢å±äºä»»æ„æŒ‡å®šçŸ¥è¯†åº“çš„çŸ¥è¯†ç‚¹
    const query = `
      SELECT DISTINCT kp.*
      FROM knowledge_points kp
      JOIN knowledge_point_base_relations kpbr ON kp.id = kpbr.knowledge_point_id
      WHERE kpbr.knowledge_base_id IN (${baseIds.join(',')})
    `;
    return this.executeQuery(query);
  }
}
```

### 2. API è®¾è®¡é€‚é…
```typescript
// RESTful API è®¾è®¡
interface CustomQuestionListAPI {
  // åˆ›å»ºè‡ªå®šä¹‰é¢˜ç›®åˆ—è¡¨
  POST: '/api/question-lists' {
    name: string;
    description?: string;
    knowledgePointIds: number[];
    generationConfig?: QuestionGenerationConfig;
  };
  
  // æ·»åŠ çŸ¥è¯†ç‚¹åˆ°åˆ—è¡¨ï¼ˆæ”¯æŒæ‰¹é‡ï¼‰
  POST: '/api/question-lists/{listId}/points' {
    knowledgePointIds: number[];
    sourceType?: string;
    sourceId?: number;
  };
  
  // è·¨åŸŸæŸ¥è¯¢çŸ¥è¯†ç‚¹
  GET: '/api/knowledge-points/cross-domain' {
    knowledgeBaseIds?: number[];
    knowledgeAreaIds?: number[];
    tags?: string[];
    difficulty?: [number, number];
  };
}
```

## âš¡ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. ç´¢å¼•ç­–ç•¥
- **å¤åˆç´¢å¼•**: ä¸ºå¸¸ç”¨æŸ¥è¯¢ç»„åˆåˆ›å»ºå¤åˆç´¢å¼•
- **è¦†ç›–ç´¢å¼•**: ä¸ºé¢‘ç¹æŸ¥è¯¢åˆ›å»ºè¦†ç›–ç´¢å¼•
- **JSONç´¢å¼•**: ä¸ºJSONå­—æ®µçš„å¸¸ç”¨æŸ¥è¯¢è·¯å¾„åˆ›å»ºç´¢å¼•

### 2. æŸ¥è¯¢ä¼˜åŒ–
- **åˆ†é¡µæŸ¥è¯¢**: å¤§æ•°æ®é‡æ—¶ä½¿ç”¨æ¸¸æ ‡åˆ†é¡µ
- **ç¼“å­˜ç­–ç•¥**: Redisç¼“å­˜çƒ­é—¨é¢˜ç›®åˆ—è¡¨
- **é¢„è®¡ç®—**: å®šæ—¶è®¡ç®—é¢˜ç›®åˆ—è¡¨çš„ç»Ÿè®¡ä¿¡æ¯

### 3. æ•°æ®åˆ†ç‰‡
```sql
-- æŒ‰ç”¨æˆ·IDåˆ†ç‰‡
CREATE TABLE knowledge_points_shard_1 LIKE knowledge_points;
CREATE TABLE knowledge_points_shard_2 LIKE knowledge_points;
-- åˆ†ç‰‡è·¯ç”±ï¼šuser_id % shard_count
```

---

**æ€»ç»“**: è¿™ä¸ªå¤šå¯¹å¤šå…³ç³»è®¾è®¡å®Œå…¨è§£è€¦äº†çŸ¥è¯†ç‚¹ä¸çŸ¥è¯†åº“/çŸ¥è¯†åŒºçš„ç»‘å®šå…³ç³»ï¼Œæ”¯æŒçµæ´»çš„è·¨åŸŸç»„åˆå’Œè‡ªå®šä¹‰é¢˜ç›®åˆ—è¡¨é…ç½®ã€‚é€šè¿‡å…³è”è¡¨çš„è®¾è®¡ï¼Œå®ç°äº†é«˜åº¦çµæ´»çš„æ•°æ®ç»„ç»‡æ–¹å¼ï¼ŒåŒæ—¶ä¿æŒäº†è‰¯å¥½çš„æŸ¥è¯¢æ€§èƒ½å’Œæ•°æ®ä¸€è‡´æ€§ã€‚ 