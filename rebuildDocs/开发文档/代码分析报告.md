## ğŸ“Š **js/app.js åˆ†ææŠ¥å‘Š**

---

### ğŸ“ˆ **åŸºæœ¬ä¿¡æ¯**

- **ä»£ç è¡Œæ•°**: 595è¡Œ
- **ä¸»è¦ç±»**: 1ä¸ª (`MemoryApp`)
- **ä¸»è¦å‡½æ•°**: 18ä¸ª
- **å¤æ‚åº¦è¯„ä¼°**: ä¸­ç­‰
- **æ¶æ„æ¨¡å¼**: é¢å‘å¯¹è±¡ + äº‹ä»¶é©±åŠ¨

---

### ğŸ—ï¸ **æ–‡ä»¶æ•´ä½“ç»“æ„**

#### **1. æ ¸å¿ƒæ¶æ„**
```
MemoryAppç±» (ä¸»åº”ç”¨æ§åˆ¶å™¨)
â”œâ”€â”€ æ„é€ å‡½æ•°å’Œåˆå§‹åŒ–
â”œâ”€â”€ äº‹ä»¶ç»‘å®šç³»ç»Ÿ
â”œâ”€â”€ é¡µé¢å¯¼èˆªå’Œè·¯ç”±
â”œâ”€â”€ æ•°æ®åŠ è½½å’Œç®¡ç†
â”œâ”€â”€ UIäº¤äº’å¤„ç†
â”œâ”€â”€ å·¥å…·å‡½æ•°
â””â”€â”€ å…¨å±€å‡½æ•°å®šä¹‰
```

#### **2. èŒè´£åˆ†å¸ƒ**
- **å¯¼èˆªæ§åˆ¶**: 40% (é¡µé¢åˆ‡æ¢ã€sectionç®¡ç†)
- **äº‹ä»¶å¤„ç†**: 25% (ç‚¹å‡»ã€è¡¨å•ã€æ¨¡æ€æ¡†)
- **æ•°æ®æ¥å£**: 20% (ç»Ÿè®¡ã€ä»ªè¡¨æ¿ã€å­˜å‚¨äº¤äº’)
- **UIå·¥å…·**: 15% (é€šçŸ¥ã€ç¡®è®¤æ¡†ã€æ ¼å¼åŒ–)

---

### ğŸ”§ **ä¸»è¦å‡½æ•°/æ–¹æ³•è¯¦ç»†åˆ—è¡¨**

#### **æ ¸å¿ƒä¸šåŠ¡å‡½æ•° (8ä¸ª)**
1. `constructor()` - åº”ç”¨åˆå§‹åŒ–å…¥å£
2. `init()` - åº”ç”¨å¯åŠ¨å’Œä¾èµ–æ£€æŸ¥
3. `switchSection(sectionName)` - é¡µé¢å¯¼èˆªæ ¸å¿ƒ
4. `loadSectionData(sectionId)` - æ•°æ®è·¯ç”±åˆ†å‘
5. `loadDashboard()` - ä»ªè¡¨æ¿æ•°æ®åŠ è½½
6. `getDashboardStats()` - ç»Ÿè®¡æ•°æ®è®¡ç®—
7. `handleFormSubmit()` - çŸ¥è¯†ç‚¹è¡¨å•å¤„ç†
8. `clearAllData()` - æ•°æ®æ¸…ç©ºåŠŸèƒ½

#### **äº‹ä»¶å¤„ç†å‡½æ•° (4ä¸ª)**
9. `bindEvents()` - å…¨å±€äº‹ä»¶ç»‘å®š
10. `bindModalEvents()` - æ¨¡æ€æ¡†äº‹ä»¶ç³»ç»Ÿ
11. `handleQuickAction(action)` - å¿«é€Ÿæ“ä½œå¤„ç†
12. `openAddKnowledgeModal()` - æ·»åŠ çŸ¥è¯†ç‚¹ç•Œé¢

#### **UIäº¤äº’å‡½æ•° (4ä¸ª)**
13. `closeModal()` - æ¨¡æ€æ¡†å…³é—­
14. `showNotification(message, type)` - é€šçŸ¥ç³»ç»Ÿ
15. `showConfirm(message, onConfirm, onCancel)` - ç¡®è®¤å¯¹è¯æ¡†
16. `updateKnowledgeBasesInfo()` - çŸ¥è¯†åº“ä¿¡æ¯æ›´æ–°

#### **å·¥å…·å‡½æ•° (2ä¸ª)**
17. `formatDate(date)` / `formatTime(date)` - æ—¶é—´æ ¼å¼åŒ–
18. `generateId()` - IDç”Ÿæˆå™¨

---

### ğŸ”— **ä¸å…¶ä»–æ¨¡å—çš„ä¾èµ–å…³ç³»**

#### **å¼ºä¾èµ–æ¨¡å— (å¿…é¡»å­˜åœ¨)**
```javascript
window.storageManager     // æ•°æ®å­˜å‚¨æ ¸å¿ƒä¾èµ–
â”œâ”€â”€ getAllKnowledgeBases()
â”œâ”€â”€ getAllKnowledge()
â”œâ”€â”€ getMistakes()
â”œâ”€â”€ addKnowledge()
â”œâ”€â”€ updateKnowledge()
â””â”€â”€ getKnowledgeByBaseId()
```

#### **åŠŸèƒ½æ¨¡å—ä¾èµ– (æ¡ä»¶ä¾èµ–)**
```javascript
window.knowledgeManager   // çŸ¥è¯†ç®¡ç†æ¨¡å—
â”œâ”€â”€ loadKnowledgeBase()
â”œâ”€â”€ loadKnowledgePoints()
â””â”€â”€ refresh()

window.reviewManager      // å¤ä¹ æ¨¡å—
â”œâ”€â”€ initReview()
â”œâ”€â”€ showReviewCard()
â”œâ”€â”€ loadCurrentKnowledge()
â””â”€â”€ loadMistakes()

window.statisticsManager  // ç»Ÿè®¡æ¨¡å—
â””â”€â”€ loadStatistics()
```

#### **DOMä¾èµ– (HTMLç»“æ„)**
```html
<!-- å¯¼èˆªç³»ç»Ÿ -->
.nav-link[data-section]
.content-section#dashboard
.content-section#knowledge
.content-section#review
.content-section#mistakes  
.content-section#statistics

<!-- æ¨¡æ€æ¡†ç³»ç»Ÿ -->
#knowledge-modal
#knowledge-form
#close-modal, #cancel-btn, #save-btn

<!-- ä»ªè¡¨æ¿å…ƒç´  -->
#total-knowledge, #today-review
#mastered-count, #mistakes-count
#knowledge-bases-info
```

---

### ğŸ¯ **æ¶æ„ç‰¹ç‚¹**

#### **1. ä¸­å¤®æ§åˆ¶å™¨æ¨¡å¼**
- `MemoryApp` ä½œä¸ºåº”ç”¨çš„æ€»è°ƒåº¦ä¸­å¿ƒ
- è´Ÿè´£åè°ƒå„ä¸ªåŠŸèƒ½æ¨¡å—çš„åŠ è½½å’Œäº¤äº’
- ç®¡ç†å…¨å±€çŠ¶æ€å’Œé¡µé¢å¯¼èˆª

#### **2. äº‹ä»¶é©±åŠ¨æ¶æ„**
- å®Œæ•´çš„äº‹ä»¶ç»‘å®šç³»ç»Ÿ
- æ”¯æŒé”®ç›˜ã€é¼ æ ‡ã€è¡¨å•å¤šç§äº¤äº’
- æ¨¡æ€æ¡†å’Œé€šçŸ¥çš„ç»Ÿä¸€ç®¡ç†

#### **3. æ¨¡å—åŒ–ä¾èµ–æ³¨å…¥**
- é€šè¿‡ `window` å¯¹è±¡è¿›è¡Œæ¨¡å—é—´é€šä¿¡
- ä¾èµ–æ£€æŸ¥æœºåˆ¶ (`checkDependencies`)
- å¼‚æ­¥æ¨¡å—åŠ è½½æ”¯æŒ

#### **4. æ•°æ®æµå‘**
```
ç”¨æˆ·äº¤äº’ â†’ MemoryAppäº‹ä»¶å¤„ç† â†’ storageManageræ•°æ®æ“ä½œ â†’ UIæ›´æ–°
         â†—                    â†—
  DOMäº‹ä»¶ç³»ç»Ÿ            å„åŠŸèƒ½æ¨¡å—Manager
```

---

### ğŸ“‹ **å…³é”®è§‚å¯Ÿç‚¹**

#### **1. åˆå§‹åŒ–æµç¨‹**
- ä¾èµ–å»¶è¿ŸåŠ è½½æœºåˆ¶ (100msè½®è¯¢æ£€æŸ¥)
- URLå‚æ•°å¤„ç† (`?reset=true`)
- ä¼˜é›…çš„é”™è¯¯å¤„ç†å’Œæ§åˆ¶å°æ—¥å¿—

#### **2. çŠ¶æ€ç®¡ç†**
- `currentSection` è·Ÿè¸ªå½“å‰é¡µé¢
- è¡¨å•çŠ¶æ€é€šè¿‡ `data-edit-id` å±æ€§ç®¡ç†
- å¤ä¹ ä¼šè¯çŠ¶æ€æ£€æŸ¥é€»è¾‘

#### **3. ç”¨æˆ·ä½“éªŒ**
- é”®ç›˜æ”¯æŒ (ESCå…³é—­æ¨¡æ€æ¡†)
- è‡ªåŠ¨èšç„¦å’Œè¡¨å•éªŒè¯
- ä¸°å¯Œçš„ç”¨æˆ·åé¦ˆ (é€šçŸ¥ã€ç¡®è®¤æ¡†)

## ğŸ“Š **js/review.js åˆ†ææŠ¥å‘Š**

---

### ğŸ“ˆ **åŸºæœ¬ä¿¡æ¯**
- **ä»£ç è¡Œæ•°**: 2099è¡Œ (å·¨å‹æ–‡ä»¶ï¼)
- **ä¸»è¦ç±»**: 1ä¸ª (`ReviewManager`)
- **ä¸»è¦å‡½æ•°**: 70+ ä¸ª
- **å¤æ‚åº¦è¯„ä¼°**: æé«˜
- **æ¶æ„æ¨¡å¼**: é¢å‘å¯¹è±¡ + äº‹ä»¶é©±åŠ¨ + çŠ¶æ€æœº

---

### ğŸ—ï¸ **æ–‡ä»¶æ•´ä½“ç»“æ„**

#### **1. æ ¸å¿ƒæ¶æ„åˆ†å±‚**
```
ReviewManagerç±» (å¤ä¹ ç³»ç»Ÿæ ¸å¿ƒ)
â”œâ”€â”€ åˆå§‹åŒ–å’Œäº‹ä»¶ç³»ç»Ÿ (150è¡Œ)
â”œâ”€â”€ å¤ä¹ æ¨¡å¼å’Œé…ç½® (400è¡Œ)  
â”œâ”€â”€ SM-2ç®—æ³•æ ¸å¿ƒ (200è¡Œ)
â”œâ”€â”€ é¢˜ç›®æ¸²æŸ“ç³»ç»Ÿ (600è¡Œ)
â”œâ”€â”€ é”™é¢˜ç®¡ç†ç³»ç»Ÿ (500è¡Œ)
â”œâ”€â”€ çŠ¶æ€å’Œä¼šè¯ç®¡ç† (249è¡Œ)
â””â”€â”€ å·¥å…·å’Œç»Ÿè®¡å‡½æ•° (200è¡Œ)
```

#### **2. èŒè´£åˆ†å¸ƒæ¯”ä¾‹**
- **å¤ä¹ ç®—æ³•å’Œé€»è¾‘**: 35% (SM-2ã€è¯„åˆ†ã€è¿›åº¦)
- **UIæ¸²æŸ“å’Œäº¤äº’**: 30% (é¢˜ç›®æ˜¾ç¤ºã€ç­”æ¡ˆå¤„ç†)
- **é”™é¢˜ç®¡ç†**: 20% (é”™è¯¯è®°å½•ã€ç»Ÿè®¡åˆ†æ)
- **çŠ¶æ€å’Œä¼šè¯ç®¡ç†**: 15% (æ¨¡å¼åˆ‡æ¢ã€æ•°æ®åŒæ­¥)

---

### ğŸ”§ **æ ¸å¿ƒåŠŸèƒ½æ¨¡å—è¯¦ç»†åˆ†æ**

#### **ğŸ§  SM-2ç®—æ³•å®ç°æ ¸å¿ƒ **
```javascript
å…³é”®å‡½æ•°ï¼š
1. calculateNextReview(easeFactor, interval, quality)  - SM-2ç®—æ³•æ ¸å¿ƒ
2. updateKnowledgeReviewData(knowledgeId, rating, isCorrect) - æ•°æ®æ›´æ–°
3. submitRating(rating) - è¯„åˆ†æäº¤å¤„ç†
4. autoRateChoice(isCorrect) - é€‰æ‹©é¢˜è‡ªåŠ¨è¯„åˆ†
```

**ç®—æ³•ç‰¹ç‚¹**:
- **æ”¹è¿›ç‰ˆSM-2**: é’ˆå¯¹é”™è¯¯ã€æ¨¡ç³Šã€æ­£ç¡®ä¸‰ç§æƒ…å†µä¼˜åŒ–
- **åŠ¨æ€é—´éš”è°ƒæ•´**: é”™è¯¯6å°æ—¶å¤ä¹ ï¼Œæ­£ç¡®æŒ‰æŒ‡æ•°å¢é•¿
- **ç†Ÿæ‚‰å› å­èŒƒå›´**: 1.3-3.0ï¼Œæœ‰æ˜ç¡®çš„å¥–æƒ©æœºåˆ¶
- å±äºé«˜çº§åŠŸèƒ½,å»ºè®®åœ¨ä¼˜åŒ–é˜¶æ®µå†è¿›è¡Œå¼€å‘

#### **ğŸ¯ å¤ä¹ æ¨¡å¼ç³»ç»Ÿ (8ç§æ¨¡å¼)**
```javascript
ä¸»è¦å¤ä¹ æ¨¡å¼ï¼š
1. startReview(mode) - ä¼ ç»Ÿæ¨¡å¼ (scheduled/random/category)
2. reviewKnowledgeBase(baseId) - çŸ¥è¯†åº“å¤ä¹ 
3. reviewKnowledgeArea(areaId) - çŸ¥è¯†åŒºå¤ä¹   
4. smartReview() - æ™ºèƒ½å¤ä¹ 
5. reviewAllMistakes() - å…¨éƒ¨é”™é¢˜å¤ä¹ 
6. reviewMistakesByArea(areaId) - åˆ†åŒºé”™é¢˜å¤ä¹ 
7. reviewWeakness() - è–„å¼±ç‚¹å¤ä¹ 
8. customReview(config) - è‡ªå®šä¹‰å¤ä¹ 
```

#### **ğŸ“ é¢˜ç›®æ¸²æŸ“ç³»ç»Ÿ**
```javascript
æ ¸å¿ƒæ¸²æŸ“å‡½æ•°ï¼š
1. renderCurrentQuestion() - ä¸»æ¸²æŸ“å…¥å£
2. renderChoiceQuestion() - é€‰æ‹©é¢˜æ¸²æŸ“
3. renderFillQuestion() - å¡«ç©ºé¢˜æ¸²æŸ“
4. formatContent(content) - å†…å®¹æ ¼å¼åŒ–
5. bindChoiceEvents() - é€‰æ‹©é¢˜äº‹ä»¶ç»‘å®š
```

**æ¸²æŸ“ç‰¹ç‚¹**:
- **å¤šé¢˜å‹æ”¯æŒ**: é€‰æ‹©é¢˜ã€å¡«ç©ºé¢˜ã€ä¸»è§‚é¢˜
- **è‡ªé€‚åº”é«˜åº¦**: æ–‡æœ¬åŒºåŸŸåŠ¨æ€è°ƒæ•´
- **é”®ç›˜å¯¼èˆª**: å·¦å³é”®åˆ‡é¢˜ï¼ŒCtrl+Enteræ˜¾ç¤ºç­”æ¡ˆ

#### **âŒ é”™é¢˜ç®¡ç†ç³»ç»Ÿ**
```javascript
é”™é¢˜åŠŸèƒ½å®Œæ•´é“¾è·¯ï¼š
1. loadMistakes() - é”™é¢˜æ¦‚è§ˆåŠ è½½
2. groupMistakesByArea() - æŒ‰åŒºåŸŸåˆ†ç»„
3. renderMistakeCard() - é”™é¢˜å¡ç‰‡æ¸²æŸ“
4. reviewMistake(id) - å•ä¸ªé”™é¢˜å¤ä¹ 
5. resolveMistake(id) - æ ‡è®°å·²æŒæ¡
6. clearResolvedMistakes() - æ¸…ç†å·²æŒæ¡
```

---

### ğŸ”— **ä¾èµ–å…³ç³»åˆ†æ**

#### **å¼ºä¾èµ–æ¨¡å— (å¿…é¡»å­˜åœ¨)**
```javascript
window.storageManager - æ•°æ®å­˜å‚¨ä¾èµ–
â”œâ”€â”€ getKnowledgeById()
â”œâ”€â”€ updateKnowledge()  
â”œâ”€â”€ getMistakes()
â”œâ”€â”€ getAllKnowledge()
â”œâ”€â”€ resolveMistake()
â””â”€â”€ deleteMistake()

window.questionListGenerator - é¢˜ç›®ç”Ÿæˆå™¨(æ–°æ¶æ„)
â”œâ”€â”€ generateQuestionList()
â”œâ”€â”€ strategies/filters/sorters/limiters
â””â”€â”€ QuestionListTemplates

window.Utils - å·¥å…·å‡½æ•°ä¾èµ–
â”œâ”€â”€ shuffleArray()
â”œâ”€â”€ formatDate()
â”œâ”€â”€ escapeHtml()
â””â”€â”€ percentage()
```

#### **UI DOMå¼ºè€¦åˆ**
```html
å¤ä¹ ç•Œé¢å¿…éœ€å…ƒç´ ï¼š
- #review-modes, #review-card (ä¸»è¦å®¹å™¨)
- #question-text, #answer-text (å†…å®¹æ˜¾ç¤º)  
- #show-answer-btn, [data-rating] (äº¤äº’æŒ‰é’®)
- #review-progress, #progress-text (è¿›åº¦æ˜¾ç¤º)
- #user-answer-input, #review-note-input (è¾“å…¥åŒºåŸŸ)
- é€‰æ‹©é¢˜: .choice-option, .choice-label
- é”™é¢˜: .mistake-card, .mistake-count
```

---

### âš ï¸ **é‡å¤§æŠ€æœ¯å€ºåŠ¡è¯†åˆ«**

#### **1. å·¨å‹å•ä½“é—®é¢˜**
- **2099è¡Œå•æ–‡ä»¶**: ä¸¥é‡è¿åå•ä¸€èŒè´£åŸåˆ™
- **70+å‡½æ•°**: å‡½æ•°è¿‡å¤šï¼Œç»´æŠ¤å›°éš¾
- **çŠ¶æ€ç®¡ç†æ··ä¹±**: å¤šç§æ¨¡å¼çŠ¶æ€äº¤å‰è€¦åˆ

#### **2. ä»£ç å¼‚å‘³ç‚¹**
```javascript
é—®é¢˜ä»£ç ç¤ºä¾‹ï¼š
1. å¤§é‡é‡å¤çš„DOMæ“ä½œä»£ç 
2. äº‹ä»¶ç»‘å®š/è§£ç»‘é€»è¾‘å¤æ‚ä¸”é‡å¤  
3. æ¨¡å¼åˆ¤æ–­åˆ†æ”¯è¿‡å¤š(if/switchåµŒå¥—)
4. å…¨å±€çŠ¶æ€å˜é‡è¿‡å¤š(currentReviewListç­‰)
5. é”™è¯¯å¤„ç†ä¸ç»Ÿä¸€
```

#### **3. æ€§èƒ½é£é™©ç‚¹**
- **äº‹ä»¶ç›‘å¬å™¨æ³„æ¼**: é¢‘ç¹ç»‘å®š/è§£ç»‘ä½†å¯èƒ½é—æ¼
- **DOMæŸ¥è¯¢é‡å¤**: åŒæ ·å…ƒç´ å¤šæ¬¡querySelector
- **å†…å­˜å ç”¨**: å¤§é‡å¤ä¹ æ•°æ®å¸¸é©»å†…å­˜

---

### ğŸ¯ **Vueé‡æ„å…³é”®å†³ç­–ç‚¹**

#### **ç»„ä»¶æ‹†åˆ†å»ºè®® (ä¼˜å…ˆçº§æ’åº)**

##### **ğŸ”´ é«˜ä¼˜å…ˆçº§ç»„ä»¶ (æ ¸å¿ƒç®—æ³•)**
```
ReviewCore.vue - SM-2ç®—æ³•å’Œè¯„åˆ†é€»è¾‘
ReviewProgress.vue - è¿›åº¦ç®¡ç†å’Œæ˜¾ç¤º
QuestionRenderer.vue - é¢˜ç›®æ¸²æŸ“å¼•æ“
```

##### **ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ç»„ä»¶ (UIäº¤äº’)**  
```
ReviewCard.vue - å¤ä¹ å¡ç‰‡å®¹å™¨
ChoiceQuestion.vue - é€‰æ‹©é¢˜ç»„ä»¶
FillQuestion.vue - å¡«ç©ºé¢˜ç»„ä»¶
ReviewNavigation.vue - å¯¼èˆªæŒ‰é’®ç»„ä»¶
```

##### **ğŸŸ¢ ä½ä¼˜å…ˆçº§ç»„ä»¶ (è¾…åŠ©åŠŸèƒ½)**
```
MistakeManager.vue - é”™é¢˜ç®¡ç†
ReviewStats.vue - ç»Ÿè®¡æ˜¾ç¤º  
ReviewNotes.vue - ç¬”è®°åŠŸèƒ½
```

#### **çŠ¶æ€ç®¡ç†è®¾è®¡ (Pinia)**
```typescript
// å¤ä¹ çŠ¶æ€Storeè®¾è®¡
interface ReviewState {
  currentSession: ReviewSession | null
  reviewModes: ReviewMode[]
  mistakes: MistakeRecord[]
  stats: ReviewStats
}

interface ReviewSession {
  mode: string
  questionList: Question[]
  currentIndex: number
  startTime: number
  config: ReviewConfig
}
```

---

### ğŸ’¡ **é‡æ„å®æ–½å»ºè®®**

#### **é˜¶æ®µ1: ç»„ä»¶åŒ–æ‹†åˆ†**  
1. **å¤ä¹ å¡ç‰‡ç»„ä»¶åŒ–** â†’ å•ä¸€èŒè´£
2. **é¢˜ç›®æ¸²æŸ“åˆ†ç¦»** â†’ æŒ‰é¢˜å‹æ‹†åˆ†
3. **äº‹ä»¶ç³»ç»Ÿé‡æ„** â†’ Vueäº‹ä»¶æ€»çº¿

#### **é˜¶æ®µ2 æ€§èƒ½ä¼˜åŒ–**
1. **æ‡’åŠ è½½ç­–ç•¥** â†’ é¢˜ç›®æŒ‰éœ€æ¸²æŸ“
2. **å†…å­˜ç®¡ç†** â†’ åŠæ—¶æ¸…ç†å¼•ç”¨
3. **DOMä¼˜åŒ–** â†’ è™šæ‹Ÿæ»šåŠ¨(å¦‚æœéœ€è¦)



## ğŸ“Š **js/knowledge.js åˆ†ææŠ¥å‘Š**

---

### ğŸ“ˆ **åŸºæœ¬ä¿¡æ¯**
- **ä»£ç è¡Œæ•°**: 1900è¡Œ (å·¨å‹æ–‡ä»¶ï¼)
- **ä¸»è¦ç±»**: 1ä¸ª (`KnowledgeManager`)
- **ä¸»è¦å‡½æ•°**: 50+ ä¸ª
- **å¤æ‚åº¦è¯„ä¼°**: æé«˜
- **æ¶æ„æ¨¡å¼**: ä¸‰çº§å±‚æ¬¡ç»“æ„ + MVCæ¨¡å¼

---

### ğŸ—ï¸ **æ–‡ä»¶æ•´ä½“ç»“æ„**

#### **1. ä¸‰çº§å±‚æ¬¡æ¶æ„**
```
çŸ¥è¯†åº“(KnowledgeBase) 
â”œâ”€â”€ çŸ¥è¯†åŒº(KnowledgeArea) 
    â”œâ”€â”€ çŸ¥è¯†ç‚¹(KnowledgePoint)
    â”œâ”€â”€ çŸ¥è¯†ç‚¹(KnowledgePoint)
    â””â”€â”€ ...
â”œâ”€â”€ çŸ¥è¯†åŒº(KnowledgeArea)
â””â”€â”€ ...
```

#### **2. æ ¸å¿ƒæ¨¡å—åˆ†å±‚**
```
KnowledgeManagerç±» (çŸ¥è¯†ç®¡ç†æ ¸å¿ƒ)
â”œâ”€â”€ è§†å›¾çŠ¶æ€ç®¡ç† (300è¡Œ) - ä¸‰çº§è§†å›¾åˆ‡æ¢
â”œâ”€â”€ çŸ¥è¯†åº“CRUD (400è¡Œ) - åˆ›å»º/ç¼–è¾‘/åˆ é™¤çŸ¥è¯†åº“  
â”œâ”€â”€ çŸ¥è¯†åŒºCRUD (300è¡Œ) - åˆ›å»º/ç¼–è¾‘/åˆ é™¤çŸ¥è¯†åŒº
â”œâ”€â”€ çŸ¥è¯†ç‚¹CRUD (600è¡Œ) - å¤æ‚è¡¨å•å’Œå¤šé¢˜å‹æ”¯æŒ
â”œâ”€â”€ æœç´¢å’Œç­›é€‰ (100è¡Œ) - å®æ—¶æœç´¢å’Œæ ‡ç­¾ç­›é€‰
â”œâ”€â”€ å¯¼å…¥å¯¼å‡º (100è¡Œ) - JSONæ ¼å¼æ•°æ®äº¤æ¢
â””â”€â”€ UIäº¤äº’ç®¡ç† (100è¡Œ) - æ¨¡æ€æ¡†ã€é¢„è§ˆã€éªŒè¯
```

#### **3. èŒè´£åˆ†å¸ƒæ¯”ä¾‹**
- **çŸ¥è¯†ç‚¹ç®¡ç†**: 40% (è¡¨å•å¤„ç†ã€éªŒè¯ã€å¤šé¢˜å‹)
- **è§†å›¾å’Œå¯¼èˆª**: 25% (ä¸‰çº§è§†å›¾åˆ‡æ¢ã€çŠ¶æ€ç®¡ç†)
- **çŸ¥è¯†åº“/çŸ¥è¯†åŒºç®¡ç†**: 20% (å±‚çº§ç»“æ„ç»´æŠ¤)
- **å·¥å…·åŠŸèƒ½**: 15% (æœç´¢ã€å¯¼å…¥å¯¼å‡ºã€ç»Ÿè®¡)

---

### ğŸ”§ **æ ¸å¿ƒåŠŸèƒ½æ¨¡å—è¯¦ç»†åˆ†æ**

#### **ğŸ—‚ï¸ ä¸‰çº§æ•°æ®æ¨¡å‹ç»“æ„**

##### **çŸ¥è¯†åº“ (KnowledgeBase) æ•°æ®æ¨¡å‹**
```javascript
KnowledgeBase = {
  id: 'kb_timestamp',
  name: string,          // çŸ¥è¯†åº“åç§°
  description: string,   // æè¿°
  icon: string,         // å›¾æ ‡ (emoji)
  color: string,        // ä¸»é¢˜è‰² (hex)
  areas: Area[]         // çŸ¥è¯†åŒºæ•°ç»„
}
```

##### **çŸ¥è¯†åŒº (Area) æ•°æ®æ¨¡å‹**  
```javascript
Area = {
  id: 'area_timestamp_n',
  name: string,            // çŸ¥è¯†åŒºåç§°
  description: string,     // æè¿°
  color: string,          // ä¸»é¢˜è‰²
  knowledgePoints: []     // çŸ¥è¯†ç‚¹æ•°ç»„ (å®é™…æ•°æ®åœ¨storageä¸­ç‹¬ç«‹å­˜å‚¨)
}
```

##### **çŸ¥è¯†ç‚¹ (KnowledgePoint) æ•°æ®æ¨¡å‹**
```javascript
KnowledgePoint = {
  // åŸºç¡€ä¿¡æ¯
  id: 'knowledge_timestamp_random',
  question: string,        // é¢˜ç›®å†…å®¹
  type: 'fill'|'choice',   // é¢˜ç›®ç±»å‹
  
  // å¡«ç©ºé¢˜å­—æ®µ
  answer: string,          // ç­”æ¡ˆ (å¡«ç©ºé¢˜)
  
  // é€‰æ‹©é¢˜å­—æ®µ  
  options: Option[],       // é€‰é¡¹æ•°ç»„ (é€‰æ‹©é¢˜)
  correctAnswer: string,   // æ­£ç¡®ç­”æ¡ˆ (é€‰æ‹©é¢˜)
  choiceType: 'single'|'multiple', // å•é€‰/å¤šé€‰
  
  // è¾…åŠ©ä¿¡æ¯
  explanation: string,     // è§£æ
  note: string,           // ç¬”è®°
  category: string,       // åˆ†ç±»
  difficulty: number,     // éš¾åº¦ 1-5
  tags: string[],         // æ ‡ç­¾æ•°ç»„
  
  // å…³è”ä¿¡æ¯
  knowledgeBaseId: string, // æ‰€å±çŸ¥è¯†åº“ID
  areaId: string,         // æ‰€å±çŸ¥è¯†åŒºID
  
  // å¤ä¹ ç®—æ³•å­—æ®µ (ä¸SM-2ç®—æ³•é…åˆ)
  reviewCount: number,    // å¤ä¹ æ¬¡æ•°
  correctCount: number,   // æ­£ç¡®æ¬¡æ•°
  lastReviewed: timestamp,// æœ€åå¤ä¹ æ—¶é—´
  nextReview: timestamp,  // ä¸‹æ¬¡å¤ä¹ æ—¶é—´
  interval: number,       // å¤ä¹ é—´éš”(å¤©)
  easeFactor: number,     // ç†Ÿæ‚‰å› å­
  
  // æ—¶é—´æˆ³
  createdAt: timestamp,   // åˆ›å»ºæ—¶é—´
  updatedAt: timestamp    // æ›´æ–°æ—¶é—´
}
```

#### **ğŸ¯ æ ¸å¿ƒCRUDæ“ä½œé“¾è·¯**

##### **çŸ¥è¯†åº“CRUD (æœ€ç¨³å®š)**
```javascript
æ ¸å¿ƒå‡½æ•°ï¼š
1. renderKnowledgeBases() - çŸ¥è¯†åº“åˆ—è¡¨æ¸²æŸ“
2. handleCreateKnowledgeBase() - åˆ›å»º/ç¼–è¾‘çŸ¥è¯†åº“
3. editKnowledgeBase(id) - ç¼–è¾‘çŸ¥è¯†åº“
4. deleteKnowledgeBase(id) - åˆ é™¤çŸ¥è¯†åº“
5. createSampleAreas() - åˆ›å»ºç¤ºä¾‹çŸ¥è¯†åŒº

ç‰¹ç‚¹ï¼š
- è¡¨å•éªŒè¯å®Œå–„
- å®æ—¶é¢„è§ˆåŠŸèƒ½
- å›¾æ ‡å’Œé¢œè‰²å¯è§†åŒ–é€‰æ‹©
- æ”¯æŒåˆ›å»ºç¤ºä¾‹æ•°æ®
```

##### **çŸ¥è¯†ç‚¹CRUD (æœ€å¤æ‚)**
```javascript
æ ¸å¿ƒå‡½æ•°ï¼š
1. handleSaveKnowledgePoint() - ä¿å­˜çŸ¥è¯†ç‚¹ (ç¼–è¾‘/æ–°å¢)
2. validateKnowledgePointForm() - è¡¨å•éªŒè¯
3. collectKnowledgePointData() - æ•°æ®æ”¶é›†
4. handleQuestionTypeChange() - é¢˜å‹åˆ‡æ¢
5. getChoiceOptions() / getCorrectAnswers() - é€‰æ‹©é¢˜å¤„ç†

å¤æ‚åº¦åˆ†æï¼š
- æ”¯æŒå¡«ç©ºé¢˜å’Œé€‰æ‹©é¢˜ä¸¤ç§ç±»å‹
- é€‰æ‹©é¢˜æ”¯æŒå•é€‰/å¤šé€‰
- åŠ¨æ€è¡¨å•å­—æ®µ (é¢˜å‹åˆ‡æ¢æ—¶UIé‡æ„)
- å¤æ‚çš„éªŒè¯é€»è¾‘
- ä¸SM-2ç®—æ³•æ•°æ®å­—æ®µå…¼å®¹
```

#### **ğŸ” æœç´¢å’Œç­›é€‰ç³»ç»Ÿ**
```javascript
æœç´¢åŠŸèƒ½ï¼š
1. handleSearch(query) - å®æ—¶æœç´¢
   - æœç´¢èŒƒå›´ï¼šé¢˜ç›®ã€ç­”æ¡ˆã€æ ‡ç­¾
   - ä¸åŒºåˆ†å¤§å°å†™
   - å®æ—¶è¿‡æ»¤ç»“æœ

ç­›é€‰åŠŸèƒ½ï¼š
2. handleFilter() - æ ‡ç­¾ç­›é€‰
3. updateTagFilter() - åŠ¨æ€æ ‡ç­¾é€‰é¡¹
4. æ”¯æŒç»„åˆæœç´¢ï¼šæœç´¢ + æ ‡ç­¾ç­›é€‰

ç‰¹ç‚¹ï¼š
- å®æ—¶å“åº”
- å¤šå­—æ®µæœç´¢
- åŠ¨æ€æ ‡ç­¾æå–
```

#### **ğŸ“¥ğŸ“¤ å¯¼å…¥å¯¼å‡ºç³»ç»Ÿ**
```javascript
å¯¼å…¥åŠŸèƒ½ï¼š
1. handleImport() - æ–‡ä»¶é€‰æ‹©å’Œè§£æ
2. readFileAsText() - æ–‡ä»¶è¯»å–
3. JSONæ ¼å¼éªŒè¯å’Œæ•°æ®å¯¼å…¥

å¯¼å‡ºåŠŸèƒ½ï¼š
4. handleExport() - æ•°æ®å¯¼å‡º
5. è‡ªåŠ¨ç”Ÿæˆæ–‡ä»¶å (å¸¦æ—¶é—´æˆ³)
6. å®Œæ•´æ•°æ®å¤‡ä»½

æ•°æ®æ ¼å¼ï¼š
- æ ‡å‡†JSONæ ¼å¼
- åŒ…å«å®Œæ•´çš„çŸ¥è¯†åº“ç»“æ„
- å…¼å®¹æ€§éªŒè¯
```

---

### ğŸ”— **ä¾èµ–å…³ç³»åˆ†æ**

#### **å¼ºä¾èµ–æ¨¡å— (å…³é”®é›†æˆç‚¹)**
```javascript
window.storageManager - æ•°æ®æŒä¹…åŒ–ä¾èµ–
â”œâ”€â”€ getAllKnowledgeBases()
â”œâ”€â”€ getKnowledgeBaseById()
â”œâ”€â”€ addKnowledgeBase()
â”œâ”€â”€ updateKnowledgeBase()
â”œâ”€â”€ getAllKnowledge()
â”œâ”€â”€ addKnowledge()
â”œâ”€â”€ updateKnowledge()
â”œâ”€â”€ importData()
â””â”€â”€ getData()

window.reviewManager - å¤ä¹ åŠŸèƒ½é›†æˆ
â”œâ”€â”€ reviewKnowledgeBase()
â”œâ”€â”€ reviewKnowledgeArea()
â””â”€â”€ setAreaReviewMode()

window.app - ä¸»åº”ç”¨é›†æˆ
â”œâ”€â”€ showNotification()
â”œâ”€â”€ showSection()
â””â”€â”€ loadDashboard()
```

#### **DOMå¼ºè€¦åˆå…ƒç´ **
```html
çŸ¥è¯†åº“è§†å›¾ï¼š
- #knowledge-base-view, #knowledge-base-grid
- #create-knowledge-base-modal
- .icon-option, .color-option (å›¾æ ‡é¢œè‰²é€‰æ‹©)

çŸ¥è¯†åŒºè§†å›¾ï¼š
- #knowledge-area-view
- #current-base-title
- #add-knowledge-area-btn

çŸ¥è¯†ç‚¹è§†å›¾ï¼š
- #knowledge-points-view  
- #current-area-title
- #search-input, #tag-filter
- #knowledge-form (å¤æ‚è¡¨å•)
- #question-type (é¢˜å‹åˆ‡æ¢)
- .choice-options-container (é€‰æ‹©é¢˜é€‰é¡¹)
```

---

### âš ï¸ **é‡å¤§æŠ€æœ¯å€ºåŠ¡è¯†åˆ«**

#### **1. å·¨å‹å•ä½“é—®é¢˜ (æœ€ä¸¥é‡)**
- **1900è¡Œå•æ–‡ä»¶**: è¿åå•ä¸€èŒè´£åŸåˆ™
- **50+ä¸ªå‡½æ•°**: ç»´æŠ¤å›°éš¾ï¼Œæµ‹è¯•å›°éš¾
- **ä¸‰çº§ä¸šåŠ¡é€»è¾‘æ··åˆ**: çŸ¥è¯†åº“/çŸ¥è¯†åŒº/çŸ¥è¯†ç‚¹é€»è¾‘äº¤ç»‡

#### **2. çŠ¶æ€ç®¡ç†æ··ä¹±**
```javascript
é—®é¢˜çŠ¶æ€å˜é‡ï¼š
- this.currentView ('base'|'area'|'points')
- this.currentBase (çŸ¥è¯†åº“å¯¹è±¡)
- this.currentArea (çŸ¥è¯†åŒºå¯¹è±¡)  
- this.filteredPoints (æœç´¢ç»“æœ)
- this.expandedPoints (å±•å¼€çŠ¶æ€)

é—®é¢˜ï¼š
- çŠ¶æ€åŒæ­¥å¤æ‚
- è§†å›¾åˆ‡æ¢æ—¶çŠ¶æ€å¯èƒ½ä¸ä¸€è‡´
- ç¼ºä¹ç»Ÿä¸€çš„çŠ¶æ€ç®¡ç†æœºåˆ¶
```

#### **3. UIé€»è¾‘å¼ºè€¦åˆ**
```javascript
é—®é¢˜ç¤ºä¾‹ï¼š
1. å¤§é‡ç›´æ¥DOMæ“ä½œ (querySelector, innerHTML)
2. äº‹ä»¶ç»‘å®šé€»è¾‘åˆ†æ•£ä¸”é‡å¤
3. è¡¨å•éªŒè¯å’ŒUIæ›´æ–°é€»è¾‘æ··åˆ
4. æ¨¡æ€æ¡†ç®¡ç†ä»£ç é‡å¤
```

#### **4. æ•°æ®ä¸€è‡´æ€§é£é™©**
```javascript
å…³é”®é£é™©ç‚¹ï¼š
1. currentBase ä¸ storageManager çŠ¶æ€ä¸åŒæ­¥
2. çŸ¥è¯†ç‚¹ä¸çŸ¥è¯†åŒºå…³è”ç»´æŠ¤å¤æ‚
3. åˆ é™¤æ“ä½œçš„çº§è”åˆ é™¤ä¸å®Œå–„
4. ç¼–è¾‘æ—¶æ•°æ®å›å¡«å¯èƒ½é—æ¼å­—æ®µ
```

---

### ğŸ¯ **Vueé‡æ„å…³é”®å†³ç­–ç‚¹**

#### **ç»„ä»¶æ‹†åˆ†å»ºè®® (æŒ‰ä¼˜å…ˆçº§)**

##### **ğŸ”´ é«˜ä¼˜å…ˆçº§ç»„ä»¶ (æ ¸å¿ƒä¸šåŠ¡)**
```
KnowledgeHierarchy.vue - ä¸‰çº§å±‚æ¬¡å¯¼èˆª
KnowledgeBaseManager.vue - çŸ¥è¯†åº“CRUD
KnowledgePointForm.vue - çŸ¥è¯†ç‚¹è¡¨å• (æœ€å¤æ‚)
QuestionTypeSelector.vue - é¢˜å‹åˆ‡æ¢ç»„ä»¶
```

##### **ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ç»„ä»¶ (åŠŸèƒ½æ¨¡å—)**
```
KnowledgeAreaManager.vue - çŸ¥è¯†åŒºç®¡ç†
KnowledgeSearch.vue - æœç´¢ç­›é€‰
KnowledgeImportExport.vue - å¯¼å…¥å¯¼å‡º
ChoiceOptionsEditor.vue - é€‰æ‹©é¢˜é€‰é¡¹ç¼–è¾‘
```

##### **ğŸŸ¢ ä½ä¼˜å…ˆçº§ç»„ä»¶ (UIå·¥å…·)**
```
KnowledgeCard.vue - çŸ¥è¯†åº“/çŸ¥è¯†åŒºå¡ç‰‡
KnowledgeStats.vue - ç»Ÿè®¡ä¿¡æ¯æ˜¾ç¤º
IconColorPicker.vue - å›¾æ ‡é¢œè‰²é€‰æ‹©å™¨
FormValidation.vue - è¡¨å•éªŒè¯ç»„ä»¶
```

#### **çŠ¶æ€ç®¡ç†è®¾è®¡ (Pinia)**
```typescript
// çŸ¥è¯†ç®¡ç†çŠ¶æ€Storeè®¾è®¡
interface KnowledgeState {
  // å±‚æ¬¡å¯¼èˆªçŠ¶æ€
  currentView: 'base' | 'area' | 'points'
  currentBase: KnowledgeBase | null
  currentArea: KnowledgeArea | null
  
  // æ•°æ®ç¼“å­˜
  knowledgeBases: KnowledgeBase[]
  currentPoints: KnowledgePoint[]
  filteredPoints: KnowledgePoint[]
  
  // UIçŠ¶æ€  
  expandedPoints: Set<string>
  searchQuery: string
  selectedTags: string[]
}

// Actionsè®¾è®¡
interface KnowledgeActions {
  // å¯¼èˆªæ“ä½œ
  showBaseView(): void
  showAreaView(baseId: string): void
  showPointsView(areaId: string): void
  
  // CRUDæ“ä½œ
  createKnowledgeBase(data: CreateKnowledgeBaseData): Promise<boolean>
  updateKnowledgeBase(id: string, data: UpdateKnowledgeBaseData): Promise<boolean>
  deleteKnowledgeBase(id: string): Promise<boolean>
  
  // çŸ¥è¯†ç‚¹æ“ä½œ
  createKnowledgePoint(data: CreateKnowledgePointData): Promise<boolean>
  updateKnowledgePoint(id: string, data: UpdateKnowledgePointData): Promise<boolean>
  
  // æœç´¢ç­›é€‰
  searchPoints(query: string): void
  filterByTags(tags: string[]): void
}
```

---

### ğŸ’¡ **é‡æ„å®æ–½å»ºè®®**

#### **é˜¶æ®µ1: æ•°æ®æ¨¡å‹å’ŒçŠ¶æ€ç®¡ç† (2å‘¨)**
1. **æå–æ•°æ®æ¨¡å‹** â†’ TypeScriptæ¥å£å®šä¹‰
2. **å®ç°Pinia Store** â†’ ç»Ÿä¸€çŠ¶æ€ç®¡ç†
3. **ä¿æŒAPIå…¼å®¹** â†’ é€‚é…å™¨æ¨¡å¼è¿‡æ¸¡

#### **é˜¶æ®µ2: æ ¸å¿ƒç»„ä»¶æ‹†åˆ† (3å‘¨)**
1. **KnowledgePointFormç»„ä»¶** â†’ æœ€å¤æ‚ï¼Œä¼˜å…ˆå¤„ç†
2. **ä¸‰çº§å¯¼èˆªç»„ä»¶** â†’ çŠ¶æ€ç®¡ç†æ ¸å¿ƒ
3. **CRUDæ“ä½œç»„ä»¶åŒ–** â†’ æŒ‰å±‚çº§æ‹†åˆ†

#### **é˜¶æ®µ3: UIå’Œäº¤äº’ä¼˜åŒ– (2å‘¨)**
1. **è¡¨å•éªŒè¯é‡æ„** â†’ ç»Ÿä¸€éªŒè¯æœºåˆ¶
2. **æœç´¢ç­›é€‰ç»„ä»¶** â†’ æ€§èƒ½ä¼˜åŒ–
3. **å¯¼å…¥å¯¼å‡ºåŠŸèƒ½** â†’ ç”¨æˆ·ä½“éªŒæå‡

---

### ğŸ“‹ **å…³é”®è§‚å¯Ÿè¦ç‚¹**

1. **ä¸‰çº§å±‚æ¬¡ç»“æ„è®¾è®¡åˆç†** - ç¬¦åˆçŸ¥è¯†ç®¡ç†çš„è®¤çŸ¥æ¨¡å‹
2. **æ•°æ®æ¨¡å‹å®Œæ•´** - æ”¯æŒå¤æ‚çš„çŸ¥è¯†ç‚¹ç±»å‹å’Œå¤ä¹ ç®—æ³•
3. **åŠŸèƒ½å®Œå¤‡** - CRUDã€æœç´¢ã€å¯¼å…¥å¯¼å‡ºä¸€åº”ä¿±å…¨
4. **UIäº¤äº’ä¸°å¯Œ** - å®æ—¶é¢„è§ˆã€åŠ¨æ€è¡¨å•ã€å¯è§†åŒ–é€‰æ‹©
5. **æŠ€æœ¯å€ºåŠ¡ä¸¥é‡** - å•æ–‡ä»¶è¿‡å¤§ï¼ŒçŠ¶æ€ç®¡ç†æ··ä¹±
6. **ä¸å¤ä¹ ç³»ç»Ÿæ·±åº¦é›†æˆ** - æ•°æ®å­—æ®µä¸SM-2ç®—æ³•é…åˆ



## ğŸ“Š **js/storage.js åˆ†ææŠ¥å‘Š**

---

### ğŸ“ˆ **åŸºæœ¬ä¿¡æ¯**
- **ä»£ç è¡Œæ•°**: 1272è¡Œ (å·¨å‹æ–‡ä»¶ï¼)
- **ä¸»è¦ç±»**: 1ä¸ª (`StorageManager`)
- **ä¸»è¦å‡½æ•°**: 60+ ä¸ª
- **å¤æ‚åº¦è¯„ä¼°**: æé«˜
- **æ¶æ„æ¨¡å¼**: æ•°æ®è®¿é—®å±‚ + ä¸‰çº§ç»“æ„æ˜ å°„ + è‡ªåŠ¨ä¿®å¤æœºåˆ¶

---

### ğŸ—ï¸ **æ–‡ä»¶æ•´ä½“ç»“æ„**

#### **1. æ ¸å¿ƒæ¶æ„è®¾è®¡**
```
StorageManager (æ•°æ®æŒä¹…åŒ–å¼•æ“)
â”œâ”€â”€ LocalStorageå°è£…å±‚ (åŸºç¡€å­˜å‚¨)
â”œâ”€â”€ ä¸‰çº§ç»“æ„æ•°æ®æ¨¡å‹ (çŸ¥è¯†åº“â†’çŸ¥è¯†åŒºâ†’çŸ¥è¯†ç‚¹)
â”œâ”€â”€ CRUDæ“ä½œæ¥å£ (å¢åˆ æ”¹æŸ¥)
â”œâ”€â”€ æ•°æ®ä¸€è‡´æ€§ä¿éšœ (éªŒè¯+è‡ªåŠ¨ä¿®å¤)
â”œâ”€â”€ å¯¼å…¥å¯¼å‡ºåŠŸèƒ½ (æ•°æ®è¿ç§»)
â””â”€â”€ ç»Ÿè®¡å’Œè®¾ç½®ç®¡ç† (è¾…åŠ©åŠŸèƒ½)
```

#### **2. æ•°æ®æ¨¡å‹æ¶æ„**
```json
memorin_data = {
  "knowledgeBases": [           // çŸ¥è¯†åº“æ•°ç»„ (ä¸»è¦æ•°æ®)
    {
      "id": "kb_timestamp",
      "name": "çŸ¥è¯†åº“åç§°",
      "areas": [                // çŸ¥è¯†åŒºæ•°ç»„
        {
          "id": "area_timestamp",
          "name": "çŸ¥è¯†åŒºåç§°",
          "knowledgePoints": []   // ç©ºæ•°ç»„ï¼Œå®é™…æ•°æ®åœ¨knowledgeä¸­
        }
      ]
    }
  ],
  "knowledge": [],              // çŸ¥è¯†ç‚¹æ•°ç»„ (æ ¸å¿ƒæ•°æ®)
  "currentKnowledgeBaseId": "", // å½“å‰çŸ¥è¯†åº“ID
  "mistakes": [],               // é”™é¢˜è®°å½•
  "reviewHistory": [],          // å¤ä¹ å†å²
  "settings": {},               // ç”¨æˆ·è®¾ç½®
  "statistics": {},             // ç»Ÿè®¡æ•°æ®
  "version": "1.0.0"            // æ•°æ®ç‰ˆæœ¬
}
```

#### **3. èŒè´£åˆ†å¸ƒæ¯”ä¾‹**
- **çŸ¥è¯†ç‚¹CRUD**: 30% (æ ¸å¿ƒä¸šåŠ¡æ•°æ®æ“ä½œ)
- **çŸ¥è¯†åº“/çŸ¥è¯†åŒºç®¡ç†**: 25% (ä¸‰çº§ç»“æ„ç»´æŠ¤)
- **æ•°æ®ä¸€è‡´æ€§ä¿éšœ**: 20% (éªŒè¯ã€ä¿®å¤ã€æ˜ å°„)
- **è¾…åŠ©åŠŸèƒ½**: 15% (é”™é¢˜ã€å¤ä¹ ã€ç»Ÿè®¡)
- **å·¥å…·æ–¹æ³•**: 10% (å¯¼å…¥å¯¼å‡ºã€IDç”Ÿæˆç­‰)

---

### ğŸ”§ **æ ¸å¿ƒåŠŸèƒ½æ¨¡å—è¯¦ç»†åˆ†æ**

#### **ğŸ—„ï¸ LocalStorageå°è£…å±‚**
```javascript
æ ¸å¿ƒå­˜å‚¨æ–¹æ³•ï¼š
1. getData() - æ•°æ®è¯»å– + JSONè§£æ + é”™è¯¯å¤„ç†
2. setData(data) - æ•°æ®ä¿å­˜ + æ—¶é—´æˆ³æ›´æ–° + å¼‚å¸¸æ•è·
3. isLocalStorageSupported() - æµè§ˆå™¨å…¼å®¹æ€§æ£€æµ‹
4. getStorageUsage() - å­˜å‚¨ç©ºé—´ä½¿ç”¨ç›‘æ§

ç‰¹ç‚¹ï¼š
- ç»Ÿä¸€çš„å­˜å‚¨å¯†é’¥ç®¡ç† ('memorin_data')
- å®Œå–„çš„å¼‚å¸¸å¤„ç†æœºåˆ¶
- è‡ªåŠ¨æ—¶é—´æˆ³æ›´æ–°
- å­˜å‚¨ç©ºé—´ç›‘æ§
```

#### **ğŸ“š ä¸‰çº§ç»“æ„æ•°æ®ç®¡ç†**

##### **çŸ¥è¯†åº“ (KnowledgeBase) å±‚**
```javascript
æ ¸å¿ƒAPIï¼š
1. getAllKnowledgeBases() - è·å–æ‰€æœ‰çŸ¥è¯†åº“
2. addKnowledgeBase(data) - æ·»åŠ çŸ¥è¯†åº“
3. updateKnowledgeBase(id, updates) - æ›´æ–°çŸ¥è¯†åº“
4. deleteKnowledgeBase(id) - åˆ é™¤çŸ¥è¯†åº“ + çº§è”åˆ é™¤
5. getCurrentKnowledgeBase() - è·å–å½“å‰çŸ¥è¯†åº“
6. setCurrentKnowledgeBase(id) - åˆ‡æ¢å½“å‰çŸ¥è¯†åº“

æ•°æ®ç»“æ„ï¼š
{
  id: string,
  name: string,
  description: string,
  icon: string (emoji),
  color: string (hex),
  areas: Area[],
  createdAt: ISO string,
  updatedAt: ISO string
}
```

##### **çŸ¥è¯†åŒº (Area) å±‚**
```javascript
æ ¸å¿ƒAPIï¼š
1. addKnowledgeArea(baseId, data) - æ·»åŠ çŸ¥è¯†åŒº
2. updateKnowledgeArea(baseId, areaId, updates) - æ›´æ–°çŸ¥è¯†åŒº
3. deleteKnowledgeArea(baseId, areaId) - åˆ é™¤çŸ¥è¯†åŒº + çº§è”åˆ é™¤
4. getKnowledgeAreasByBaseId(baseId) - è·å–çŸ¥è¯†åº“ä¸‹çš„çŸ¥è¯†åŒº
5. findKnowledgeAreaById(areaId) - å…¨å±€æŸ¥æ‰¾çŸ¥è¯†åŒº

çº§è”åˆ é™¤é€»è¾‘ï¼š
- åˆ é™¤çŸ¥è¯†åŒºæ—¶è‡ªåŠ¨åˆ é™¤å…³è”çŸ¥è¯†ç‚¹
- åˆ é™¤ç›¸å…³é”™é¢˜è®°å½•
- åˆ é™¤ç›¸å…³å¤ä¹ å†å²
```

##### **çŸ¥è¯†ç‚¹ (Knowledge) å±‚**
```javascript
æ ¸å¿ƒAPIï¼š
1. getAllKnowledge() - è·å–æ‰€æœ‰çŸ¥è¯†ç‚¹
2. addKnowledge(data) - æ·»åŠ çŸ¥è¯†ç‚¹ + å®Œæ•´æ•°æ®éªŒè¯
3. updateKnowledge(id, updates) - æ›´æ–°çŸ¥è¯†ç‚¹
4. deleteKnowledge(id) - åˆ é™¤çŸ¥è¯†ç‚¹
5. getKnowledgeByBaseId(baseId) - æŒ‰çŸ¥è¯†åº“æŸ¥è¯¢
6. getKnowledgeByAreaId(areaId) - æŒ‰çŸ¥è¯†åŒºæŸ¥è¯¢
7. searchKnowledge(query, filters) - é«˜çº§æœç´¢

æ•°æ®éªŒè¯é€»è¾‘ï¼š
- å¿…å¡«å­—æ®µéªŒè¯ (questionä¸èƒ½ä¸ºç©º)
- é¢˜å‹ç‰¹å®šéªŒè¯ (é€‰æ‹©é¢˜éœ€è¦optionså’ŒcorrectAnswer)
- æ•°æ®å®Œæ•´æ€§æ£€æŸ¥ (å…³è”IDéªŒè¯)
```

#### **ğŸ” æ•°æ®ä¸€è‡´æ€§ä¿éšœæœºåˆ¶**

##### **æ•°æ®éªŒè¯ç³»ç»Ÿ**
```javascript
æ ¸å¿ƒéªŒè¯æ–¹æ³•ï¼š
1. validateKnowledgePoint(knowledge) - çŸ¥è¯†ç‚¹æ•°æ®éªŒè¯
2. validateData(data) - æ•´ä½“æ•°æ®ç»“æ„éªŒè¯
3. validateAndFixKnowledgeMappings() - æ˜ å°„å…³ç³»éªŒè¯+ä¿®å¤

éªŒè¯è§„åˆ™ï¼š
- å¿…å¡«å­—æ®µæ£€æŸ¥
- æ•°æ®ç±»å‹éªŒè¯
- ä¸šåŠ¡é€»è¾‘ä¸€è‡´æ€§
- å¼•ç”¨å®Œæ•´æ€§éªŒè¯
```

##### **è‡ªåŠ¨ä¿®å¤æœºåˆ¶**
```javascript
ä¿®å¤èƒ½åŠ›ï¼š
1. inferKnowledgeBaseId() - æ¨æ–­çŸ¥è¯†ç‚¹çš„çŸ¥è¯†åº“å½’å±
2. inferAreaId() - æ¨æ–­çŸ¥è¯†ç‚¹çš„çŸ¥è¯†åŒºå½’å±
3. è‡ªåŠ¨ä¿®å¤ç¼ºå¤±çš„å…³è”ID
4. æ•°æ®è¿ç§»æ—¶çš„å…¼å®¹æ€§å¤„ç†

ä¿®å¤ç­–ç•¥ï¼š
- åŸºäºcategoryå­—æ®µè¿›è¡Œæ™ºèƒ½åŒ¹é…
- æ¨¡ç³ŠåŒ¹é…ç®—æ³•
- é»˜è®¤å€¼å¡«å……
- æ¸è¿›å¼æ•°æ®ä¿®å¤
```

#### **ğŸ“Š ç»Ÿè®¡å’Œå†å²ç®¡ç†**

##### **é”™é¢˜ç®¡ç†ç³»ç»Ÿ**
```javascript
é”™é¢˜è®°å½•ç»“æ„ï¼š
{
  id: string,
  knowledgeId: string,
  count: number,              // é”™è¯¯æ¬¡æ•°
  firstMistakeDate: timestamp,
  lastMistakeDate: timestamp,
  reasons: string[],          // é”™è¯¯åŸå› 
  isResolved: boolean         // æ˜¯å¦å·²è§£å†³
}

æ ¸å¿ƒåŠŸèƒ½ï¼š
1. addMistake() - é”™è¯¯æ¬¡æ•°ç´¯åŠ æœºåˆ¶
2. resolveMistake() - æ ‡è®°å·²æŒæ¡
3. deleteMistake() - åˆ é™¤é”™é¢˜è®°å½•
```

##### **å¤ä¹ å†å²ç³»ç»Ÿ**
```javascript
å¤ä¹ è®°å½•ç»“æ„ï¼š
{
  id: string,
  knowledgeId: string,
  reviewDate: timestamp,
  isCorrect: boolean,
  difficulty: number,
  timeSpent: number,
  response: string
}

åˆ†æåŠŸèƒ½ï¼š
- å¤ä¹ æ­£ç¡®ç‡ç»Ÿè®¡
- å­¦ä¹ æ—¶é—´è¿½è¸ª
- å¤ä¹ é¢‘ç‡åˆ†æ
```

---

### ğŸ”— **APIè®¾è®¡åˆ†æ**

#### **1. ç»Ÿä¸€çš„APIé£æ ¼**
```javascript
å‘½åæ¨¡å¼ï¼š
- getç³»åˆ—ï¼šgetAllXXX(), getXXXById(), getXXXByYYY()
- addç³»åˆ—ï¼šaddXXX() - è¿”å›æ–°å¯¹è±¡æˆ–null
- updateç³»åˆ—ï¼šupdateXXX() - è¿”å›boolean
- deleteç³»åˆ—ï¼šdeleteXXX() - è¿”å›boolean + çº§è”åˆ é™¤

é”™è¯¯å¤„ç†ï¼š
- ç»Ÿä¸€çš„try-catchåŒ…è£…
- è¯¦ç»†çš„console.logè°ƒè¯•ä¿¡æ¯
- æ•°æ®éªŒè¯å¤±è´¥æ—¶çš„æ˜ç¡®é”™è¯¯ä¿¡æ¯
```

#### **2. æ•°æ®æŸ¥è¯¢ä¼˜åŒ–**
```javascript
æŸ¥è¯¢æ€§èƒ½ç‰¹ç‚¹ï¼š
1. å†…å­˜ä¸­æŸ¥è¯¢ - æ‰€æœ‰æ•°æ®åœ¨LocalStorageä¸­ä¸€æ¬¡æ€§åŠ è½½
2. æ•°ç»„éå† - åŸºäºArray.filterå’ŒArray.find
3. ç¼“å­˜ç­–ç•¥ - æ¯æ¬¡æ“ä½œéƒ½é‡æ–°è¯»å–å®Œæ•´æ•°æ®

æ€§èƒ½ç“¶é¢ˆï¼š
- å¤§é‡æ•°æ®æ—¶æŸ¥è¯¢æ•ˆç‡è¾ƒä½
- é¢‘ç¹çš„JSON.parseå’ŒJSON.stringify
- ç¼ºä¹ç´¢å¼•æœºåˆ¶
```

---

### âš ï¸ **é‡å¤§æŠ€æœ¯å€ºåŠ¡è¯†åˆ«**

#### **1. æ€§èƒ½é—®é¢˜ (é«˜é£é™©)**
```javascript
é—®é¢˜ï¼š
1. æ¯æ¬¡æ“ä½œéƒ½å®Œæ•´è¯»å†™LocalStorage - O(n)å¤æ‚åº¦
2. å¤§æ•°æ®é‡æ—¶JSONè§£æå¼€é”€å¤§
3. ç¼ºä¹åˆ†é¡µå’Œæ‡’åŠ è½½æœºåˆ¶
4. æ— æ•°æ®ç´¢å¼•ï¼ŒæŸ¥è¯¢æ•ˆç‡ä½

å½±å“ï¼š
- çŸ¥è¯†ç‚¹æ•°é‡è¶…è¿‡1000æ—¶æ€§èƒ½æ€¥å‰§ä¸‹é™
- é¢‘ç¹æ“ä½œæ—¶UIå¡é¡¿
- æµè§ˆå™¨å­˜å‚¨é…é¢é£é™©
```

#### **2. æ•°æ®ä¸€è‡´æ€§å¤æ‚åº¦ (ä¸­ç­‰é£é™©)**
```javascript
é—®é¢˜ï¼š
1. ä¸‰çº§ç»“æ„æ˜ å°„å…³ç³»ç»´æŠ¤å¤æ‚
2. çº§è”åˆ é™¤é€»è¾‘åˆ†æ•£åœ¨å¤šä¸ªæ–¹æ³•ä¸­
3. æ•°æ®ä¿®å¤é€»è¾‘è¿‡äºå¤æ‚
4. å¹¶å‘æ“ä½œæ—¶å¯èƒ½å‡ºç°æ•°æ®ä¸ä¸€è‡´

å½±å“ï¼š
- æ•°æ®æŸåé£é™©
- è°ƒè¯•å›°éš¾
- ç»´æŠ¤æˆæœ¬é«˜
```

#### **3. å•ä½“æ–‡ä»¶é—®é¢˜ (ä¸¥é‡)**
```javascript
é—®é¢˜ï¼š
1. 1272è¡Œå•æ–‡ä»¶è¿‡å¤§
2. 60+ä¸ªæ–¹æ³•èŒè´£æ··åˆ
3. æ•°æ®æ¨¡å‹ã€ä¸šåŠ¡é€»è¾‘ã€å·¥å…·æ–¹æ³•æ··åœ¨ä¸€èµ·
4. æµ‹è¯•å›°éš¾ï¼Œé‡æ„é£é™©é«˜

å½±å“ï¼š
- ä»£ç å¯è¯»æ€§å·®
- å•å…ƒæµ‹è¯•å›°éš¾
- é‡æ„é£é™©é«˜
- å›¢é˜Ÿåä½œå›°éš¾
```

---

### ğŸ¯ **Vueé‡æ„å…³é”®å†³ç­–ç‚¹**

#### **æ•°æ®æŒä¹…åŒ–å±‚é‡æ„å»ºè®®**

##### **ğŸ”´ é«˜ä¼˜å…ˆçº§ï¼šçŠ¶æ€ç®¡ç†é‡æ„**
```typescript
// Pinia Storeè®¾è®¡
interface StorageState {
  // æ•°æ®ç¼“å­˜
  knowledgeBases: KnowledgeBase[]
  currentKnowledgeBaseId: string | null
  knowledge: KnowledgePoint[]
  mistakes: MistakeRecord[]
  
  // æŸ¥è¯¢ç¼“å­˜
  knowledgeByBase: Map<string, KnowledgePoint[]>
  knowledgeByArea: Map<string, KnowledgePoint[]>
  
  // çŠ¶æ€æ ‡è¯†
  isLoading: boolean
  lastUpdated: number
}

// Actionsè®¾è®¡
interface StorageActions {
  // æ•°æ®åŠ è½½
  loadData(): Promise<void>
  
  // çŸ¥è¯†åº“æ“ä½œ
  createKnowledgeBase(data: CreateKnowledgeBaseData): Promise<string>
  updateKnowledgeBase(id: string, updates: Partial<KnowledgeBase>): Promise<boolean>
  deleteKnowledgeBase(id: string): Promise<boolean>
  
  // çŸ¥è¯†ç‚¹æ“ä½œ
  createKnowledgePoint(data: CreateKnowledgePointData): Promise<string>
  updateKnowledgePoint(id: string, updates: Partial<KnowledgePoint>): Promise<boolean>
  deleteKnowledgePoint(id: string): Promise<boolean>
  
  // æŸ¥è¯¢æ–¹æ³•
  getKnowledgeByBase(baseId: string): KnowledgePoint[]
  getKnowledgeByArea(areaId: string): KnowledgePoint[]
  searchKnowledge(query: string, filters: SearchFilters): KnowledgePoint[]
}
```

##### **ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ï¼šAPIæœåŠ¡å±‚**
```typescript
// æœåŠ¡å±‚è®¾è®¡ - æ¸è¿›å¼è¿ç§»
class StorageService {
  // LocalStorageé€‚é…å™¨ (è¿‡æ¸¡æœŸ)
  private localStorageAdapter: LocalStorageAdapter
  
  // æœªæ¥APIé€‚é…å™¨
  private apiAdapter?: ApiAdapter
  
  // ç»Ÿä¸€æ¥å£
  async createKnowledgePoint(data: CreateKnowledgePointData): Promise<KnowledgePoint> {
    if (this.apiAdapter) {
      return await this.apiAdapter.createKnowledgePoint(data)
    } else {
      return await this.localStorageAdapter.createKnowledgePoint(data)
    }
  }
}
```

##### **ğŸŸ¢ ä½ä¼˜å…ˆçº§ï¼šæ€§èƒ½ä¼˜åŒ–**
```typescript
// æ€§èƒ½ä¼˜åŒ–ç­–ç•¥
interface PerformanceOptimizations {
  // æ•°æ®åˆ†é¡µ
  pagination: {
    pageSize: number
    lazyLoading: boolean
  }
  
  // æŸ¥è¯¢ç´¢å¼•
  indexes: {
    byKnowledgeBase: Map<string, Set<string>>
    byArea: Map<string, Set<string>>
    byTags: Map<string, Set<string>>
  }
  
  // ç¼“å­˜ç­–ç•¥
  cache: {
    maxSize: number
    ttl: number
    strategy: 'LRU' | 'LFU'
  }
}
```

---

### ğŸ’¡ **é‡æ„å®æ–½å»ºè®®**

#### **é˜¶æ®µ1: æ•°æ®æ¨¡å‹å’Œç±»å‹å®šä¹‰ (1å‘¨)**
1. **æå–TypeScriptæ¥å£** â†’ å®Œæ•´çš„ç±»å‹ç³»ç»Ÿ
2. **æ•°æ®éªŒè¯é‡æ„** â†’ ä½¿ç”¨zodæˆ–joi
3. **é”™è¯¯å¤„ç†æ ‡å‡†åŒ–** â†’ ç»Ÿä¸€çš„å¼‚å¸¸ç±»å‹

#### **é˜¶æ®µ2: çŠ¶æ€ç®¡ç†è¿ç§» (2å‘¨)**
1. **Pinia Storeå®ç°** â†’ æ›¿ä»£ç›´æ¥LocalStorageæ“ä½œ
2. **æ•°æ®ç¼“å­˜ä¼˜åŒ–** â†’ å‡å°‘å­˜å‚¨è¯»å†™é¢‘ç‡
3. **APIå…¼å®¹å±‚** â†’ ä¿æŒç°æœ‰è°ƒç”¨æ–¹å¼

#### **é˜¶æ®µ3: æ€§èƒ½å’Œæ‰©å±•æ€§ (2å‘¨)**
1. **æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–** â†’ ç´¢å¼•å’Œç¼“å­˜æœºåˆ¶
2. **åˆ†é¡µå’Œæ‡’åŠ è½½** â†’ å¤§æ•°æ®é‡æ”¯æŒ
3. **APIå‡†å¤‡** â†’ ä¸ºåç«¯é›†æˆé¢„ç•™æ¥å£

---

### ğŸ“‹ **å…³é”®è§‚å¯Ÿè¦ç‚¹**

1. **æ•°æ®æ¨¡å‹è®¾è®¡ä¼˜ç§€** - ä¸‰çº§ç»“æ„æ¸…æ™°ï¼Œæ‰©å±•æ€§å¥½
2. **APIè®¾è®¡ç»Ÿä¸€** - å‘½åè§„èŒƒï¼ŒåŠŸèƒ½å®Œæ•´
3. **æ•°æ®ä¸€è‡´æ€§ä¿éšœå®Œå–„** - éªŒè¯å’Œä¿®å¤æœºåˆ¶å¼ºå¤§
4. **æ€§èƒ½æ˜¯æœ€å¤§çŸ­æ¿** - å¤§æ•°æ®é‡æ—¶è¡¨ç°è¾ƒå·®
5. **ä»£ç ç»„ç»‡éœ€é‡æ„** - å•æ–‡ä»¶è¿‡å¤§ï¼ŒèŒè´£æ··åˆ
6. **é”™è¯¯å¤„ç†å®Œå–„** - å¼‚å¸¸æ•è·å’Œæ—¥å¿—è®°å½•è¯¦ç»†
7. **å‘åå…¼å®¹æ€§å¥½** - æ•°æ®è¿ç§»å’Œä¿®å¤æœºåˆ¶å®Œ

## ğŸ“Š **js/statistics.js åˆ†ææŠ¥å‘Š**

---

### ğŸ“ˆ **åŸºæœ¬ä¿¡æ¯**
- **ä»£ç è¡Œæ•°**: 488è¡Œ (ç›¸å¯¹è¾ƒå°)
- **ä¸»è¦ç±»**: 1ä¸ª (`StatisticsManager`)
- **ä¸»è¦å‡½æ•°**: 12ä¸ª
- **å¤æ‚åº¦è¯„ä¼°**: ä¸­ç­‰
- **æ¶æ„æ¨¡å¼**: æ•°æ®åˆ†æ + å›¾è¡¨å¯è§†åŒ–

---

### ğŸ—ï¸ **æ–‡ä»¶æ•´ä½“ç»“æ„**

#### **1. æ ¸å¿ƒæ¶æ„è®¾è®¡**
```
StatisticsManager (ç»Ÿè®¡åˆ†æå¼•æ“)
â”œâ”€â”€ Chart.jså›¾è¡¨ç®¡ç† (40%)
â”œâ”€â”€ æ•°æ®åˆ†æç®—æ³• (35%)
â”œâ”€â”€ æŠ¥å‘Šç”Ÿæˆç³»ç»Ÿ (15%)
â””â”€â”€ UIæ¸²æŸ“ç®¡ç† (10%)
```

#### **2. åŠŸèƒ½æ¨¡å—æ¶æ„**
```
ç»Ÿè®¡åˆ†æç»´åº¦:
â”œâ”€â”€ å­¦ä¹ è¿›åº¦åˆ†æ (å·²æŒæ¡/éœ€å¤ä¹ /æ–°çŸ¥è¯†)
â”œâ”€â”€ æ­£ç¡®ç‡è¶‹åŠ¿åˆ†æ (14å¤©è¶‹åŠ¿çº¿)
â”œâ”€â”€ åˆ†ç±»ç»Ÿè®¡åˆ†æ (æŒ‰çŸ¥è¯†åˆ†ç±»)
â”œâ”€â”€ éš¾åº¦åˆ†å¸ƒåˆ†æ (1-5çº§éš¾åº¦)
â”œâ”€â”€ å­¦ä¹ æ•ˆç‡åˆ†æ (ç”¨æ—¶/æ­£ç¡®ç‡)
â””â”€â”€ ç»¼åˆæŠ¥å‘Šç”Ÿæˆ (å¤šç»´åº¦æ±‡æ€»)
```

#### **3. èŒè´£åˆ†å¸ƒæ¯”ä¾‹**
- **å›¾è¡¨æ¸²æŸ“**: 40% (Chart.jsé›†æˆå’Œé…ç½®)
- **æ•°æ®è®¡ç®—**: 35% (ç»Ÿè®¡ç®—æ³•å’Œåˆ†æé€»è¾‘)
- **æŠ¥å‘Šç”Ÿæˆ**: 15% (HTMLæ¨¡æ¿å’Œå¯¼å‡º)
- **çŠ¶æ€ç®¡ç†**: 10% (å›¾è¡¨å®ä¾‹ç®¡ç†)

---

### ğŸ”§ **æ ¸å¿ƒåŠŸèƒ½æ¨¡å—è¯¦ç»†åˆ†æ**

#### **ğŸ“Š å›¾è¡¨å¯è§†åŒ–ç³»ç»Ÿ**

##### **è¿›åº¦ç¯å½¢å›¾ (Doughnut Chart)**
```javascript
æ ¸å¿ƒæ¸²æŸ“: renderProgressChart()
æ•°æ®æº: getProgressData()

å›¾è¡¨é…ç½®:
- å›¾è¡¨ç±»å‹: doughnut (ç¯å½¢å›¾)
- æ•°æ®ç»´åº¦: [å·²æŒæ¡, éœ€å¤ä¹ , æ–°çŸ¥è¯†]
- é¢œè‰²æ–¹æ¡ˆ: success/warning/info
- äº¤äº’åŠŸèƒ½: tooltipæ˜¾ç¤ºç™¾åˆ†æ¯”

æŒæ¡åˆ¤æ–­é€»è¾‘:
- å·²æŒæ¡: reviewCount >= 5 && correctCount/reviewCount >= 0.8
- éœ€å¤ä¹ : nextReview <= now
- æ–°çŸ¥è¯†: å…¶ä»–æƒ…å†µ
```

##### **æ­£ç¡®ç‡è¶‹åŠ¿å›¾ (Line Chart)**
```javascript
æ ¸å¿ƒæ¸²æŸ“: renderAccuracyChart()
æ•°æ®æº: getAccuracyTrendData()

å›¾è¡¨é…ç½®:
- å›¾è¡¨ç±»å‹: line (åŒYè½´æŠ˜çº¿å›¾)
- æ—¶é—´èŒƒå›´: æœ€è¿‘14å¤©
- æ•°æ®ç»´åº¦: [æ­£ç¡®ç‡%, å¤ä¹ æ¬¡æ•°]
- äº¤äº’åŠŸèƒ½: æ‚¬åœæ˜¾ç¤ºè¯¦ç»†æ•°æ®

ç®—æ³•é€»è¾‘:
- æŒ‰å¤©èšåˆå¤ä¹ è®°å½•
- è®¡ç®—æ¯æ—¥æ­£ç¡®ç‡ = correctCount / totalReviews * 100
- åŒYè½´æ˜¾ç¤ºæ­£ç¡®ç‡å’Œå¤ä¹ é‡çš„ç›¸å…³æ€§
```

##### **åˆ†ç±»æŸ±çŠ¶å›¾ (Bar Chart)**
```javascript
æ ¸å¿ƒæ¸²æŸ“: renderCategoryChart()
æ•°æ®æº: getCategoryStats()

å›¾è¡¨é…ç½®:
- å›¾è¡¨ç±»å‹: bar (åˆ†ç»„æŸ±çŠ¶å›¾)
- æ•°æ®ç»´åº¦: [æ€»æ•°, å·²æŒæ¡]
- åˆ†ç»„æ˜¾ç¤º: æŒ‰çŸ¥è¯†åˆ†ç±»
- å¯¹æ¯”åŠŸèƒ½: æ€»æ•° vs æŒæ¡æ•°é‡
```

#### **ğŸ“ˆ æ•°æ®åˆ†æç®—æ³•**

##### **åˆ†ç±»ç»Ÿè®¡ç®—æ³•**
```javascript
getCategoryStats() - å¤šç»´åº¦åˆ†æ:

ç»Ÿè®¡ç»´åº¦:
- total: æ€»çŸ¥è¯†ç‚¹æ•°
- reviewed: å·²å¤ä¹ æ•°é‡  
- correct: æ­£ç¡®æ€»æ¬¡æ•°
- mastered: å·²æŒæ¡æ•°é‡
- avgDifficulty: å¹³å‡éš¾åº¦
- accuracy: åˆ†ç±»æ­£ç¡®ç‡

è®¡ç®—é€»è¾‘:
categoryStats[category] = {
  total: count,
  accuracy: Math.round((correct / reviewed) * 100),
  avgDifficulty: (totalDifficulty / total).toFixed(1)
}
```

##### **å­¦ä¹ æ•ˆç‡ç®—æ³•**
```javascript
getEfficiencyData() - æ•ˆç‡è®¡ç®—:

æ•ˆç‡å…¬å¼:
efficiency = (accuracy / min(avgTimeSpent, 120)) * 100

ç®—æ³•ç‰¹ç‚¹:
- åŸºäºæœ€è¿‘50æ¬¡å¤ä¹ è®°å½•
- æ—¶é—´ä¸Šé™120ç§’(é¿å…æç«¯å€¼å½±å“)
- ç»¼åˆè€ƒè™‘æ­£ç¡®ç‡å’Œç”¨æ—¶
- å½’ä¸€åŒ–å¤„ç†ä¾¿äºæ¯”è¾ƒ
```

##### **è¶‹åŠ¿åˆ†æç®—æ³•**
```javascript
getAccuracyTrendData() - æ—¶é—´åºåˆ—åˆ†æ:

æ—¶é—´çª—å£: 14å¤©æ»‘åŠ¨çª—å£
èšåˆç²’åº¦: æŒ‰å¤©èšåˆ
è®¡ç®—æ–¹æ³•:
- æ¯æ—¥å¤ä¹ è®°å½•ç­›é€‰ (dayStart <= reviewDate <= dayEnd)
- æ—¥æ­£ç¡®ç‡ = å½“æ—¥æ­£ç¡®æ•° / å½“æ—¥æ€»å¤ä¹ æ•° * 100
- ç¼ºå¤±æ•°æ®å¡«0å¤„ç†
```

#### **ğŸ“‹ æŠ¥å‘Šç”Ÿæˆç³»ç»Ÿ**

##### **è¯¦ç»†æŠ¥å‘Šæ•°æ®æ¨¡å‹**
```javascript
getDetailedReport() è¿”å›ç»“æ„:

{
  totalKnowledge: number,     // æ€»çŸ¥è¯†ç‚¹æ•°
  totalReviews: number,       // æ€»å¤ä¹ æ¬¡æ•°
  overallAccuracy: number,    // æ•´ä½“æ­£ç¡®ç‡
  mastered: number,           // å·²æŒæ¡æ•°é‡
  masteryRate: number,        // æŒæ¡ç‡ç™¾åˆ†æ¯”
  avgDifficulty: number,      // å¹³å‡éš¾åº¦
  totalMistakes: number,      // é”™é¢˜æ€»æ•°
  efficiency: number,         // å­¦ä¹ æ•ˆç‡
  avgTimeSpent: number       // å¹³å‡ç”¨æ—¶
}
```

##### **æŠ¥å‘Šå¯¼å‡ºåŠŸèƒ½**
```javascript
exportReport() - JSONæ ¼å¼å¯¼å‡º:

å¯¼å‡ºæ•°æ®ç»“æ„:
{
  reportDate: ISOå­—ç¬¦ä¸²,
  summary: ç»¼åˆæŠ¥å‘Šæ•°æ®,
  categoryBreakdown: åˆ†ç±»è¯¦ç»†ç»Ÿè®¡,
  difficultyBreakdown: éš¾åº¦åˆ†å¸ƒç»Ÿè®¡,
  generatedBy: ç‰ˆæœ¬ä¿¡æ¯
}

æ–‡ä»¶å‘½å: memorin_report_YYYY-MM-DD.json
```

---

### ğŸ”— **ä¾èµ–å…³ç³»åˆ†æ**

#### **å¤–éƒ¨åº“ä¾èµ–**
```javascript
Chart.jsåº“ - å›¾è¡¨å¯è§†åŒ–æ ¸å¿ƒ
â”œâ”€â”€ Chartæ„é€ å‡½æ•° - å›¾è¡¨å®ä¾‹åˆ›å»º
â”œâ”€â”€ chart.destroy() - å›¾è¡¨é”€æ¯æ–¹æ³•
â”œâ”€â”€ å›¾è¡¨ç±»å‹: doughnut, line, bar
â”œâ”€â”€ é…ç½®é€‰é¡¹: responsive, plugins, scales
â””â”€â”€ æ•°æ®æ ¼å¼: { labels, datasets }
```

#### **å†…éƒ¨æ¨¡å—ä¾èµ–**
```javascript
window.storageManager - æ•°æ®æºä¾èµ–
â”œâ”€â”€ getAllKnowledge() - çŸ¥è¯†ç‚¹æ•°æ®
â”œâ”€â”€ getReviewHistory() - å¤ä¹ å†å²æ•°æ®
â”œâ”€â”€ getMistakes() - é”™é¢˜æ•°æ®
â””â”€â”€ æ•°æ®æ ¼å¼ä¾èµ–äºstorage.jsçš„æ•°æ®æ¨¡å‹

Utilså·¥å…·å‡½æ•°ä¾èµ–
â”œâ”€â”€ formatDate() - æ—¥æœŸæ ¼å¼åŒ–
â”œâ”€â”€ percentage() - ç™¾åˆ†æ¯”è®¡ç®—
â””â”€â”€ downloadFile() - æ–‡ä»¶ä¸‹è½½

window.appä¾èµ–
â””â”€â”€ showNotification() - é€šçŸ¥æ˜¾ç¤º
```

#### **DOMå…ƒç´ ä¾èµ–**
```html
å›¾è¡¨å®¹å™¨å…ƒç´ :
- #progress-chart (è¿›åº¦ç¯å½¢å›¾)
- #accuracy-chart (æ­£ç¡®ç‡è¶‹åŠ¿å›¾)  
- #category-chart (åˆ†ç±»æŸ±çŠ¶å›¾)
- #detailed-stats (è¯¦ç»†ç»Ÿè®¡è¡¨æ ¼)

ç‰¹ç‚¹: DOMä¾èµ–ç›¸å¯¹è¾ƒå°‘ï¼Œä¸»è¦æ˜¯å›¾è¡¨å®¹å™¨
```

---

### âš ï¸ **æŠ€æœ¯å€ºåŠ¡è¯†åˆ«**

#### **1. Chart.jsç‰ˆæœ¬å…¼å®¹æ€§ (ä¸­ç­‰é£é™©)**
```javascript
é—®é¢˜:
- Chart.js APIå¯èƒ½å­˜åœ¨ç‰ˆæœ¬å…¼å®¹é—®é¢˜
- å›¾è¡¨é…ç½®é€‰é¡¹å¯èƒ½åœ¨ç‰ˆæœ¬å‡çº§æ—¶å¤±æ•ˆ
- ç¼ºä¹Chart.jsç‰ˆæœ¬æ£€æµ‹å’Œé™çº§å¤„ç†

å½±å“:
- å›¾è¡¨æ˜¾ç¤ºå¼‚å¸¸
- åŠŸèƒ½çªç„¶å¤±æ•ˆ
- ç”¨æˆ·ä½“éªŒä¸‹é™
```

#### **2. æ•°æ®è®¡ç®—æ€§èƒ½é—®é¢˜ (ä½é£é™©)**
```javascript
é—®é¢˜:
- æ¯æ¬¡æ¸²æŸ“éƒ½é‡æ–°è®¡ç®—æ‰€æœ‰ç»Ÿè®¡æ•°æ®
- ç¼ºä¹æ•°æ®ç¼“å­˜æœºåˆ¶
- å¤§æ•°æ®é‡æ—¶å¯èƒ½é€ æˆUIå¡é¡¿

æ”¹è¿›å»ºè®®:
- å®ç°è®¡ç®—ç»“æœç¼“å­˜
- å¢é‡æ›´æ–°æœºåˆ¶
- å¼‚æ­¥è®¡ç®—å¤§æ•°æ®é‡ç»Ÿè®¡
```

#### **3. ç¡¬ç¼–ç é…ç½® (ä½é£é™©)**
```javascript
é—®é¢˜:
- é¢œè‰²é…ç½®ç¡¬ç¼–ç åœ¨æ„é€ å‡½æ•°ä¸­
- æ—¶é—´çª—å£(14å¤©)ç¡¬ç¼–ç 
- æ•ˆç‡å…¬å¼å‚æ•°(120ç§’ä¸Šé™)ç¡¬ç¼–ç 

æ”¹è¿›å»ºè®®:
- æå–é…ç½®æ–‡ä»¶
- æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰é…ç½®
- å‚æ•°å¯é…ç½®åŒ–
```

#### **4. é”™è¯¯å¤„ç†ä¸è¶³ (ä¸­ç­‰é£é™©)**
```javascript
é—®é¢˜:
- ç¼ºä¹Chart.jsåˆå§‹åŒ–å¤±è´¥å¤„ç†
- æ•°æ®ä¸ºç©ºæ—¶çš„è¾¹ç•Œæƒ…å†µå¤„ç†ä¸å®Œå–„
- DOMå…ƒç´ ä¸å­˜åœ¨æ—¶çš„å¼‚å¸¸å¤„ç†

æ”¹è¿›å»ºè®®:
- å¢åŠ try-catchå¼‚å¸¸æ•è·
- æ•°æ®éªŒè¯å’Œè¾¹ç•Œæ£€æŸ¥
- ä¼˜é›…é™çº§å¤„ç†
```

---

### ğŸ¯ **Vueé‡æ„å»ºè®®**

#### **ç»„ä»¶æ‹†åˆ†æ–¹æ¡ˆ**

##### **ğŸ”´ é«˜ä¼˜å…ˆçº§ç»„ä»¶**
```vue
<!-- ç»Ÿè®¡ä»ªè¡¨æ¿ä¸»ç»„ä»¶ -->
<StatisticsDashboard>
  <ProgressChart />
  <AccuracyTrendChart />
  <CategoryBreakdown />
  <DetailedReport />
</StatisticsDashboard>

<!-- è¿›åº¦ç¯å½¢å›¾ç»„ä»¶ -->
<ProgressChart 
  :data="progressData"
  :colors="chartColors"
  @chart-ready="onChartReady"
/>

<!-- æ­£ç¡®ç‡è¶‹åŠ¿å›¾ç»„ä»¶ -->
<AccuracyTrendChart
  :trend-data="accuracyTrendData"
  :days="14"
  @data-point-click="onDataPointClick"
/>
```

##### **ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ç»„ä»¶**
```vue
<!-- åˆ†ç±»ç»Ÿè®¡ç»„ä»¶ -->
<CategoryBreakdown
  :category-stats="categoryStats"
  :show-chart="true"
  :show-table="true"
/>

<!-- æŠ¥å‘Šå¯¼å‡ºç»„ä»¶ -->
<ReportExporter
  :export-formats="['json', 'pdf', 'excel']"
  @export="handleExport"
/>
```

#### **Composablesè®¾è®¡**

##### **useStatistics - ç»Ÿè®¡æ•°æ®ç®¡ç†**
```typescript
interface UseStatistics {
  // æ•°æ®çŠ¶æ€
  progressData: Ref<ProgressData>
  categoryStats: Ref<CategoryStats>
  accuracyTrend: Ref<AccuracyTrendData>
  
  // è®¡ç®—æ–¹æ³•
  calculateProgress: () => ProgressData
  calculateCategoryStats: () => CategoryStats
  calculateAccuracyTrend: (days: number) => AccuracyTrendData
  
  // ç¼“å­˜æ§åˆ¶
  refreshStats: () => Promise<void>
  invalidateCache: () => void
}

// ä½¿ç”¨ç¤ºä¾‹
const {
  progressData,
  categoryStats,
  refreshStats
} = useStatistics()
```

##### **useChartRenderer - å›¾è¡¨æ¸²æŸ“ç®¡ç†**
```typescript
interface UseChartRenderer {
  // å›¾è¡¨å®ä¾‹ç®¡ç†
  charts: Ref<Map<string, Chart>>
  
  // æ¸²æŸ“æ–¹æ³•
  renderChart: (type: ChartType, data: ChartData, options: ChartOptions) => Chart
  destroyChart: (chartId: string) => void
  destroyAllCharts: () => void
  
  // å“åº”å¼æ›´æ–°
  updateChartData: (chartId: string, newData: ChartData) => void
  
  // ä¸»é¢˜åˆ‡æ¢
  updateChartTheme: (theme: ChartTheme) => void
}
```

#### **çŠ¶æ€ç®¡ç†è®¾è®¡ (Pinia)**
```typescript
interface StatisticsState {
  // åŸå§‹æ•°æ®ç¼“å­˜
  knowledgeData: KnowledgePoint[]
  reviewHistory: ReviewRecord[]
  mistakeRecords: MistakeRecord[]
  
  // è®¡ç®—ç»“æœç¼“å­˜
  cachedStats: {
    progress?: ProgressData
    categoryStats?: CategoryStats
    accuracyTrend?: AccuracyTrendData
    lastCalculated: number
  }
  
  // UIçŠ¶æ€
  isLoading: boolean
  selectedTimeRange: TimeRange
  selectedCategories: string[]
}

interface StatisticsActions {
  // æ•°æ®åŠ è½½
  loadStatisticsData(): Promise<void>
  
  // ç»Ÿè®¡è®¡ç®—
  calculateAllStats(): Promise<void>
  calculateProgressStats(): ProgressData
  calculateCategoryStats(): CategoryStats
  calculateAccuracyTrend(days: number): AccuracyTrendData
  
  // æŠ¥å‘Šç”Ÿæˆ
  generateReport(format: ReportFormat): Promise<Blob>
  exportReport(format: ReportFormat): Promise<void>
  
  // ç¼“å­˜ç®¡ç†
  invalidateStatsCache(): void
  refreshStats(): Promise<void>
}
```

---

### ğŸ’¡ **é‡æ„å®æ–½å»ºè®®**

#### **é˜¶æ®µ1: ç»„ä»¶åŒ–æ‹†åˆ† (1å‘¨)**
1. **å›¾è¡¨ç»„ä»¶æå–** â†’ ç‹¬ç«‹çš„Chartç»„ä»¶åº“
2. **æ•°æ®è®¡ç®—é€»è¾‘åˆ†ç¦»** â†’ çº¯å‡½æ•°å¼è®¡ç®—æ¨¡å—
3. **Composableså®ç°** â†’ å“åº”å¼æ•°æ®ç®¡ç†

#### **é˜¶æ®µ2: æ€§èƒ½ä¼˜åŒ– (1å‘¨)**
1. **è®¡ç®—ç»“æœç¼“å­˜** â†’ é¿å…é‡å¤è®¡ç®—
2. **å¼‚æ­¥æ•°æ®å¤„ç†** â†’ å¤§æ•°æ®é‡ä¼˜åŒ–
3. **å›¾è¡¨æ‡’åŠ è½½** â†’ æŒ‰éœ€æ¸²æŸ“å›¾è¡¨

#### **é˜¶æ®µ3: åŠŸèƒ½å¢å¼º (1å‘¨)**
1. **æ›´å¤šå›¾è¡¨ç±»å‹** â†’ çƒ­åŠ›å›¾ã€é›·è¾¾å›¾ç­‰
2. **è‡ªå®šä¹‰æ—¶é—´èŒƒå›´** â†’ ç”¨æˆ·å¯é€‰æ‹©ç»Ÿè®¡å‘¨æœŸ
3. **æŠ¥å‘Šæ¨¡æ¿** â†’ å¤šç§å¯¼å‡ºæ ¼å¼æ”¯æŒ

---

### ğŸ“‹ **é‡æ„ä¼˜åŠ¿**

#### **1. èŒè´£å•ä¸€ï¼Œä»£ç è´¨é‡å¥½**
- **æ–‡ä»¶å¤§å°åˆç†**: 488è¡Œç›¸æ¯”å…¶ä»–æ¨¡å—è¾ƒå°
- **åŠŸèƒ½èšç„¦**: ä¸“æ³¨ç»Ÿè®¡åˆ†æï¼Œæ²¡æœ‰è¿‡å¤šèŒè´£æ··åˆ
- **ä¾èµ–æ¸…æ™°**: ä¸»è¦ä¾èµ–Chart.jså’ŒstorageManager

#### **2. æ•°æ®åˆ†æç®—æ³•å®Œå–„**
- **å¤šç»´åº¦ç»Ÿè®¡**: è¿›åº¦ã€è¶‹åŠ¿ã€åˆ†ç±»ã€éš¾åº¦ã€æ•ˆç‡
- **ç®—æ³•è®¾è®¡åˆç†**: æ•ˆç‡å…¬å¼ã€æŒæ¡åˆ¤æ–­é€»è¾‘ç§‘å­¦
- **æ—¶é—´åºåˆ—åˆ†æ**: 14å¤©è¶‹åŠ¿åˆ†ææä¾›æœ‰ä»·å€¼æ´å¯Ÿ

#### **3. å¯è§†åŒ–æ•ˆæœå¥½**
- **Chart.jsé›†æˆ**: ä¸“ä¸šå›¾è¡¨åº“ï¼Œæ•ˆæœç¾è§‚
- **å“åº”å¼è®¾è®¡**: å›¾è¡¨è‡ªé€‚åº”å®¹å™¨å¤§å°
- **äº¤äº’ä¸°å¯Œ**: tooltipã€legendç­‰ç”¨æˆ·ä½“éªŒå¥½

#### **4. æŠ¥å‘ŠåŠŸèƒ½å®Œæ•´**
- **æ•°æ®å¯¼å‡º**: JSONæ ¼å¼å¯¼å‡ºä¾¿äºäºŒæ¬¡å¤„ç†
- **HTMLæŠ¥å‘Š**: è¯¦ç»†ç»Ÿè®¡è¡¨æ ¼å±•ç¤º
- **æ–‡ä»¶å‘½å**: è‡ªåŠ¨ç”Ÿæˆæ—¶é—´æˆ³æ–‡ä»¶å
