<template>
  <div class="component-test-view">
    <div class="container">
      <header class="test-header">
      <h1>ğŸ§ª åŸºç¡€ç»„ä»¶æµ‹è¯•é¡µé¢</h1>
      <p>æµ‹è¯•å’Œå±•ç¤ºæ‰€æœ‰åŸºç¡€UIç»„ä»¶çš„åŠŸèƒ½</p>
    </header>

    <!-- BaseButton æµ‹è¯• -->
    <section class="test-section">
      <h2>ğŸ”˜ BaseButton æŒ‰é’®ç»„ä»¶</h2>
      
      <div class="test-group">
        <h3>æŒ‰é’®å˜ä½“</h3>
        <div class="button-group">
          <BaseButton variant="primary">ä¸»è¦æŒ‰é’®</BaseButton>
          <BaseButton variant="secondary">æ¬¡è¦æŒ‰é’®</BaseButton>
          <BaseButton variant="info">ä¿¡æ¯æŒ‰é’®</BaseButton>
        </div>
      </div>

      <div class="test-group">
        <h3>æŒ‰é’®çŠ¶æ€</h3>
        <div class="button-group">
          <BaseButton :loading="buttonLoading" @click="toggleLoading">
            {{ buttonLoading ? 'åŠ è½½ä¸­...' : 'ç‚¹å‡»åŠ è½½' }}
          </BaseButton>
          <BaseButton disabled>ç¦ç”¨æŒ‰é’®</BaseButton>
          <BaseButton variant="primary" @click="showSuccess">
            è§¦å‘æˆåŠŸé€šçŸ¥
          </BaseButton>
        </div>
      </div>
    </section>

    <!-- BaseCard æµ‹è¯• -->
    <section class="test-section">
      <h2>ğŸ—ƒï¸ BaseCard å¡ç‰‡ç»„ä»¶</h2>
      
              <div class="test-grid">
        <BaseCard variant="default">
          <h4>é»˜è®¤å¡ç‰‡</h4>
          <p>è¿™æ˜¯ä¸€ä¸ªé»˜è®¤æ ·å¼çš„å¡ç‰‡ç»„ä»¶ï¼Œå±•ç¤ºåŸºç¡€çš„æ¯›ç»ç’ƒæ•ˆæœã€‚</p>
        </BaseCard>

        <BaseCard variant="stat" clickable @click="handleCardClick">
          <h4>ç»Ÿè®¡å¡ç‰‡</h4>
          <div class="stat-content">
            <div class="stat-number">128</div>
            <div class="stat-label">å·²å­¦çŸ¥è¯†ç‚¹</div>
          </div>
        </BaseCard>

        <BaseCard variant="action" clickable @click="handleCardClick">
          <h4>æ“ä½œå¡ç‰‡</h4>
          <p>ç‚¹å‡»è¿›è¡Œæ“ä½œ</p>
        </BaseCard>
      </div>
    </section>

    <!-- BaseInput æµ‹è¯• -->
    <section class="test-section">
      <h2>ğŸ“ BaseInput è¾“å…¥æ¡†ç»„ä»¶</h2>
      
      <div class="input-grid">
        <BaseInput
          v-model="textInput"
          label="æ–‡æœ¬è¾“å…¥"
          placeholder="è¯·è¾“å…¥æ–‡æœ¬"
          help-text="è¿™æ˜¯å¸®åŠ©æ–‡æœ¬"
        />

        <BaseInput
          v-model="emailInput"
          type="email"
          label="é‚®ç®±åœ°å€"
          placeholder="è¯·è¾“å…¥é‚®ç®±"
          required
        />

        <BaseInput
          v-model="passwordInput"
          type="password"
          label="å¯†ç "
          placeholder="è¯·è¾“å…¥å¯†ç "
        />

        <BaseInput
          v-model="numberInput"
          type="number"
          label="æ•°å­—è¾“å…¥"
          placeholder="è¯·è¾“å…¥æ•°å­—"
          disabled
        />
      </div>

      <div class="input-preview">
        <h4>è¾“å…¥å€¼é¢„è§ˆï¼š</h4>
        <div class="preview-content">
          <p><strong>æ–‡æœ¬ï¼š</strong>{{ textInput || 'ç©º' }}</p>
          <p><strong>é‚®ç®±ï¼š</strong>{{ emailInput || 'ç©º' }}</p>
          <p><strong>å¯†ç ï¼š</strong>{{ passwordInput || 'ç©º' }}</p>
          <p><strong>æ•°å­—ï¼š</strong>{{ numberInput || 'ç©º' }}</p>
        </div>
      </div>
    </section>

    <!-- BaseBadge æµ‹è¯• -->
    <section class="test-section">
      <h2>ğŸ·ï¸ BaseBadge å¾½ç« ç»„ä»¶</h2>
      
      <div class="test-group">
        <h3>åŸºç¡€å˜ä½“</h3>
        <div class="badge-container">
          <BaseBadge variant="default" text="é»˜è®¤" />
          <BaseBadge variant="primary" text="ä¸»è¦" />
          <BaseBadge variant="secondary" text="æ¬¡è¦" />
          <BaseBadge variant="success" text="æˆåŠŸ" />
          <BaseBadge variant="warning" text="è­¦å‘Š" />
          <BaseBadge variant="danger" text="å±é™©" />
          <BaseBadge variant="info" text="ä¿¡æ¯" />
        </div>
      </div>

      <div class="test-group">
        <h3>éš¾åº¦ç­‰çº§å¾½ç« </h3>
        <div class="badge-container">
          <BaseBadge variant="difficulty" :difficulty="1" text="éš¾åº¦1" clickable @click="handleBadgeClick" />
          <BaseBadge variant="difficulty" :difficulty="2" text="éš¾åº¦2" clickable @click="handleBadgeClick" />
          <BaseBadge variant="difficulty" :difficulty="3" text="éš¾åº¦3" clickable @click="handleBadgeClick" />
          <BaseBadge variant="difficulty" :difficulty="4" text="éš¾åº¦4" clickable @click="handleBadgeClick" />
          <BaseBadge variant="difficulty" :difficulty="5" text="éš¾åº¦5" clickable @click="handleBadgeClick" />
        </div>
      </div>

      <div class="test-group">
        <h3>æ ‡ç­¾å’Œå°ºå¯¸</h3>
        <div class="badge-container">
          <BaseBadge variant="tag" text="æ•°å­¦" removable @remove="handleRemove" />
          <BaseBadge variant="tag" text="ç‰©ç†" removable @remove="handleRemove" />
          <BaseBadge variant="count" text="12" />
          <BaseBadge size="small" text="å°" />
          <BaseBadge size="medium" text="ä¸­" />
          <BaseBadge size="large" text="å¤§" />
        </div>
      </div>
    </section>

    <!-- BaseModal æµ‹è¯• -->
    <section class="test-section">
      <h2>ğŸ­ BaseModal æ¨¡æ€æ¡†ç»„ä»¶</h2>
      
      <div class="button-group">
        <BaseButton @click="showModal = true">åŸºç¡€æ¨¡æ€æ¡†</BaseButton>
        <BaseButton @click="showConfirmModal = true">ç¡®è®¤å¯¹è¯æ¡†</BaseButton>
        <BaseButton @click="showLargeModal = true">å¤§å‹æ¨¡æ€æ¡†</BaseButton>
      </div>

      <!-- åŸºç¡€æ¨¡æ€æ¡† -->
      <BaseModal
        v-model:visible="showModal"
        title="åŸºç¡€æ¨¡æ€æ¡†"
        @confirm="handleModalConfirm"
        @cancel="showModal = false"
      >
        <p>è¿™æ˜¯ä¸€ä¸ªåŸºç¡€çš„æ¨¡æ€æ¡†ç»„ä»¶ï¼Œå±•ç¤ºäº†æ ‡å‡†çš„å¤´éƒ¨ã€ä¸»ä½“å’Œåº•éƒ¨å¸ƒå±€ã€‚</p>
        <BaseInput v-model="modalInput" label="åœ¨æ¨¡æ€æ¡†ä¸­è¾“å…¥" placeholder="æµ‹è¯•è¾“å…¥" />
      </BaseModal>

      <!-- ç¡®è®¤å¯¹è¯æ¡† -->
      <BaseModal
        v-model:visible="showConfirmModal"
        title="ç¡®è®¤åˆ é™¤"
        variant="confirm"
        size="small"
        confirm-text="åˆ é™¤"
        @confirm="handleDelete"
        @cancel="showConfirmModal = false"
      >
        <p>ç¡®å®šè¦åˆ é™¤è¿™ä¸ªçŸ¥è¯†ç‚¹å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚</p>
      </BaseModal>

      <!-- å¤§å‹æ¨¡æ€æ¡† -->
      <BaseModal
        v-model:visible="showLargeModal"
        title="å¤§å‹æ¨¡æ€æ¡†"
        size="large"
        @confirm="showLargeModal = false"
        @cancel="showLargeModal = false"
      >
        <div class="large-modal-content">
          <h4>å¤æ‚è¡¨å•ç¤ºä¾‹</h4>
          <div class="form-grid">
            <BaseInput v-model="formTitle" label="æ ‡é¢˜" />
            <BaseInput v-model="formCategory" label="åˆ†ç±»" />
            <BaseInput v-model="formDifficulty" label="éš¾åº¦" />
            <BaseInput v-model="formDescription" label="æè¿°" />
          </div>
        </div>
      </BaseModal>
    </section>

    <!-- BaseNotification æµ‹è¯• -->
    <section class="test-section">
      <h2>ğŸ”” BaseNotification é€šçŸ¥ç»„ä»¶</h2>
      
      <div class="button-group">
        <BaseButton variant="primary" @click="showSuccessNotification">
          æˆåŠŸé€šçŸ¥
        </BaseButton>
        <BaseButton variant="secondary" @click="showErrorNotification">
          é”™è¯¯é€šçŸ¥
        </BaseButton>
        <BaseButton @click="showWarningNotification">
          è­¦å‘Šé€šçŸ¥
        </BaseButton>
        <BaseButton variant="info" @click="showInfoNotification">
          ä¿¡æ¯é€šçŸ¥
        </BaseButton>
      </div>
      
      <div class="button-group">
        <BaseButton @click="showSimpleNotification">
          ç®€å•é€šçŸ¥
        </BaseButton>
        <BaseButton @click="showPersistentNotification">
          æŒä¹…é€šçŸ¥
        </BaseButton>
        <BaseButton @click="showMultipleNotifications">
          å¤šä¸ªé€šçŸ¥
        </BaseButton>
        <BaseButton variant="secondary" @click="closeAllNotifications">
          å…³é—­æ‰€æœ‰
        </BaseButton>
      </div>
    </section>

    <!-- ç§»é™¤åŸæœ‰çš„é€šçŸ¥ç»„ä»¶ï¼Œç°åœ¨ä½¿ç”¨å…¨å±€æœåŠ¡ -->
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import BaseButton from '@/components/common/BaseButton.vue'
import BaseCard from '@/components/common/BaseCard.vue'
import BaseInput from '@/components/common/BaseInput.vue'
import BaseBadge from '@/components/common/BaseBadge.vue'
import BaseModal from '@/components/common/BaseModal.vue'
import { 
  notifySuccess, 
  notifyError, 
  notifyWarning, 
  notifyInfo, 
  closeAllNotifications as closeAll 
} from '@/utils/notification'

// å“åº”å¼æ•°æ®
const buttonLoading = ref(false)

// è¾“å…¥æ¡†æµ‹è¯•æ•°æ®
const textInput = ref('')
const emailInput = ref('')
const passwordInput = ref('')
const numberInput = ref('42')

// æ¨¡æ€æ¡†ç›¸å…³
const showModal = ref(false)
const showConfirmModal = ref(false)
const showLargeModal = ref(false)
const modalInput = ref('')

// è¡¨å•æ•°æ®
const formTitle = ref('çº¿æ€§ä»£æ•°åŸºç¡€')
const formCategory = ref('æ•°å­¦')
const formDifficulty = ref('3')
const formDescription = ref('å‘é‡ç©ºé—´ä¸çº¿æ€§å˜æ¢')

// é€šçŸ¥ç›¸å…³ - ç°åœ¨ä½¿ç”¨å…¨å±€é€šçŸ¥æœåŠ¡

// æ–¹æ³•
const toggleLoading = () => {
  buttonLoading.value = true
  setTimeout(() => {
    buttonLoading.value = false
  }, 2000)
}

const showSuccess = () => {
  notifySuccess('æ“ä½œæˆåŠŸå®Œæˆ')
}

const handleCardClick = () => {
  console.log('å¡ç‰‡è¢«ç‚¹å‡»')
  notifyInfo('å¡ç‰‡è¢«ç‚¹å‡»')
}

const handleBadgeClick = () => {
  console.log('å¾½ç« è¢«ç‚¹å‡»')
  notifyInfo('å¾½ç« è¢«ç‚¹å‡»')
}

const handleRemove = () => {
  console.log('æ ‡ç­¾è¢«ç§»é™¤')
  notifySuccess('æ ‡ç­¾å·²ç§»é™¤')
}

const handleModalConfirm = () => {
  showModal.value = false
  notifySuccess('æ“ä½œç¡®è®¤æˆåŠŸ')
}

const handleDelete = () => {
  showConfirmModal.value = false
  notifySuccess('åˆ é™¤æ“ä½œå®Œæˆ')
}

const showSuccessNotification = () => {
  notifySuccess('æ•°æ®å·²æˆåŠŸä¿å­˜åˆ°æ•°æ®åº“', 'æ“ä½œæˆåŠŸ')
}

const showErrorNotification = () => {
  notifyError('ç½‘ç»œè¿æ¥å¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•', 'æ“ä½œå¤±è´¥')
}

const showWarningNotification = () => {
  notifyWarning('æ‚¨æœ‰5ä¸ªçŸ¥è¯†ç‚¹è¿˜æœªå¤ä¹ ', 'æ³¨æ„')
}

const showInfoNotification = () => {
  notifyInfo('ç³»ç»Ÿå°†åœ¨5åˆ†é’Ÿåè¿›è¡Œç»´æŠ¤')
}

const showSimpleNotification = () => {
  notifyInfo('è¿™æ˜¯ä¸€ä¸ªç®€å•çš„é€šçŸ¥æ¶ˆæ¯')
}

const showPersistentNotification = () => {
  notifyWarning('è¿™æ˜¯ä¸€ä¸ªæŒä¹…é€šçŸ¥ï¼Œéœ€è¦æ‰‹åŠ¨å…³é—­', 'é‡è¦æé†’', { persistent: true })
}

const showMultipleNotifications = () => {
  notifySuccess('ç¬¬ä¸€ä¸ªé€šçŸ¥')
  setTimeout(() => notifyInfo('ç¬¬äºŒä¸ªé€šçŸ¥'), 500)
  setTimeout(() => notifyWarning('ç¬¬ä¸‰ä¸ªé€šçŸ¥'), 1000)
}

const closeAllNotifications = () => {
  closeAll()
}
</script>

<style scoped>
.component-test-view {
  width: 100%;
  padding: 2rem 0;
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-radius: 20px;
  margin-top: 2rem;
  margin-bottom: 2rem;
}

.test-header {
  text-align: center;
  margin-bottom: 3rem;
  padding: 2rem;
  background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
  border-radius: 16px;
  border: 1px solid rgba(102, 126, 234, 0.2);
}

.test-header h1 {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-size: 2.5rem;
  font-weight: 700;
  margin-bottom: 0.5rem;
}

.test-header p {
  color: #5a6c7d;
  font-size: 1.125rem;
  margin: 0;
}

.test-section {
  margin-bottom: 3rem;
  padding: 2rem;
  background: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(102, 126, 234, 0.1);
  border-radius: 16px;
  box-shadow: 0 4px 20px rgba(102, 126, 234, 0.08);
}

.test-section h2 {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-size: 1.75rem;
  font-weight: 600;
  margin-bottom: 1.5rem;
  border-bottom: 2px solid rgba(102, 126, 234, 0.1);
  padding-bottom: 0.5rem;
}

.test-group {
  margin-bottom: 2rem;
}

.test-group h3 {
  color: #2c3e50;
  font-size: 1.25rem;
  font-weight: 600;
  margin-bottom: 1rem;
}

.button-group {
  display: flex;
  gap: 1rem;
  flex-wrap: wrap;
  margin-bottom: 1rem;
}

/* test-grid æ ·å¼åœ¨å…¨å±€ layout.css ä¸­å®šä¹‰ */

.stat-content {
  text-align: center;
  padding: 1rem 0;
}

.stat-number {
  font-size: 2rem;
  font-weight: 700;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 0.5rem;
}

.stat-label {
  color: #5a6c7d;
  font-size: 0.875rem;
  font-weight: 500;
}

/* input-grid æ ·å¼åœ¨å…¨å±€ layout.css ä¸­å®šä¹‰ */

.input-preview {
  background: rgba(102, 126, 234, 0.05);
  border: 1px solid rgba(102, 126, 234, 0.1);
  border-radius: 8px;
  padding: 1rem;
}

.input-preview h4 {
  color: #2c3e50;
  margin-bottom: 0.5rem;
}

.preview-content p {
  margin: 0.25rem 0;
  color: #2c3e50;
  font-size: 0.875rem;
}

.badge-container {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
  align-items: center;
  margin-bottom: 1rem;
}

.large-modal-content {
  max-height: 60vh;
  overflow-y: auto;
}

/* form-grid æ ·å¼åœ¨å…¨å±€ layout.css ä¸­å®šä¹‰ */



/* å“åº”å¼è®¾è®¡ */
/* ç½‘æ ¼å¸ƒå±€çš„å“åº”å¼è®¾è®¡å·²ç§»è‡³å…¨å±€ layout.css æ–‡ä»¶ä¸­ç»Ÿä¸€ç®¡ç† */

@media (min-width: 1920px) {
  .component-test-view {
    padding: 0 2rem;
  }
}

/* ä¸­ç­‰å±å¹•çš„å“åº”å¼æ ·å¼å·²ç§»è‡³å…¨å±€ layout.css */

@media (max-width: 768px) {
  .component-test-view {
    padding: 1rem 0;
    margin-top: 1rem;
  }
  
  .test-header {
    padding: 1.5rem;
    margin-bottom: 2rem;
  }
  
  .test-header h1 {
    font-size: 2rem;
  }
  
  .test-section {
    padding: 1.5rem;
    margin-bottom: 2rem;
  }
  
  .button-group {
    flex-direction: column;
  }
  
  /* ç½‘æ ¼æ ·å¼ç”±å…¨å±€ layout.css ç®¡ç† */
}

@media (max-width: 480px) {
  .test-header h1 {
    font-size: 1.75rem;
  }
  
  .test-section h2 {
    font-size: 1.5rem;
  }
  
  .badge-container {
    gap: 0.5rem;
  }
}
</style> 