# è‡ªå®šä¹‰é¢˜ç›®åˆ—è¡¨ç®¡ç† - æ•°æ®åº“è§†å›¾è®¾è®¡

> **é…å¥—æ–‡æ¡£**: [è‡ªå®šä¹‰é¢˜ç›®åˆ—è¡¨å¤šå¯¹å¤šå…³ç³»æ¶æ„](./æ•°æ®åº“è®¾è®¡-è‡ªå®šä¹‰é¢˜ç›®åˆ—è¡¨å¤šå¯¹å¤šå…³ç³».md)  
> **ç›®çš„**: æä¾›ä¾¿æ·çš„æŸ¥è¯¢è§†å›¾å’Œç®¡ç†åŠŸèƒ½  
> **è®¾è®¡æ—¶é—´**: 2025-01-08  

## ğŸ¯ æ ¸å¿ƒè§†å›¾è®¾è®¡

### 1. çŸ¥è¯†ç‚¹å®Œæ•´ä¿¡æ¯è§†å›¾
```sql
-- çŸ¥è¯†ç‚¹çš„å®Œæ•´å…³è”ä¿¡æ¯è§†å›¾
CREATE VIEW v_knowledge_points_full AS
SELECT 
    kp.id,
    kp.user_id,
    kp.type,
    kp.question,
    kp.answer,
    kp.explanation,
    kp.difficulty,
    kp.choice_type,
    kp.options,
    kp.correct_answer,
    kp.tags,
    kp.score,
    kp.source,
    kp.created_at,
    kp.updated_at,
    
    -- çŸ¥è¯†åº“ä¿¡æ¯èšåˆ
    GROUP_CONCAT(DISTINCT kb.name ORDER BY kpbr.is_primary DESC, kb.name) as knowledge_bases,
    GROUP_CONCAT(DISTINCT kb.id ORDER BY kpbr.is_primary DESC, kb.name) as knowledge_base_ids,
    GROUP_CONCAT(DISTINCT kpbr.category ORDER BY kpbr.is_primary DESC) as kb_categories,
    
    -- çŸ¥è¯†åŒºä¿¡æ¯èšåˆ  
    GROUP_CONCAT(DISTINCT ka.name ORDER BY kpar.is_primary DESC, ka.name) as knowledge_areas,
    GROUP_CONCAT(DISTINCT ka.id ORDER BY kpar.is_primary DESC, ka.name) as knowledge_area_ids,
    GROUP_CONCAT(DISTINCT kpar.relevance_score ORDER BY kpar.is_primary DESC) as area_relevance_scores,
    
    -- ä¸»è¦å½’å±ä¿¡æ¯
    (SELECT kb2.name FROM knowledge_bases kb2 
     JOIN knowledge_point_base_relations kpbr2 ON kb2.id = kpbr2.knowledge_base_id 
     WHERE kpbr2.knowledge_point_id = kp.id AND kpbr2.is_primary = TRUE LIMIT 1) as primary_knowledge_base,
     
    (SELECT ka2.name FROM knowledge_areas ka2 
     JOIN knowledge_point_area_relations kpar2 ON ka2.id = kpar2.knowledge_area_id 
     WHERE kpar2.knowledge_point_id = kp.id AND kpar2.is_primary = TRUE LIMIT 1) as primary_knowledge_area,
    
    -- ç»Ÿè®¡ä¿¡æ¯
    COUNT(DISTINCT kpbr.knowledge_base_id) as base_count,
    COUNT(DISTINCT kpar.knowledge_area_id) as area_count
    
FROM knowledge_points kp
LEFT JOIN knowledge_point_base_relations kpbr ON kp.id = kpbr.knowledge_point_id
LEFT JOIN knowledge_bases kb ON kpbr.knowledge_base_id = kb.id
LEFT JOIN knowledge_point_area_relations kpar ON kp.id = kpar.knowledge_point_id
LEFT JOIN knowledge_areas ka ON kpar.knowledge_area_id = ka.id
GROUP BY kp.id;
```

### 2. è‡ªå®šä¹‰é¢˜ç›®åˆ—è¡¨è¯¦æƒ…è§†å›¾
```sql
-- è‡ªå®šä¹‰é¢˜ç›®åˆ—è¡¨çš„è¯¦ç»†ä¿¡æ¯è§†å›¾
CREATE VIEW v_custom_question_lists_detail AS
SELECT 
    cql.id,
    cql.user_id,
    cql.name,
    cql.description,
    cql.total_count,
    cql.estimated_time,
    cql.difficulty_level,
    cql.generation_config,
    cql.source_summary,
    cql.status,
    cql.is_public,
    cql.is_template,
    cql.usage_count,
    cql.last_used_at,
    cql.created_at,
    cql.updated_at,
    
    -- å®é™…ç»Ÿè®¡ä¿¡æ¯
    COUNT(DISTINCT qlpr.knowledge_point_id) as actual_count,
    AVG(kp.difficulty) as actual_avg_difficulty,
    COUNT(DISTINCT CASE WHEN kp.type = 'choice' THEN kp.id END) as choice_count,
    COUNT(DISTINCT CASE WHEN kp.type = 'fill' THEN kp.id END) as fill_count,
    
    -- æ¶‰åŠçš„çŸ¥è¯†åº“å’ŒçŸ¥è¯†åŒº
    COUNT(DISTINCT kpbr.knowledge_base_id) as involved_base_count,
    COUNT(DISTINCT kpar.knowledge_area_id) as involved_area_count,
    GROUP_CONCAT(DISTINCT kb.name ORDER BY kb.name) as involved_knowledge_bases,
    GROUP_CONCAT(DISTINCT ka.name ORDER BY ka.name) as involved_knowledge_areas,
    
    -- æ¥æºåˆ†å¸ƒ
    COUNT(DISTINCT CASE WHEN qlpr.source_type = 'knowledge-base' THEN qlpr.source_id END) as base_source_count,
    COUNT(DISTINCT CASE WHEN qlpr.source_type = 'knowledge-area' THEN qlpr.source_id END) as area_source_count,
    COUNT(DISTINCT CASE WHEN qlpr.source_type = 'custom' THEN qlpr.knowledge_point_id END) as custom_source_count
    
FROM custom_question_lists cql
LEFT JOIN question_list_point_relations qlpr ON cql.id = qlpr.question_list_id
LEFT JOIN knowledge_points kp ON qlpr.knowledge_point_id = kp.id
LEFT JOIN knowledge_point_base_relations kpbr ON kp.id = kpbr.knowledge_point_id
LEFT JOIN knowledge_bases kb ON kpbr.knowledge_base_id = kb.id
LEFT JOIN knowledge_point_area_relations kpar ON kp.id = kpar.knowledge_point_id
LEFT JOIN knowledge_areas ka ON kpar.knowledge_area_id = ka.id
GROUP BY cql.id;
```

### 3. çŸ¥è¯†åº“çŸ¥è¯†ç‚¹ç»Ÿè®¡è§†å›¾
```sql
-- çŸ¥è¯†åº“çš„çŸ¥è¯†ç‚¹ç»Ÿè®¡è§†å›¾
CREATE VIEW v_knowledge_base_stats AS
SELECT 
    kb.id,
    kb.user_id,
    kb.name,
    kb.description,
    kb.icon,
    kb.color,
    kb.category,
    kb.is_public,
    kb.sort_order,
    kb.created_at,
    kb.updated_at,
    
    -- çŸ¥è¯†ç‚¹ç»Ÿè®¡
    COUNT(DISTINCT kpbr.knowledge_point_id) as total_points,
    COUNT(DISTINCT CASE WHEN kpbr.is_primary = TRUE THEN kpbr.knowledge_point_id END) as primary_points,
    COUNT(DISTINCT CASE WHEN kpbr.is_primary = FALSE THEN kpbr.knowledge_point_id END) as shared_points,
    
    -- é¢˜å‹åˆ†å¸ƒ
    COUNT(DISTINCT CASE WHEN kp.type = 'choice' THEN kp.id END) as choice_points,
    COUNT(DISTINCT CASE WHEN kp.type = 'fill' THEN kp.id END) as fill_points,
    
    -- éš¾åº¦åˆ†å¸ƒ
    AVG(kp.difficulty) as avg_difficulty,
    COUNT(DISTINCT CASE WHEN kp.difficulty = 1 THEN kp.id END) as difficulty_1_count,
    COUNT(DISTINCT CASE WHEN kp.difficulty = 2 THEN kp.id END) as difficulty_2_count,
    COUNT(DISTINCT CASE WHEN kp.difficulty = 3 THEN kp.id END) as difficulty_3_count,
    COUNT(DISTINCT CASE WHEN kp.difficulty = 4 THEN kp.id END) as difficulty_4_count,
    COUNT(DISTINCT CASE WHEN kp.difficulty = 5 THEN kp.id END) as difficulty_5_count,
    
    -- ç›¸å…³çŸ¥è¯†åŒºç»Ÿè®¡
    COUNT(DISTINCT kpar.knowledge_area_id) as related_area_count,
    GROUP_CONCAT(DISTINCT ka.name ORDER BY ka.name) as related_areas,
    
    -- è¢«å¼•ç”¨ç»Ÿè®¡
    COUNT(DISTINCT qlpr.question_list_id) as used_in_lists_count
    
FROM knowledge_bases kb
LEFT JOIN knowledge_point_base_relations kpbr ON kb.id = kpbr.knowledge_base_id
LEFT JOIN knowledge_points kp ON kpbr.knowledge_point_id = kp.id
LEFT JOIN knowledge_point_area_relations kpar ON kp.id = kpar.knowledge_point_id
LEFT JOIN knowledge_areas ka ON kpar.knowledge_area_id = ka.id
LEFT JOIN question_list_point_relations qlpr ON kp.id = qlpr.knowledge_point_id
GROUP BY kb.id;
```

### 4. çŸ¥è¯†åŒºçŸ¥è¯†ç‚¹ç»Ÿè®¡è§†å›¾
```sql
-- çŸ¥è¯†åŒºçš„çŸ¥è¯†ç‚¹ç»Ÿè®¡è§†å›¾
CREATE VIEW v_knowledge_area_stats AS
SELECT 
    ka.id,
    ka.user_id,
    ka.name,
    ka.description,
    ka.color,
    ka.category,
    ka.parent_area_id,
    ka.sort_order,
    ka.created_at,
    ka.updated_at,
    
    -- å±‚æ¬¡ä¿¡æ¯
    (SELECT name FROM knowledge_areas WHERE id = ka.parent_area_id) as parent_area_name,
    (SELECT COUNT(*) FROM knowledge_areas WHERE parent_area_id = ka.id) as sub_area_count,
    
    -- çŸ¥è¯†ç‚¹ç»Ÿè®¡
    COUNT(DISTINCT kpar.knowledge_point_id) as total_points,
    COUNT(DISTINCT CASE WHEN kpar.is_primary = TRUE THEN kpar.knowledge_point_id END) as primary_points,
    COUNT(DISTINCT CASE WHEN kpar.is_primary = FALSE THEN kpar.knowledge_point_id END) as shared_points,
    AVG(kpar.relevance_score) as avg_relevance,
    
    -- é¢˜å‹åˆ†å¸ƒ
    COUNT(DISTINCT CASE WHEN kp.type = 'choice' THEN kp.id END) as choice_points,
    COUNT(DISTINCT CASE WHEN kp.type = 'fill' THEN kp.id END) as fill_points,
    
    -- éš¾åº¦åˆ†å¸ƒ
    AVG(kp.difficulty) as avg_difficulty,
    MIN(kp.difficulty) as min_difficulty,
    MAX(kp.difficulty) as max_difficulty,
    
    -- ç›¸å…³çŸ¥è¯†åº“ç»Ÿè®¡
    COUNT(DISTINCT kpbr.knowledge_base_id) as related_base_count,
    GROUP_CONCAT(DISTINCT kb.name ORDER BY kb.name) as related_bases,
    
    -- è¢«å¼•ç”¨ç»Ÿè®¡
    COUNT(DISTINCT qlpr.question_list_id) as used_in_lists_count
    
FROM knowledge_areas ka
LEFT JOIN knowledge_point_area_relations kpar ON ka.id = kpar.knowledge_area_id
LEFT JOIN knowledge_points kp ON kpar.knowledge_point_id = kp.id
LEFT JOIN knowledge_point_base_relations kpbr ON kp.id = kpbr.knowledge_point_id
LEFT JOIN knowledge_bases kb ON kpbr.knowledge_base_id = kb.id
LEFT JOIN question_list_point_relations qlpr ON kp.id = qlpr.knowledge_point_id
GROUP BY ka.id;
```

## ğŸ” ä¸“ç”¨æŸ¥è¯¢å‡½æ•°

### 1. è·¨åŸŸçŸ¥è¯†ç‚¹æŸ¥è¯¢å‡½æ•°
```sql
-- åˆ›å»ºå‡½æ•°ï¼šæ ¹æ®å¤šä¸ªæ¡ä»¶æŸ¥è¯¢çŸ¥è¯†ç‚¹
DELIMITER $$
CREATE FUNCTION GetCrossDomainPoints(
    p_base_ids JSON,
    p_area_ids JSON,
    p_tags JSON,
    p_min_difficulty INT,
    p_max_difficulty INT,
    p_user_id BIGINT
) RETURNS JSON
READS SQL DATA
DETERMINISTIC
BEGIN
    DECLARE result JSON;
    DECLARE query_sql TEXT;
    
    SET query_sql = '
        SELECT JSON_ARRAYAGG(
            JSON_OBJECT(
                "id", kp.id,
                "question", kp.question,
                "difficulty", kp.difficulty,
                "type", kp.type,
                "knowledge_bases", 
                    (SELECT JSON_ARRAYAGG(kb.name) 
                     FROM knowledge_point_base_relations kpbr2 
                     JOIN knowledge_bases kb ON kpbr2.knowledge_base_id = kb.id 
                     WHERE kpbr2.knowledge_point_id = kp.id),
                "knowledge_areas",
                    (SELECT JSON_ARRAYAGG(ka.name) 
                     FROM knowledge_point_area_relations kpar2 
                     JOIN knowledge_areas ka ON kpar2.knowledge_area_id = ka.id 
                     WHERE kpar2.knowledge_point_id = kp.id)
            )
        )
        FROM knowledge_points kp
        WHERE kp.user_id = ' + CAST(p_user_id AS CHAR);
    
    -- æ·»åŠ çŸ¥è¯†åº“æ¡ä»¶
    IF JSON_LENGTH(p_base_ids) > 0 THEN
        SET query_sql = CONCAT(query_sql, '
            AND kp.id IN (
                SELECT kpbr.knowledge_point_id 
                FROM knowledge_point_base_relations kpbr 
                WHERE kpbr.knowledge_base_id IN (', 
                REPLACE(REPLACE(JSON_EXTRACT(p_base_ids, '$'), '[', ''), ']', ''), ')
            )');
    END IF;
    
    -- æ·»åŠ çŸ¥è¯†åŒºæ¡ä»¶
    IF JSON_LENGTH(p_area_ids) > 0 THEN
        SET query_sql = CONCAT(query_sql, '
            AND kp.id IN (
                SELECT kpar.knowledge_point_id 
                FROM knowledge_point_area_relations kpar 
                WHERE kpar.knowledge_area_id IN (', 
                REPLACE(REPLACE(JSON_EXTRACT(p_area_ids, '$'), '[', ''), ']', ''), ')
            )');
    END IF;
    
    -- æ·»åŠ éš¾åº¦æ¡ä»¶
    IF p_min_difficulty IS NOT NULL THEN
        SET query_sql = CONCAT(query_sql, ' AND kp.difficulty >= ', p_min_difficulty);
    END IF;
    
    IF p_max_difficulty IS NOT NULL THEN
        SET query_sql = CONCAT(query_sql, ' AND kp.difficulty <= ', p_max_difficulty);
    END IF;
    
    -- æ‰§è¡ŒæŸ¥è¯¢ï¼ˆè¿™é‡Œéœ€è¦åŠ¨æ€SQLæ”¯æŒï¼‰
    SET @sql = query_sql;
    PREPARE stmt FROM @sql;
    EXECUTE stmt;
    DEALLOCATE PREPARE stmt;
    
    RETURN result;
END$$
DELIMITER ;
```

### 2. é¢˜ç›®åˆ—è¡¨ç”Ÿæˆå­˜å‚¨è¿‡ç¨‹
```sql
-- åˆ›å»ºå­˜å‚¨è¿‡ç¨‹ï¼šç”Ÿæˆè‡ªå®šä¹‰é¢˜ç›®åˆ—è¡¨
DELIMITER $$
CREATE PROCEDURE CreateCustomQuestionList(
    IN p_user_id BIGINT,
    IN p_name VARCHAR(100),
    IN p_description TEXT,
    IN p_generation_config JSON,
    OUT p_list_id BIGINT
)
BEGIN
    DECLARE v_list_id BIGINT;
    DECLARE v_base_ids JSON;
    DECLARE v_area_ids JSON;
    DECLARE v_filters JSON;
    DECLARE v_count INT DEFAULT 20;
    
    DECLARE EXIT HANDLER FOR SQLEXCEPTION
    BEGIN
        ROLLBACK;
        RESIGNAL;
    END;
    
    START TRANSACTION;
    
    -- è§£æç”Ÿæˆé…ç½®
    SET v_base_ids = JSON_EXTRACT(p_generation_config, '$.source.params.knowledgeBaseIds');
    SET v_area_ids = JSON_EXTRACT(p_generation_config, '$.source.params.knowledgeAreaIds');
    SET v_filters = JSON_EXTRACT(p_generation_config, '$.filters');
    SET v_count = COALESCE(JSON_UNQUOTE(JSON_EXTRACT(p_generation_config, '$.limiter.params.count')), 20);
    
    -- åˆ›å»ºé¢˜ç›®åˆ—è¡¨
    INSERT INTO custom_question_lists (
        user_id, name, description, generation_config, status, total_count
    ) VALUES (
        p_user_id, p_name, p_description, p_generation_config, 'draft', v_count
    );
    
    SET v_list_id = LAST_INSERT_ID();
    
    -- è·å–ç¬¦åˆæ¡ä»¶çš„çŸ¥è¯†ç‚¹
    INSERT INTO question_list_point_relations (
        question_list_id, knowledge_point_id, sequence_order, 
        source_type, source_id, generation_meta
    )
    SELECT 
        v_list_id,
        kp.id,
        ROW_NUMBER() OVER (ORDER BY RAND()) as sequence_order,
        CASE 
            WHEN v_base_ids IS NOT NULL THEN 'knowledge-base'
            WHEN v_area_ids IS NOT NULL THEN 'knowledge-area'
            ELSE 'mixed'
        END as source_type,
        CASE 
            WHEN v_base_ids IS NOT NULL THEN kpbr.knowledge_base_id
            WHEN v_area_ids IS NOT NULL THEN kpar.knowledge_area_id
            ELSE NULL
        END as source_id,
        JSON_OBJECT(
            'generatedAt', NOW(),
            'difficulty', kp.difficulty,
            'type', kp.type
        ) as generation_meta
    FROM knowledge_points kp
    LEFT JOIN knowledge_point_base_relations kpbr ON kp.id = kpbr.knowledge_point_id
    LEFT JOIN knowledge_point_area_relations kpar ON kp.id = kpar.knowledge_point_id
    WHERE kp.user_id = p_user_id
    AND (
        v_base_ids IS NULL OR kpbr.knowledge_base_id IN (
            SELECT JSON_UNQUOTE(JSON_EXTRACT(v_base_ids, CONCAT('$[', numbers.n, ']')))
            FROM (SELECT 0 n UNION SELECT 1 UNION SELECT 2 UNION SELECT 3 UNION SELECT 4) numbers
            WHERE JSON_UNQUOTE(JSON_EXTRACT(v_base_ids, CONCAT('$[', numbers.n, ']'))) IS NOT NULL
        )
    )
    AND (
        v_area_ids IS NULL OR kpar.knowledge_area_id IN (
            SELECT JSON_UNQUOTE(JSON_EXTRACT(v_area_ids, CONCAT('$[', numbers.n, ']')))
            FROM (SELECT 0 n UNION SELECT 1 UNION SELECT 2 UNION SELECT 3 UNION SELECT 4) numbers
            WHERE JSON_UNQUOTE(JSON_EXTRACT(v_area_ids, CONCAT('$[', numbers.n, ']'))) IS NOT NULL
        )
    )
    ORDER BY RAND()
    LIMIT v_count;
    
    -- æ›´æ–°åˆ—è¡¨çŠ¶æ€
    UPDATE custom_question_lists 
    SET status = 'active',
        total_count = (SELECT COUNT(*) FROM question_list_point_relations WHERE question_list_id = v_list_id),
        difficulty_level = (
            SELECT AVG(kp.difficulty) 
            FROM question_list_point_relations qlpr
            JOIN knowledge_points kp ON qlpr.knowledge_point_id = kp.id
            WHERE qlpr.question_list_id = v_list_id
        )
    WHERE id = v_list_id;
    
    SET p_list_id = v_list_id;
    
    COMMIT;
END$$
DELIMITER ;
```

## ğŸ“± å‰ç«¯æ¥å£é€‚é…

### 1. Vueç»„ä»¶æ•°æ®æ¥å£
```typescript
// çŸ¥è¯†ç‚¹å¤šç»´åº¦å±•ç¤ºç»„ä»¶
interface KnowledgePointDetailView {
  id: number;
  question: string;
  answer: string;
  difficulty: number;
  type: 'fill' | 'choice';
  
  // å¤šå¯¹å¤šå…³ç³»ä¿¡æ¯
  knowledgeBases: KnowledgeBaseInfo[];
  knowledgeAreas: KnowledgeAreaInfo[];
  primaryKnowledgeBase?: KnowledgeBaseInfo;
  primaryKnowledgeArea?: KnowledgeAreaInfo;
  
  // ä½¿ç”¨ç»Ÿè®¡
  usedInLists: CustomQuestionListInfo[];
  relatedPoints: KnowledgePointInfo[];
}

interface CustomQuestionListDetailView {
  id: number;
  name: string;
  description: string;
  totalCount: number;
  actualCount: number;
  
  // æ¥æºåˆ†æ
  sourceDistribution: {
    knowledgeBases: { name: string; count: number; }[];
    knowledgeAreas: { name: string; count: number; }[];
    customPoints: number;
  };
  
  // ç»Ÿè®¡ä¿¡æ¯
  statistics: {
    avgDifficulty: number;
    typeDistribution: { choice: number; fill: number; };
    estimatedTime: number;
  };
  
  // çŸ¥è¯†ç‚¹åˆ—è¡¨
  points: KnowledgePointInList[];
}
```

### 2. APIå“åº”æ ¼å¼
```typescript
// GET /api/knowledge-points/{id}/full
interface KnowledgePointFullResponse {
  success: boolean;
  data: {
    point: KnowledgePointDetailView;
    relationships: {
      knowledgeBases: Array<{
        id: number;
        name: string;
        isPrimary: boolean;
        category?: string;
        addedAt: string;
      }>;
      knowledgeAreas: Array<{
        id: number;
        name: string;
        isPrimary: boolean;
        relevanceScore: number;
        addedAt: string;
      }>;
    };
    usage: {
      listsCount: number;
      totalUsage: number;
      recentLists: CustomQuestionListInfo[];
    };
  };
}

// POST /api/question-lists/generate
interface GenerateQuestionListRequest {
  name: string;
  description?: string;
  config: {
    sources: {
      knowledgeBaseIds?: number[];
      knowledgeAreaIds?: number[];
      customPointIds?: number[];
    };
    filters: {
      difficulty?: [number, number];
      tags?: string[];
      type?: 'fill' | 'choice' | 'mixed';
    };
    options: {
      count: number;
      shuffleOrder: boolean;
      includeExplanations: boolean;
    };
  };
}
```

## ğŸ›ï¸ ç®¡ç†ç•Œé¢è®¾è®¡

### 1. çŸ¥è¯†ç‚¹å¤šç»´åº¦ç®¡ç†ç•Œé¢
```vue
<template>
  <div class="knowledge-point-manager">
    <!-- çŸ¥è¯†ç‚¹åŸºæœ¬ä¿¡æ¯ -->
    <KnowledgePointEditor :point="currentPoint" @save="handleSave" />
    
    <!-- å…³è”ç®¡ç† -->
    <div class="relations-manager">
      <div class="knowledge-bases-section">
        <h3>æ‰€å±çŸ¥è¯†åº“</h3>
        <RelationshipManager
          :items="point.knowledgeBases"
          :available="availableKnowledgeBases"
          @add="addToKnowledgeBase"
          @remove="removeFromKnowledgeBase"
          @setPrimary="setPrimaryKnowledgeBase"
        />
      </div>
      
      <div class="knowledge-areas-section">
        <h3>æ‰€å±çŸ¥è¯†åŒº</h3>
        <RelationshipManager
          :items="point.knowledgeAreas"
          :available="availableKnowledgeAreas"
          @add="addToKnowledgeArea"
          @remove="removeFromKnowledgeArea"
          @setPrimary="setPrimaryKnowledgeArea"
        />
      </div>
    </div>
    
    <!-- ä½¿ç”¨ç»Ÿè®¡ -->
    <UsageStatistics :usage="point.usage" />
  </div>
</template>
```

### 2. è‡ªå®šä¹‰é¢˜ç›®åˆ—è¡¨ç®¡ç†ç•Œé¢
```vue
<template>
  <div class="custom-list-manager">
    <!-- åˆ—è¡¨é…ç½® -->
    <QuestionListConfig 
      v-model="listConfig"
      :knowledge-bases="knowledgeBases"
      :knowledge-areas="knowledgeAreas"
    />
    
    <!-- é¢„è§ˆå’Œè°ƒæ•´ -->
    <div class="list-preview">
      <QuestionListPreview
        :questions="previewQuestions"
        :statistics="previewStats"
        @reorder="handleReorder"
        @remove="handleRemove"
        @regenerate="handleRegenerate"
      />
    </div>
    
    <!-- ä¿å­˜å’Œåˆ†äº« -->
    <div class="list-actions">
      <button @click="saveList">ä¿å­˜åˆ—è¡¨</button>
      <button @click="shareList">åˆ†äº«åˆ—è¡¨</button>
      <button @click="exportList">å¯¼å‡ºåˆ—è¡¨</button>
    </div>
  </div>
</template>
```

---

**æ€»ç»“**: è¿™ä¸ªè§†å›¾è®¾è®¡æä¾›äº†å®Œæ•´çš„å¤šå¯¹å¤šå…³ç³»ç®¡ç†ç•Œé¢ï¼Œæ”¯æŒçµæ´»çš„çŸ¥è¯†ç‚¹ç»„ç»‡ã€è·¨åŸŸæŸ¥è¯¢å’Œè‡ªå®šä¹‰é¢˜ç›®åˆ—è¡¨é…ç½®ã€‚é€šè¿‡ä¸“ç”¨çš„è§†å›¾å’Œå­˜å‚¨è¿‡ç¨‹ï¼Œå¤§å¤§ç®€åŒ–äº†å¤æ‚æŸ¥è¯¢çš„å¼€å‘å·¥ä½œï¼Œæå‡äº†ç³»ç»Ÿçš„æ˜“ç”¨æ€§å’Œæ€§èƒ½ã€‚ 