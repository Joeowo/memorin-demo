<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memorin Á¨îËÆ∞ÁºñËæëÂô®</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/responsive.css">
    <style>
        /* Á¨îËÆ∞ÁºñËæëÂô®‰∏ìÁî®Ê†∑Âºè */
        .notes-container {
            display: flex;
            height: 100vh;
            background: var(--gradient-bg);
        }
        
        .notes-sidebar {
            width: 300px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 255, 255, 0.2);
            padding: 20px;
            overflow-y: auto;
        }
        
        .notes-main {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 20px;
        }
        
        .notes-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .notes-editor {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 20px;
            overflow-y: auto;
        }
        
        .tree-item {
            padding: 8px 12px;
            margin: 4px 0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .tree-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .tree-item.active {
            background: rgba(255, 255, 255, 0.2);
            color: #fff;
        }
        
        .tree-item.knowledge-base {
            font-weight: 600;
            color: #fff;
        }
        
        .tree-item.knowledge-area {
            margin-left: 20px;
            color: rgba(255, 255, 255, 0.9);
        }
        
        .tree-item.knowledge-point {
            margin-left: 40px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9em;
        }
        
        .tree-controls {
            display: flex;
            gap: 4px;
            margin-left: auto;
        }
        
        .tree-btn {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: none;
            background: rgba(255, 255, 255, 0.2);
            color: #fff;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .tree-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .editor-form {
            max-width: 800px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #fff;
            font-weight: 500;
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            font-size: 14px;
        }
        
        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .form-group input::placeholder,
        .form-group textarea::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }
        
        .choice-options {
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
        }
        
        .choice-option {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .choice-option input {
            flex: 1;
            margin: 0;
        }
        
        .choice-option .option-label {
            min-width: 30px;
            text-align: center;
            color: #fff;
            font-weight: 500;
        }
        
        .choice-option .correct-indicator {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.5);
            cursor: pointer;
            background: transparent;
            transition: all 0.3s ease;
        }
        
        .choice-option .correct-indicator.correct {
            background: #28a745;
            border-color: #28a745;
        }
        
        .toolbar {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .btn-primary {
            background: #007bff;
            color: #fff;
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
            color: #fff;
        }
        
        .btn-success {
            background: #28a745;
            color: #fff;
        }
        
        .btn-danger {
            background: #dc3545;
            color: #fff;
        }
        
        .btn-info {
            background: #17a2b8;
            color: #fff;
        }
        
        .btn:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }
        
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: rgba(255, 255, 255, 0.8);
        }
        
        .empty-state h3 {
            margin-bottom: 10px;
            color: #fff;
        }
        
        .hidden {
            display: none;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            color: #fff;
            font-weight: 500;
            z-index: 1000;
            animation: slideIn 0.3s ease;
        }
        
        .notification.success {
            background: #28a745;
        }
        
        .notification.error {
            background: #dc3545;
        }
        
        .notification.warning {
            background: #ffc107;
            color: #000;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .format-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .format-option {
            flex: 1;
            padding: 10px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .format-option.active {
            border-color: #007bff;
            background: rgba(0, 123, 255, 0.2);
        }
        
        .preview-area {
            max-height: 300px;
            overflow-y: auto;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            font-family: 'Courier New', monospace;
            font-size: 13px;
            color: #fff;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div class="notes-container">
        <!-- Â∑¶‰æßËæπÊ†è -->
        <div class="notes-sidebar">
            <div class="toolbar">
                <button class="btn btn-primary" onclick="notesManager.createKnowledgeBase()">
                    üìö Êñ∞Âª∫Áü•ËØÜÂ∫ì
                </button>
            </div>
            
            <div class="tree-view" id="treeView">
                <div class="empty-state">
                    <h3>ÊöÇÊó†Á¨îËÆ∞</h3>
                    <p>ÁÇπÂáª"Êñ∞Âª∫Áü•ËØÜÂ∫ì"ÂºÄÂßãÂàõÂª∫</p>
                </div>
            </div>
        </div>
        
        <!-- ‰∏ªÁºñËæëÂå∫ -->
        <div class="notes-main">
            <div class="notes-header">
                <div class="header-left">
                    <h2 id="currentTitle">Memorin Á¨îËÆ∞ÁºñËæëÂô®</h2>
                    <span id="currentPath" style="color: rgba(255, 255, 255, 0.8); font-size: 14px;"></span>
                </div>
                <div class="header-right">
                    <button class="btn btn-secondary" onclick="notesManager.loadFromStorage()">
                        üìÇ ‰ªéÂ≠òÂÇ®Âä†ËΩΩ
                    </button>
                    <button class="btn btn-secondary" onclick="notesManager.showImportDialog()">
                        üìÅ ÂØºÂÖ•
                    </button>
                    <button class="btn btn-secondary" onclick="notesManager.showExportDialog()">
                        üì§ ÂØºÂá∫
                    </button>
                    <button class="btn btn-success" onclick="notesManager.saveToStorage()">
                        üíæ ‰øùÂ≠òÂà∞Â≠òÂÇ®
                    </button>
                    <button class="btn btn-info" onclick="notesManager.importToMainSystem()">
                        üì• ÂØºÂÖ•Âà∞‰∏ªÁ≥ªÁªü
                    </button>
                    <button class="btn btn-primary" onclick="window.location.href='index.html'">
                        üè† ËøîÂõû‰∏ªÈ°µ
                    </button>
                </div>
            </div>
            
            <div class="notes-editor">
                <div id="editorContent">
                    <div class="empty-state">
                        <h3>ÈÄâÊã©‰∏Ä‰∏™È°πÁõÆÂºÄÂßãÁºñËæë</h3>
                        <p>‰ªéÂ∑¶‰æßÊ†ëÁä∂ÁªìÊûÑ‰∏≠ÈÄâÊã©Áü•ËØÜÂ∫ì„ÄÅÁü•ËØÜÂå∫ÊàñÁü•ËØÜÁÇπËøõË°åÁºñËæë</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ÂØºÂÖ•ÂØπËØùÊ°Ü -->
    <div id="importDialog" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üìÅ ÂØºÂÖ•Á¨îËÆ∞</h3>
                <button class="close-btn" onclick="notesManager.hideImportDialog()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="format-selector">
                    <div class="format-option active" data-format="json">
                        <strong>JSON Ê†ºÂºè</strong>
                        <br>Ê†áÂáÜÊ†ºÂºèÔºåÂåÖÂê´ÂÆåÊï¥Êï∞ÊçÆ
                    </div>
                    <div class="format-option" data-format="markdown">
                        <strong>Markdown Ê†ºÂºè</strong>
                        <br>ÊñáÊú¨Ê†ºÂºèÔºå‰æø‰∫éÁºñËæë
                    </div>
                </div>
                <div class="form-group">
                    <label for="importFile">ÈÄâÊã©Êñá‰ª∂</label>
                    <input type="file" id="importFile" accept=".json,.md,.txt">
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="mergeImport" checked>
                        ÂêàÂπ∂ÂØºÂÖ•Ôºà‰øùÁïôÁé∞ÊúâÊï∞ÊçÆÔºâ
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="notesManager.hideImportDialog()">ÂèñÊ∂à</button>
                <button class="btn btn-primary" onclick="notesManager.handleImport()">ÂØºÂÖ•</button>
            </div>
        </div>
    </div>
    
    <!-- ÂØºÂá∫ÂØπËØùÊ°Ü -->
    <div id="exportDialog" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üì§ ÂØºÂá∫Á¨îËÆ∞</h3>
                <button class="close-btn" onclick="notesManager.hideExportDialog()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="format-selector">
                    <div class="format-option active" data-format="json">
                        <strong>JSON Ê†ºÂºè</strong>
                        <br>Ê†áÂáÜÊ†ºÂºèÔºåÂåÖÂê´ÂÆåÊï¥Êï∞ÊçÆ
                    </div>
                    <div class="format-option" data-format="markdown">
                        <strong>Markdown Ê†ºÂºè</strong>
                        <br>ÊñáÊú¨Ê†ºÂºèÔºå‰æø‰∫éÂàÜ‰∫´
                    </div>
                </div>
                <div class="form-group">
                    <label for="exportFilename">Êñá‰ª∂Âêç</label>
                    <input type="text" id="exportFilename" placeholder="memorin-notes">
                </div>
                <div class="form-group">
                    <label>ÂØºÂá∫È¢ÑËßà</label>
                    <div class="preview-area" id="exportPreview"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="notesManager.hideExportDialog()">ÂèñÊ∂à</button>
                <button class="btn btn-primary" onclick="notesManager.handleExport()">ÂØºÂá∫</button>
            </div>
        </div>
    </div>
    
    <script src="js/notes-manager.js"></script>
    <script>
        // ÂàùÂßãÂåñÁ¨îËÆ∞ÁÆ°ÁêÜÂô®
        const notesManager = new NotesManager();
        
        // Ê†ºÂºèÈÄâÊã©Âô®‰∫ã‰ª∂
        document.querySelectorAll('.format-option').forEach(option => {
            option.addEventListener('click', function() {
                const container = this.closest('.format-selector');
                container.querySelectorAll('.format-option').forEach(o => o.classList.remove('active'));
                this.classList.add('active');
                
                // Êõ¥Êñ∞È¢ÑËßà
                if (container.closest('#exportDialog')) {
                    notesManager.updateExportPreview();
                }
            });
        });
        
        // Êñá‰ª∂ÈÄâÊã©‰∫ã‰ª∂
        document.getElementById('importFile').addEventListener('change', function() {
            if (this.files[0]) {
                notesManager.previewImportFile(this.files[0]);
            }
        });
        
        // ÂØºÂá∫Êñá‰ª∂ÂêçËæìÂÖ•‰∫ã‰ª∂
        document.getElementById('exportFilename').addEventListener('input', function() {
            notesManager.updateExportPreview();
        });
    </script>
</body>
</html> 