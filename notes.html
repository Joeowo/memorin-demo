<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memorin ç¬”è®°ç¼–è¾‘å™¨</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/responsive.css">
    <style>
        /* ç¬”è®°ç¼–è¾‘å™¨ä¸“ç”¨æ ·å¼ */
        .notes-container {
            display: flex;
            height: 100vh;
            background: var(--gradient-bg);
        }
        
        .notes-sidebar {
            width: 300px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-right: 1px solid rgba(255, 255, 255, 0.2);
            padding: 20px;
            overflow-y: auto;
        }
        
        .notes-main {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 20px;
        }
        
        .notes-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .notes-editor {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 20px;
            overflow-y: auto;
        }
        
        .tree-item {
            padding: 8px 12px;
            margin: 4px 0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .tree-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .tree-item.active {
            background: rgba(255, 255, 255, 0.2);
            color: #fff;
        }
        
        .tree-item.knowledge-base {
            font-weight: 600;
            color: #fff;
        }
        
        .tree-item.knowledge-area {
            margin-left: 20px;
            color: rgba(255, 255, 255, 0.9);
        }
        
        .tree-item.knowledge-point {
            margin-left: 40px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9em;
        }
        
        .tree-controls {
            display: flex;
            gap: 4px;
            margin-left: auto;
        }
        
        .tree-btn {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: none;
            background: rgba(255, 255, 255, 0.2);
            color: #fff;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .tree-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .editor-form {
            max-width: 800px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #fff;
            font-weight: 500;
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            font-size: 14px;
        }
        
        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .form-group input::placeholder,
        .form-group textarea::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }
        
        .choice-options {
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
        }
        
        .choice-option {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .choice-option input {
            flex: 1;
            margin: 0;
        }
        
        .choice-option .option-label {
            min-width: 30px;
            text-align: center;
            color: #fff;
            font-weight: 500;
        }
        
        .choice-option .correct-indicator {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.5);
            cursor: pointer;
            background: transparent;
            transition: all 0.3s ease;
        }
        
        .choice-option .correct-indicator.correct {
            background: #28a745;
            border-color: #28a745;
        }
        
        .toolbar {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .btn-primary {
            background: #007bff;
            color: #fff;
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
            color: #fff;
        }
        
        .btn-success {
            background: #28a745;
            color: #fff;
        }
        
        .btn-danger {
            background: #dc3545;
            color: #fff;
        }
        
        .btn-info {
            background: #17a2b8;
            color: #fff;
        }
        
        .btn:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }
        
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: rgba(255, 255, 255, 0.8);
        }
        
        .empty-state h3 {
            margin-bottom: 10px;
            color: #fff;
        }
        
        .hidden {
            display: none;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            color: #fff;
            font-weight: 500;
            z-index: 1000;
            animation: slideIn 0.3s ease;
        }
        
        .notification.success {
            background: #28a745;
        }
        
        .notification.error {
            background: #dc3545;
        }
        
        .notification.warning {
            background: #ffc107;
            color: #000;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .format-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .format-option {
            flex: 1;
            padding: 10px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .format-option.active {
            border-color: #007bff;
            background: rgba(0, 123, 255, 0.2);
        }
        
        .preview-area {
            max-height: 300px;
            overflow-y: auto;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            font-family: 'Courier New', monospace;
            font-size: 13px;
            color: #fff;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div class="notes-container">
        <!-- å·¦ä¾§è¾¹æ  -->
        <div class="notes-sidebar">
            <div class="toolbar">
                <button class="btn btn-primary" onclick="notesManager.createKnowledgeBase()">
                    ğŸ“š æ–°å»ºçŸ¥è¯†åº“
                </button>
            </div>
            
            <div class="tree-view" id="treeView">
                <div class="empty-state">
                    <h3>æš‚æ— ç¬”è®°</h3>
                    <p>ç‚¹å‡»"æ–°å»ºçŸ¥è¯†åº“"å¼€å§‹åˆ›å»º</p>
                </div>
            </div>
        </div>
        
        <!-- ä¸»ç¼–è¾‘åŒº -->
        <div class="notes-main">
            <div class="notes-header">
                <div class="header-left">
                    <h2 id="currentTitle">Memorin ç¬”è®°ç¼–è¾‘å™¨</h2>
                    <span id="currentPath" style="color: rgba(255, 255, 255, 0.8); font-size: 14px;"></span>
                </div>
                <div class="header-right">
                    <button class="btn btn-secondary" onclick="notesManager.loadFromStorage()">
                        ğŸ“‚ ä»å­˜å‚¨åŠ è½½
                    </button>
                    <button class="btn btn-secondary" onclick="notesManager.showImportDialog()">
                        ğŸ“ å¯¼å…¥
                    </button>
                    <button class="btn btn-secondary" onclick="notesManager.showExportDialog()">
                        ğŸ“¤ å¯¼å‡º
                    </button>
                    <button class="btn btn-success" onclick="notesManager.saveToStorage()">
                        ğŸ’¾ ä¿å­˜åˆ°å­˜å‚¨
                    </button>
                    <button class="btn btn-info" onclick="notesManager.importToMainSystem()">
                        ğŸ“¥ å¯¼å…¥åˆ°ä¸»ç³»ç»Ÿ
                    </button>
                    <button class="btn btn-primary" onclick="window.location.href='index.html'">
                        ğŸ  è¿”å›ä¸»é¡µ
                    </button>
                </div>
            </div>
            
            <div class="notes-editor">
                <div id="editorContent">
                    <div class="empty-state">
                        <h3>é€‰æ‹©ä¸€ä¸ªé¡¹ç›®å¼€å§‹ç¼–è¾‘</h3>
                        <p>ä»å·¦ä¾§æ ‘çŠ¶ç»“æ„ä¸­é€‰æ‹©çŸ¥è¯†åº“ã€çŸ¥è¯†åŒºæˆ–çŸ¥è¯†ç‚¹è¿›è¡Œç¼–è¾‘</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- å¯¼å…¥å¯¹è¯æ¡† -->
    <div id="importDialog" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ğŸ“ å¯¼å…¥ç¬”è®°</h3>
                <button class="close-btn" onclick="notesManager.hideImportDialog()">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="format-selector">
                    <div class="format-option active" data-format="json">
                        <strong>JSON æ ¼å¼</strong>
                        <br>æ ‡å‡†æ ¼å¼ï¼ŒåŒ…å«å®Œæ•´æ•°æ®
                    </div>
                    <div class="format-option" data-format="markdown">
                        <strong>Markdown æ ¼å¼</strong>
                        <br>æ–‡æœ¬æ ¼å¼ï¼Œä¾¿äºç¼–è¾‘
                    </div>
                </div>
                <div class="form-group">
                    <label for="importFile">é€‰æ‹©æ–‡ä»¶</label>
                    <input type="file" id="importFile" accept=".json,.md,.txt">
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="mergeImport" checked>
                        åˆå¹¶å¯¼å…¥ï¼ˆä¿ç•™ç°æœ‰æ•°æ®ï¼‰
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="notesManager.hideImportDialog()">å–æ¶ˆ</button>
                <button class="btn btn-primary" onclick="notesManager.handleImport()">å¯¼å…¥</button>
            </div>
        </div>
    </div>
    
    <!-- å¯¼å‡ºå¯¹è¯æ¡† -->
    <div id="exportDialog" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>ğŸ“¤ å¯¼å‡ºç¬”è®°</h3>
                <button class="close-btn" onclick="notesManager.hideExportDialog()">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="format-selector">
                    <div class="format-option active" data-format="json">
                        <strong>JSON æ ¼å¼</strong>
                        <br>æ ‡å‡†æ ¼å¼ï¼ŒåŒ…å«å®Œæ•´æ•°æ®
                    </div>
                    <div class="format-option" data-format="markdown">
                        <strong>Markdown æ ¼å¼</strong>
                        <br>æ–‡æœ¬æ ¼å¼ï¼Œä¾¿äºåˆ†äº«
                    </div>
                </div>
                <div class="form-group">
                    <label for="exportFilename">æ–‡ä»¶å</label>
                    <input type="text" id="exportFilename" placeholder="memorin-notes">
                </div>
                <div class="form-group">
                    <label>å¯¼å‡ºé¢„è§ˆ</label>
                    <div class="preview-area" id="exportPreview"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="notesManager.hideExportDialog()">å–æ¶ˆ</button>
                <button class="btn btn-primary" onclick="notesManager.handleExport()">å¯¼å‡º</button>
            </div>
        </div>
    </div>
    
    <script src="js/notes-manager.js"></script>
    <script>
        // åˆå§‹åŒ–ç¬”è®°ç®¡ç†å™¨
        const notesManager = new NotesManager();
        
        // æ ¼å¼é€‰æ‹©å™¨äº‹ä»¶
        document.querySelectorAll('.format-option').forEach(option => {
            option.addEventListener('click', function() {
                const container = this.closest('.format-selector');
                container.querySelectorAll('.format-option').forEach(o => o.classList.remove('active'));
                this.classList.add('active');
                
                // æ›´æ–°é¢„è§ˆ
                if (container.closest('#exportDialog')) {
                    notesManager.updateExportPreview();
                }
            });
        });
        
        // æ–‡ä»¶é€‰æ‹©äº‹ä»¶
        document.getElementById('importFile').addEventListener('change', function() {
            if (this.files[0]) {
                notesManager.previewImportFile(this.files[0]);
            }
        });
        
        // å¯¼å‡ºæ–‡ä»¶åè¾“å…¥äº‹ä»¶
        document.getElementById('exportFilename').addEventListener('input', function() {
            notesManager.updateExportPreview();
        });
    </script>
</body>
</html> 